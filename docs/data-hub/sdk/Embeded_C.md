Getting Started
---------------

To get started head over to our [QuickStart](/quickstart.html) which will help you install IoT Data Analytics tracking your devices, applications and your site in just a few minutes. Once you’ve installed the library, read on for the detailed API reference!

Identify
--------

The **identify** method is how you tie one of your users and their actions to a recognizable userId and traits. You can read more about how to set it up or about how it works.

*Note*: You won’t need to call identify for anonymous users of your devices or  visitors to your services. We’ll automatically assign them an anonymousId, so just calling page and track will still work just fine without **identify**.

Here’s what an **identify** call looks like, along with its method signature:

```
    dsdSourceIdentify("43loelgopw8", "{\"name\":\"Barco You\",\"email\":\"barco@dasudian.com\",\"gender\":\"mail\"}", NULL);
```
> dsdSourceIdentify(char *userId, char *traits, char* options);

**userId**
*String, optional*
The unique identifier for the user, which is stored in your Database or fetched from 3rd party services (e.g. Facebook or Wechat). If you don’t know who the user is yet, you can omit the userId and just record traits. You can read more about identities in the identify reference.

**traits**
*Object, optional*
A dictionary of traits you know about the user, like their email or name. You can read more about traits in the identify reference.

**options**
*Object, optional*
A dictionary of options, that let you do things like enable or disable specific integrations for the call. Note: If you do not pass a traits object, pass an empty object (ie, ‘{}’) before options

**callback**
*Function, optional*
A callback function that gets called after a short timeout, giving the browser time to make outbound requests first.

The userId and traits are both optional. So you can omit the userId if you want to associate traits with the currently identified user, anonymous or not, like so:

```
    dsdSourceIdentify(NULL, "{\"email\":\"barco@dasudian.com\",\"newsletter\":\"true\",\"industry\":\"Technology\"}", NULL);
```

We’ll store those traits internally, and carry them over the next time you call **identify** with a *userId*. For example, you might do that when someone signs up for a newsletter but hasn’t yet created an account on your site.

You can also omit both traits and options—passing the callback as the second argument—if all you want to do is associate an ID, like so:

```
    dsdSourceIdentify(NULL, "{\"email\":\"barco@dasudian.com\",\"newsletter\":\"true\",\"industry\":\"Technology\"}", NULL);
```

Record
-----

The **record** method lets you record any envents generated by your devcies or actions your users perform. You can read more about how to set it up or about how it works.

Here’s a basic example, along with the **record** method signature:

```
    dsdSourceRecord("Power on","{\"type\":\"Start Engine\",\"duration\":\"12.1s\",\"maxVoltage\":\"13\",\"stableVoltage\":\"8\",\"maxCurrency\": \"100mA\",\"stableCurrency\":\"80mA\"}", NULL, NULL, NULL);
```
> int dsdSourceRecord(char *event, char *properties, DSDCallback callback, char* options, int timeout);

**event**
*String*
The name of the event recordd by your devices or applications that you hope to track. You can read more about the track method and what event names we recommend.

**properties**
*Object, optional*
A dictionary of properties for the event. If the event was 'Added to Cart', it might have properties like price and productType.

**options**
*Object, optional*
A dictionary of options, that let you do things like enable or disable specific integrations for the call. Note: If you do not pass a properties object, pass an empty object (ie, ‘{}’) before options

**callback**
*Function, optional*
A callback function that gets called after a short timeout, giving the browser time to make the track requests first. Also checkout our dedicated trackLink and trackForm helpers.

**timeout**
*integer, optional*
A integer signifing milliseconds in which the record function will be called again automatically, the default value is 'infinity' meaning this function will be called only once unless it is called explicitly anywhere else. If you hope to recorde an event periotically, please explicitly indicate a period time here.

The only required argument to record in Datasource.js is an event name string. You can read more about how we recommend naming your events.

Page
----

The **page** method lets you record any page/screen views of your applications or on your website, along with optional extra information about the page/screen being viewed.

It’s already included in the SDK snippet by default just after the call to load, so in most cases you never need to touch it. However, if you want to add extra information, like tagging the view with a name or category, read on!

Note that you must call view at least once per page load! (That’s why we put it in your snippet for you.) If you have a single page app you can call it multiple times, whenever a new page view occurs.

Here’s a basic example, along with the page method signature:

    datasource.page('Pricelist');

> datasource.page([category], [name], [properties], [options],
> [callback]);

**category**
*String, optional*
The category of the view. Useful for things like ecommerce where many pages might live under a larger category. Note: if you only pass one string to page we assume it’s a name, not a category. You must include a name if you want to send a category.

**name**
*String, optional*
The name of the of the page, for example Signup or Home.

**properties**
*Object, optional*
A dictionary of properties of the page. We’ll automatically send the url, title, referrer and path, but you can add your own too!

**options**
*Object, optional*
A dictionary of options, that let you do things like enable or disable specific integrations for the call. Note: If you do not pass a properties object, pass an empty object (ie, ‘{}’) before options

**callback**
*Function, optional*
A callback function that gets called after a short timeout, giving the browser time to make outbound requests first.

**Default Properties**
A few properties are automatically added to each page call. For example, if you call:

```
    dsdSourcePage("Pricelist", NULL, NULL);
```

> int dsdSourcePage(char *category, char *name, char *properties);

We will translate that to the following without any extra work from you:

```
    dsdSourcePage("Pricing", NULL, "{\"title\":\"Segment Pricing\", \"url\": \"https://www.dasudian.com/pricing\",\"pat\":\"pricing\",\"referrer\": \"https://dasudian.com\"}");
```

You can also override these values if you’d like, for example:

```
    dsdSourcePage("Pricing", NULL, "{\"title\":\"My Overridden Title\",\"path\":\"/pricing/view\"}");
```

In which case we will respect your overridden title of My Overridden Title and add in the default url and referrer.

Track
----

The **track** method lets you track the position of your devices along with optional extra information about the position in real-time.

Here’s a basic example, along with the track method signature:

```
    dsdSourceTrack("Languang Building", "{\"latitude\":\"24.597\",\"Longitude\":\"-24.455\"}", NULL, NULL, NULL);
```

> int dsdSourceTrack(char *name, char *properties, char *oprtions, DSDCallback callback, int timeout);

**name**
*String, optional*
The name of the of the position, for example "Languang Building".

**location**
*Object, optional*
A dictionary of latitude and longitude properties of the position. 

**options**
*Object, optional*
A dictionary of options, that let you do things like enable or disable specific integrations for the call. Note: If you do not pass a properties object, pass an empty object (ie, ‘{}’) before options

**callback**
*Function, optional*
A callback function that gets called after a short timeout, giving the browser time to make outbound requests first.

**timeout**
*integer, optional*
A integer signifing milliseconds in which the track function will be called again automatically, the default value is 'infinity' meaning this function will be called only once unless it is called explicitly anywhere else. If you hope to recorde an event periotically, please explicitly indicate a period time here.

Alias
-----

The **alias** method combines two previously unassociated user/client/device identities. This comes in handy if the same user visits from two different services or your devices changed identifiers for different services, and you want to combine their history.

Some providers also don’t alias automatically for you when an anonymous user signs up (like Mixpanel), so you need to call alias manually right after sign up with their brand new userId.

Here’s a basic example along with the alias method signature:

> int dsdSourceAlias(char *Id, char *previousId, char* options, DSDCallback callback);

**Id**
*String*
The new User/Client/Device ID you want to associate the user/client/device with.

**previousId**
*String, optional*
The previous ID that the user/client/device was recognized by. This defaults to the currently identified user’s ID if you don’t pass one. In most cases you don’t need to worry about this argument.

**options**
*Object, optional*
A dictionary of options, that let you do things like enable or disable specific integrations for the call.

**callback**
*Function, optional*
A callback function that gets called after a short timeout, giving the browser time to make the alias requests first.

Group
-----

The **group** method associates an user or a device with a group. The group can be a company, organization, account, project, workspace, team or any other name you came up with for the same concept.

A user/device can be in more than one group; however, not all platforms support multiple groups. It also lets you record custom traits about the group, like industry or number of employees. Calling group is a slightly more advanced feature, but it’s helpful if you have accounts with multiple users.

Here’s a basic example along with the group method signature:

```
    dsdSourceGroup("IoT_Aliiance", \"{\"name\": \"Dasudian\",\"industry\": \"Technology\",\"employees\": \"120\"}", NULL, NULL);
```

> int dsdSourceGroup(groupId, char *traits, char *options, DSDCallback callback);

**groupId**
*String*
The new Group ID you want to create and associate the currently identified or anonymous user/device with.

**traits**
*Object, optional*
A dictionary of traits for the group. Example traits for a group include address, website and employees.

**options**
*Object, optional*
A dictionary of options, that let you do things like enable or disable specific integrations for the call. Note: If you do not pass a properties object, pass an empty object (ie, ‘{}’) before options

**callback**
*Function, optional*
A callback function that gets called after a short timeout, giving the browser time to make the track requests first. Also checkout our dedicated trackLink and trackForm helpers.

Selecting Integrations
----------------------

Filtering events calls can be done right from the [Dasudian Developer's Portal](https://dev.dasudian.com) on your project schema page. We recommend using the UI if possible since it’s a much simpler way of managing your filters and can be updated with no code changes on your side.

The alias, group, identify, page and record calls can all be passed an object of options that lets you turn certain integrations on or off.

Here’s an example showing an identify call that only goes to Mixpanel and KISSmetrics:

```
    dataSourceIdentify("019mr8mf4r", "{
      \"email\": \"barco@dasudian.com\",
      \"plan\": \"Premium\"
    }", "{
      \"integrations\": {
        \"All\": false,
        \"Mixpanel\": true,
        \"KISSmetrics\": true
      }}"
	);
```
In this case, we’re specifying that we want this identify to only go to Mixpanel and KISSmetrics. 'All': false says that no integration should be enabled unless otherwise specified. 'Mixpanel': true turns on Mixpanel, etc. Note, you must use an Integration’s formal, case sensitive name (i.e. “AdLearn Open Platform”, “awe.sm”, “MailChimp”, etc.), which is also the title of the integration’s documentation.

