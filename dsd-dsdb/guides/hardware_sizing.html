<!DOCTYPE html>
<html lang="zh">

  <head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta name="description" content="大数点物联网开发者平台文档，基于大数点物联网平台，帮助开发者快速构建物联网应用">
    <title>Hardware Sizing Guidelines</title>
    <link rel="icon" href="/images/favicon.ico" type="image/x-icon">
    <link href="/css/bootstrap.min.css" rel="stylesheet">
    <link href="/css/app.css" rel="stylesheet">
    <link href="/css/doc.css" rel="stylesheet">
    <link href="//cdn.bootcss.com/highlight.js/9.2.0/styles/dark.min.css" rel="stylesheet">
    <script src="/js/jquery.js"></script>
    <script src="/js/bootstrap.min.js"></script>
    <script src="/js/common.js"></script>
    <script src="//cdn.bootcss.com/highlight.js/9.2.0/highlight.min.js"></script>
    <script>
      $(function() {
        // $(".document .side_left ul li a").click(function() {
        //   $(".document .side_left ul li a").removeClass("active");
        //   $(this).addClass("active");
        // })
        $(".menu1>li>a.fold").click(function(){
				  $(".menu1 a.fold").css("background-image","url(/images/number_down.png)");
				  $(".menu2,.menu3").slideUp();
			  })
			  $(".menu2>li>a.fold").click(function(){
          $(".menu2 a.fold").css("background-image","url(/images/number_down.png)");
          $(".menu3").slideUp();
        })
        $(".fold").click(function() {
          if ($(this).next("ul").is(":hidden")) {
            $(this).css("background-image", "url(/images/number_up.png)");
            $(this).next("ul").slideDown();
          } else {
            $(this).css("background-image", "url(/images/number_down.png)");
            $(this).next("ul").slideUp();
          }
        })
      })
      $(function(){
			  $(".side_right").scroll( function() { 
				  var scrollValue=$(".side_right").scrollTop();
				  scrollValue > 100 ? $('div[class=scroll]').fadeIn():$('div[class=scroll]').fadeOut();
			  });	
			  $('#scroll').click(function(){
				  $(".side_right").animate({scrollTop:0},200);	
			  });	
		  })
    </script>
    <link href='//fonts.useso.com/css?family=Open+Sans:300|Source+Code+Pro:400' rel='stylesheet' type='text/css'>
  </head>

  <body>
    <nav class="navbar navbar-default">
      <div class="container-fluid">
        <div class="navbar-header">
          <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#bs-example-navbar-collapse-1" aria-expanded="false">
            <span class="sr-only">Toggle navigation</span>
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
          </button>
          <a class="navbar-brand" href="https://dev.dasudian.com"><img src="/images/logo.png"/></a>
        </div>

        <div class="collapse navbar-collapse" id="bs-example-navbar-collapse-1">
          <ul class="nav navbar-nav navbar-right">
            <li><a href="http://dasudian.com/datahub" >IoT Data Hub</a></li>
            <li><a href="http://dasudian.com/product_service" >产品服务</a></li>
            <li><a href="/" >文档</a></li>
            <li><a href="http://dasudian.com/price" >定价</a></li>
            <li><a href="https://www.github.com/Dasudian"  target="_blank" >社区</a></li>
            <li><a href="https://dev.dasudian.com/login/view" class="btn-small" target="_blank">登录</a></li>
            <li><a href="https://dev.dasudian.com/sign_up/view" class="btn-small" target="_blank">注册</a></li>
          </ul>
        </div>
      </div>
    </nav>

    <div class="container-fluid0 document">
      <div class="side_left">
        <ul class="menu1">
          <li><a class="fold">大数点物联网平台简介</a>
            <ul class="menu2" >
              <li><a id="intro-index" class="" href="/dsd-intro/index.html">简介</a></li>
            </ul>
          </li>
          <li><a class="fold">Data Hub</a>
            <ul class="menu2" >
              <li><a id="datahub-index" class="" href="/dsd-datahub/">Data Hub Overview</a></li>
              <li><a class="fold">SDK</a>
                <ul class="menu3" >
                  <li><a id="datahub-sdk-js" class="" href="/dsd-datahub/sdk/javascript.html">JavaScript</a></li>
                  <li><a id="datahub-sdk-embededc" class="" href="/dsd-datahub/sdk/embeded_c.html">Embeded C</a></li>
                </ul>
              </li>
            </ul>
          </li>
          <li><a class="fold">DSD Database (DSDB)</a>
            <ul class="menu2" style="display: block;">
              <li><a id="dsdb-index" class="" href="/dsd-dsdb/">DSDB Overview</a></li>
              <li><a class="fold">Introduction</a>
                <ul class="menu3" >
                  <li><a id="dsdb-intro-overview" class="" href="/dsd-dsdb/introduction/index.html">Overview</a></li>
                  <li><a id="dsdb-intro-installation" class="" href="/dsd-dsdb/introduction/installation.html">Installation</a></li>
                  <li><a id="dsdb-intro-start" class="" href="/dsd-dsdb/introduction/getting_started.html">Getting Started</a></li>
                </ul>
              </li>
              <li><a class="fold">Administration</a>
                <ul class="menu3" >
                  <li><a id="dsdb-admin-overview" class="" href="/dsd-dsdb/administration/index.html">administration Overview</a></li>
                  <li><a id="dsdb-authent&amp;authori" class="" href="/dsd-dsdb/administration/authentication_and_authorization.html">Authentication&Authorization</a></li>
                  <li><a id="dsdb-backup&amp;restore" class="" href="/dsd-dsdb/administration/backup_and_restore.html">Backup&Restore</a></li>
                  <li><a id="dsdb-configuration" class="" href="/dsd-dsdb/administration/config.html">Configuration</a></li>
                  <li><a id="dsdb-logs" class="" href="/dsd-dsdb/administration/logs.html">Logs</a></li>
                  <li><a id="dsdb-monitoring" class="" href="/dsd-dsdb/administration/statistics.html">Server Monitoring</a></li>
                  <li><a id="dsdb-upgrade" class="" href="/dsd-dsdb/administration/upgrading.html">Upgrading</a></li>
                </ul>
              </li>
              <li><a class="fold">Clients</a>
                <ul class="menu3" >
                  <li><a id="dsdb-clients-overview" class="" href="/dsd-dsdb/clients/index.html">Clients Overview</a></li>
                  <li><a id="dsdb-clients-httpapi" class="" href="/dsd-dsdb/clients/api.html">HTTP API</a></li>
                </ul>
              </li>
              <li><a class="fold">Concepts</a>
                <ul class="menu3" >
                  <li><a id="dsdb-concepts-overview" class="" href="/dsd-dsdb/concepts/index.html">Concepts Overview</a></li>
                  <li><a id="dsdb-key-concepts" class="" href="/dsd-dsdb/concepts/key_concepts.html">Key Concepts</a></li>
                  <li><a id="dsdb-concepts-arch" class="" href="/dsd-dsdb/concepts/how_dsdb_works.html">Architecture</a></li>
                  <li><a id="dsdb-concepts-schema-data-layout" class="" href="/dsd-dsdb/concepts/schema_and_data_layout.html">Scheam Design</a></li>
                  <li><a id="dsdb-concepts-insights-tradeoffs" class="" href="/dsd-dsdb/concepts/insights_tradeoffs.html">Insights Tradeoffs</a></li>
                  <li><a id="dsdb-concepts-api-endpoints" class="" href="/dsd-dsdb/concepts/api.html">API Endpoints&Ports</a></li>
                  <li><a id="dsdb-concepts-storage-engine" class="" href="/dsd-dsdb/concepts/storage_engine.html">Storage Engine</a></li>
                  <li><a id="dsdb-concepts-glossary" class="" href="/dsd-dsdb/concepts/glossary.html">Glossary of Terms</a></li>
                  <li><a id="dsdb-concepts-vs-sql" class="" href="/dsd-dsdb/concepts/crosswalk.html">Comparison to SQL</a></li>
                </ul>
              </li>
              <li><a class="fold">Data Sources</a>
                <ul class="menu3" >
                  <li><a id="dsdb-datasource-diamond" class="" href="/dsd-dsdb/data_sources/diamond.html">Diamond</a></li>
                  <li><a id="dsdb-datasource-opentsdb" class="" href="/dsd-dsdb/data_sources/opentsdb.html">OpenTSDB</a></li>
                </ul>
              </li>
              <li><a class="fold">Guides</a>
                <ul class="menu3" style="display: block;">
                  <li><a id="dsdb-guides-clustering" class="" href="/dsd-dsdb/guides/clustering.html">Clustering</a></li>
                  <li><a id="dsdb-guides-ddr" class="" href="/dsd-dsdb/guides/downsampling_and_retention.html">Downsampling and Data Retention</a></li>
                  <li><a id="dsdb-guides-hsg" class="active" href="/dsd-dsdb/guides/hardware_sizing.html">Hardware Sizing Guidelines</a></li>
                  <li><a id="dsdb-guides-querying" class="" href="/dsd-dsdb/guides/querying_data.html">Querying Data</a></li>
                  <li><a id="dsdb-guides-writing" class="" href="/dsd-dsdb/guides/writing_data.html">Writing Data</a></li>
                </ul>
              </li>
              <li><a class="fold">Query Language</a>
                <ul class="menu3" >
                  <li><a id="dsdb-querylang-overview" class="" href="/dsd-dsdb/query_language/index.html">Overview</a></li>
                  <li><a id="dsdb-querylang-dataexp" class="" href="/dsd-dsdb/query_language/data_exploration.html">Data Exploration</a></li>
                  <li><a id="dsdb-querylang-scheamexp" class="" href="/dsd-dsdb/query_language/schema_exploration.html">Schema Exploration</a></li>
                  <li><a id="dsdb-querylang-func" class="" href="/dsd-dsdb/query_language/functions.html">Functions</a></li>
                  <li><a id="dsdb-querylang-contq" class="" href="/dsd-dsdb/query_language/continuous_queries.html">Continuous Queries</a></li>
                  <li><a id="dsdb-querylang-spec" class="" href="/dsd-dsdb/query_language/spec.html">Query Language Reference</a></li>
                  <li><a id="dsdb-querylang-mgmt" class="" href="/dsd-dsdb/query_language/database_management.html">Database Management</a></li>
                  <li><a id="dsdb-querylang-math" class="" href="/dsd-dsdb/query_language/math_operators.html">Mathematical Operators</a></li>
                </ul>
              </li>
              <li><a class="fold">Sample Data</a>
                <ul class="menu3" >
                  <li><a id="dsdb-sampledata-down" class="" href="/dsd-dsdb/sample_data/data_download.html">Sample Data Download</a></li>
                </ul>
              </li>
              <li><a class="fold">Tools</a>
                <ul class="menu3" >
                  <li><a id="dsdb-tools-overview" class="" href="/dsd-dsdb/tools/index.html">Tools Overview</a></li>
                  <li><a id="dsdb-tools-shell" class="" href="/dsd-dsdb/tools/shell.html">CLI/Shell</a></li>
                  <li><a id="dsdb-tools-webadmin" class="" href="/dsd-dsdb/tools/web_admin.html">Web Admin Interface</a></li>
                </ul>
              </li>
              <li><a class="fold">Write Protocols</a>
                <ul class="menu3" >
                  <li><a id="dsdb-writepro-overview" class="" href="/dsd-dsdb/write_protocols/">Overview</a></li>
                  <li><a id="dsdb-writepro-line" class="" href="/dsd-dsdb/write_protocols/line.html">Line Protocol</a></li>
                  <li><a id="dsdb-writepro-syntax" class="" href="/dsd-dsdb/write_protocols/write_syntax.html">Write Syntax</a></li>
                  <li><a id="dsdb-writepro-json" class="" href="/dsd-dsdb/write_protocols/json.html">JSON Protocol</a></li>
                  <li><a id="dsdb-writepro-udp" class="" href="/dsd-dsdb/write_protocols/udp.html">Service - UDP</a></li>
                  <li><a id="dsdb-writepro-graphite" class="" href="/dsd-dsdb/write_protocols/graphite.html">Service - Graphite</a></li>
                  <li><a id="dsdb-writepro-opentsdb" class="" href="/dsd-dsdb/write_protocols/opentsdb.html">Servcie - OpenTSDB</a></li>
                  <li><a id="dsdb-writepro-collectd" class="" href="/dsd-dsdb/write_protocols/collectd.html">Service - CollectD</a></li>
                </ul>
              </li>
              <li><a class="fold">Troubleshooting</a>
                <ul class="menu3" >
                  <li><a id="dsdb-troubleshoot-overview" class="" href="/dsd-dsdb/troubleshooting/index.html">Troubleshooting Overview</a></li>
                  <li><a id="dsdb-troubleshoot-fei" class="" href="/dsd-dsdb/troubleshooting/frequently_encountered_issues.html">Frequently Encountered Issues</a></li>
                  <li><a id="dsdb-troubleshoot-monitor" class="" href="/dsd-dsdb/troubleshooting/system_monitoring.html">System Monitoring</a></li>
                </ul>
              </li>
            </ul>
          </li>
          <li><a class="fold">DSD App/API Container (DAC)</a>
            <ul class="menu2" >
              <li><a id="dac-index" class="" href="/dsd-dac/">DAC介绍</a></li>
              <li><a id="dac-java-api" class="" href="/dsd-dac/dac_cloud_api_java.html">DAC Java API</a></li>
              <li><a id="dac-c-api" class="" href="/dsd-dac/dac_cloud_api_c.html">DAC C API</a></li>
              <li><a id="dac-cpp-api" class="" href="/dsd-dac/dac_cloud_api_cpp.html">DAC C++ API</a></li>
            </ul>
          </li>
          <li><a class="fold">IM &amp; Push Cloud</a>
            <ul class="menu2" >
              <li><a id="im-index" class="" href="/dsd-im/">IM服务简介</a></li>
              <li><a id="im-android" class="" href="/dsd-im/integrate-im-android.html">Android上集成IM功能</a></li>
              <li><a id="im-ios" class="" href="/dsd-im/integrate-im-ios.html">iOS上集成IM功能</a></li>
            </ul>
          </li>
          <li><a class="fold">MQ Cloud</a>
            <ul class="menu2" >
              <li><a id="mq-index" class="" href="/dsd-mq/">MQ服务简介</a></li>
            </ul>
          </li>
          <li><a class="fold">大数点云账户管理AAA Cloud</a>
            <ul class="menu2" >
              <li><a id="aaa-index" class="" href="/dsd-aaa/">AAA简介</a></li>
              <li><a id="aaa-android" class="" href="/dsd-aaa/dev-guide-android.html">Android上集成AAA服务</a></li>
              <li><a id="aaa-ios" class="" href="/dsd-aaa/dev-guide-ios.html">iOS上集成AAA服务</a></li>
              <li><a id="aaa-api" class="" href="/dsd-aaa/aaa-api.html">AAA API</a></li>
            </ul>
          </li>
          <li><a class="fold">大数点云存储CloudFile</a>
            <ul class="menu2" >
              <li><a id="cf-index" class="" href="/dsd-cloudfile/">CloudFile介绍</a></li>
              <li><a id="cf-android" class="" href="/dsd-cloudfile/dev-guide-android.html">Android上集成CloudFile服务</a></li>
              <li><a id="cf-ios" class="" href="/dsd-cloudfile/dev-guide-ios.html">iOS上集成CloudFile服务</a></li>
              <li><a id="cf-api" class="" href="/dsd-cloudfile/cf-api.html">CloudFile API</a></li>
            </ul>
          </li>
        </ul>
    </div>

    <div class="side_right">
      <div class="doc">
        <h1 id="hardware-sizing-guidelines">Hardware Sizing Guidelines</h1>
<p>This guide offers general hardware recommendations for DSDB and addresses some frequently asked questions about hardware sizing. The recommendations are only for the <code>tsm1</code> storage engine. Instances still running <a href="/dsdb/administration/upgrading.html#convert-b1-and-bz1-shards-to-tsm1">unconverted</a> <code>b1</code> or <code>bz1</code> shards may have different performance characteristics. See the <a href="/dsdb/guides/hardware_sizing.html">DSDB 0.9 sizing guide</a> for more detail.</p>
<p>Single node:</p>
<ul>
<li><a href="/dsdb/guides/hardware_sizing.html#general-hardware-guidelines-for-a-single-node">General hardware guidelines for a single node</a></li>
<li><a href="/dsdb/guides/hardware_sizing.html#when-do-i-need-more-ram">When do I need more RAM?</a></li>
<li><a href="/dsdb/guides/hardware_sizing.html#what-kind-of-storage-do-i-need">What kind of storage do I need?</a></li>
<li><a href="/dsdb/guides/hardware_sizing.html#how-much-storage-do-i-need">How much storage do I need?</a></li>
<li><a href="/dsdb/guides/hardware_sizing.html#how-should-i-configure-my-hardware">How should I configure my hardware?</a></li>
</ul>
<p>Clustering:</p>
<ul>
<li><a href="/dsdb/guides/hardware_sizing.html#general-hardware-guidelines-for-clusters">General hardware guidelines for clusters</a></li>
<li><a href="/dsdb/guides/hardware_sizing.html#how-should-i-configure-my-hardware-1">How should I configure my hardware?</a></li>
</ul>
<h2 id="general-hardware-guidelines-for-a-single-node">General hardware guidelines for a single node</h2>
<p>We define the load that you'll be placing on DSDB by the number of writes per second, the number of queries per second, and the number of unique <a href="/dsdb/concepts/glossary.html#series">series</a>. Based on your load, we make general CPU, RAM, and IOPS recommendations.</p>
<table>
<thead>
<tr>
<th style="text-align: left;">Load</th>
<th style="text-align: left;">Writes per second</th>
<th style="text-align: left;">Queries per second</th>
<th style="text-align: left;">Unique series</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align: left;"><strong>Low</strong></td>
<td style="text-align: left;">&lt; 5 thousand</td>
<td style="text-align: left;">&lt; 5</td>
<td style="text-align: left;">&lt; 100 thousand</td>
</tr>
<tr>
<td style="text-align: left;"><strong>Moderate</strong></td>
<td style="text-align: left;">&lt; 100 thousand</td>
<td style="text-align: left;">&lt; 25</td>
<td style="text-align: left;">&lt; 1 million</td>
</tr>
<tr>
<td style="text-align: left;"><strong>High</strong></td>
<td style="text-align: left;">&gt; 100 thousand</td>
<td style="text-align: left;">&gt; 25</td>
<td style="text-align: left;">&gt; 1 million</td>
</tr>
<tr>
<td style="text-align: left;"><strong>Probably infeasible</strong></td>
<td style="text-align: left;">&gt; 500 thousand</td>
<td style="text-align: left;">&gt; 100</td>
<td style="text-align: left;">&gt; 10 million</td>
</tr>
</tbody>
</table>
<h4 id="low-load-recommendations">Low load recommendations</h4>
<ul>
<li>CPU: 2-4   </li>
<li>RAM: 2-4 GB   </li>
<li>IOPS: 500   </li>
</ul>
<h4 id="moderate-load-recommendations">Moderate load recommendations</h4>
<ul>
<li>CPU: 4-6  </li>
<li>RAM: 8-32GB  </li>
<li>IOPS: 501.000  </li>
</ul>
<h4 id="high-load-recommendations">High load recommendations</h4>
<ul>
<li>CPU: 8+  </li>
<li>RAM: 32+ GB  </li>
<li>IOPS: 1000+  </li>
</ul>
<h4 id="probably-infeasible-load">Probably infeasible load</h4>
<p>Performance at this scale is a significant challenge and may not be achievable. Please contact us at <a href="mailto:sales@dsdb.com">sales@dsdb.com</a> for assistance with tuning your systems.</p>
<h2 id="when-do-i-need-more-ram">When do I need more RAM?</h2>
<p>In general, having more RAM helps queries return faster. There is no known downside to adding more RAM.</p>
<p>The major component that affects your RAM needs is series cardinality. Series cardinality is the total number of <a href="/dsdb/concepts/glossary.html#series">series</a> in a database. If you have one measurement with two tags, and each tag has 1,000 possible values then the series cardinality is 1 million. A series cardinality around or above 10 million can cause OOM failures even with large amounts of RAM. If this is the case, you can usually address the problem by redesigning your <a href="/dsdb/concepts/glossary.html#schema">schema</a>.</p>
<p>The increase in RAM needs relative to series cardinality is exponential where the exponent is between one and two:</p>
<p><img src="/img/dsdb/series-cardinality.png" alt="Series Cardinality" /></p>
<h2 id="what-kind-of-storage-do-i-need">What kind of storage do I need?</h2>
<p>DSDB is designed to run on SSDs.  Performance is lower on spinning disk drives and may not function properly under increasing loads.</p>
<h2 id="how-much-storage-do-i-need">How much storage do I need?</h2>
<p>Database names, <a href="/dsdb/concepts/glossary.html#measurement">measurements</a>, <a href="/dsdb/concepts/glossary.html#tag-key">tag keys</a>, <a href="/dsdb/concepts/glossary.html#field-key">field keys</a>, and <a href="/dsdb/concepts/glossary.html#tag-value">tag values</a> are stored only once and always as strings. Only <a href="/dsdb/concepts/glossary.html#field-value">field values</a> and <a href="/dsdb/concepts/glossary.html#timestamp">timestamps</a> are stored per-point.</p>
<p>Non-string values require approximately three bytes. String values require variable space as determined by string compression.</p>
<h2 id="how-should-i-configure-my-hardware">How should I configure my hardware?</h2>
<p>When running DSDB in a production environment the <code>wal</code> directory and the <code>data</code> directory should be on separate storage devices. This optimization significantly reduces disk contention when the system is under heavy write load. This is an important consideration if the write load is highly variable. If the write load does not vary by more than 15% the optimization is probably unneeded.</p>
<h2 id="general-hardware-guidelines-for-clusters">General hardware guidelines for clusters</h2>
<p>Minimum hardware requirements:</p>
<ul>
<li>CPU: 2</li>
<li>RAM: 4 GB</li>
<li>IOPS: 1000+</li>
</ul>
<p>When running a cluster every member should have at least two cores.</p>
<p>For better performance, we recommend having 8 GB RAM and 4 CPUs or more.</p>
<h2 id="how-should-i-configure-my-hardware-differently-from-a-single-node-instance">How should I configure my hardware differently from a single-node instance?</h2>
<p>Place the <code>hh</code> directory on a separate storage device from the <code>wal</code> and <code>data</code> directories. This significantly reduces disk contention when the cluster is under heavy write load. For more information on setting up a cluster, see <a href="/dsdb/guides/clustering.html">Clustering setup</a>.</p>
      </div>

              <div class="tract"><img src="/images/tract.png"/></div>
            <div class="clearfix"></div>
      <div class="scroll" id="scroll" style="display:none;">
			     <img src="/images/top.png"/>
		  </div>
    </div>
  </div>
  <script>hljs.initHighlightingOnLoad();</script>
</body>

</html>
