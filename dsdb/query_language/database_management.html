<!DOCTYPE html>
<html lang="zh">

  <head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta name="description" content="大数点物联网开发者平台文档，基于大数点物联网平台，帮助开发者快速构建物联网应用">
    <title>Database Management</title>
    <link rel="icon" href="/images/favicon.ico" type="image/x-icon">
    <link href="/css/bootstrap.min.css" rel="stylesheet">
    <link href="/css/app.css" rel="stylesheet">
    <link href="//cdn.bootcss.com/highlight.js/9.2.0/styles/dark.min.css" rel="stylesheet">
    <script src="/js/jquery.js"></script>
    <script src="/js/bootstrap.min.js"></script>
    <script src="/js/common.js"></script>
    <script src="//cdn.bootcss.com/highlight.js/9.2.0/highlight.min.js"></script>
    <script>
      $(function() {
        // $(".document .side_left ul li a").click(function() {
        //   $(".document .side_left ul li a").removeClass("active");
        //   $(this).addClass("active");
        // })
        $(".menu1>li>a.fold").click(function(){
				  $(".menu1 a.fold").css("background-image","url(/images/number_down.png)");
				  $(".menu2,.menu3").slideUp();
			  })
			  $(".menu2>li>a.fold").click(function(){
          $(".menu2 a.fold").css("background-image","url(/images/number_down.png)");
          $(".menu3").slideUp();
        })
        $(".fold").click(function() {
          if ($(this).next("ul").is(":hidden")) {
            $(this).css("background-image", "url(/images/number_up.png)");
            $(this).next("ul").slideDown();
          } else {
            $(this).css("background-image", "url(/images/number_down.png)");
            $(this).next("ul").slideUp();
          }
        })
      })
      $(function(){
			  $(".side_right").scroll( function() { 
				  var scrollValue=$(".side_right").scrollTop();
				  scrollValue > 100 ? $('div[class=scroll]').fadeIn():$('div[class=scroll]').fadeOut();
			  });	
			  $('#scroll').click(function(){
				  $(".side_right").animate({scrollTop:0},200);	
			  });	
		  })
    </script>
    <link href='http://fonts.useso.com/css?family=Open+Sans:300|Source+Code+Pro:400' rel='stylesheet' type='text/css'>
  </head>

  <body>
    <nav class="navbar navbar-default">
      <div class="container-fluid">
        <div class="navbar-header">
          <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#bs-example-navbar-collapse-1" aria-expanded="false">
            <span class="sr-only">Toggle navigation</span>
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
          </button>
          <a class="navbar-brand" href="/"><img src="/images/logo.png"/></a>
        </div>

        <div class="collapse navbar-collapse" id="bs-example-navbar-collapse-1">
          <ul class="nav navbar-nav navbar-right">
            <li><a href="http://dasudian.com/solution" >解决方案</a></li>
            <li><a href="/" >文档</a></li>
            <li><a href="http://dasudian.com/price" >定价</a></li>
            <li><a href="https://www.github.com/Dasudian"  target="_blank" >社区</a></li>
          </ul>
        </div>
      </div>
    </nav>

    <div class="container-fluid0 document">
      <div class="side_left">
        <ul class="menu1">
          <li><a class="fold">服务集成指南</a>
            <ul class="menu2" >
              <li><a id="srvintegrate-index" class="" href="/integration-dev/index.html">服务集成</a></li>
              <li><a class="fold">IM即时消息服务</a>
                <ul class="menu3" >
                  <li><a id="srvintegrate-im-android" class="" href="/integration-dev/im/integrate-im-android.html">Android上集成IM功能</a></li>
                  <li><a id="srvintegrate-im-ios" class="" href="/integration-dev/im/integrate-im-ios.html">iOS上集成IM功能</a></li>
                </ul>
              </li>
            </ul>
          </li>
          <li><a class="fold">DS Database</a>
            <ul class="menu2" style="display: block;">
              <li><a id="dsdb-overview" class="" href="/dsdb/index.html">DSDB Overview</a></li>
              <li><a class="fold">Introduction</a>
                <ul class="menu3" >
                  <li><a id="dsdb-intro-overview" class="" href="/dsdb/introduction/index.html">Overview</a></li>
                  <li><a id="dsdb-intro-installation" class="" href="/dsdb/introduction/installation.html">Installation</a></li>
                  <li><a id="dsdb-intro-start" class="" href="/dsdb/introduction/getting_started.html">Getting Started</a></li>
                </ul>
              </li>
              <li><a class="fold">Administration</a>
                <ul class="menu3" >
                  <li><a id="dsdb-admin-overview" class="" href="/dsdb/administration/index.html">administration Overview</a></li>
                  <li><a id="dsdb-authent&amp;authori" class="" href="/dsdb/administration/authentication_and_authorization.html">Authentication&Authorization</a></li>
                  <li><a id="dsdb-backup&amp;restore" class="" href="/dsdb/administration/backup_and_restore.html">Backup&Restore</a></li>
                  <li><a id="dsdb-configuration" class="" href="/dsdb/administration/config.html">Configuration</a></li>
                  <li><a id="dsdb-logs" class="" href="/dsdb/administration/logs.html">Logs</a></li>
                  <li><a id="dsdb-monitoring" class="" href="/dsdb/administration/statistics.html">Server Monitoring</a></li>
                  <li><a id="dsdb-upgrade" class="" href="/dsdb/administration/upgrading.html">Upgrading</a></li>
                </ul>
              </li>
              <li><a class="fold">Clients</a>
                <ul class="menu3" >
                  <li><a id="dsdb-clients-overview" class="" href="/dsdb/clients/index.html">Clients Overview</a></li>
                  <li><a id="dsdb-clients-httpapi" class="" href="/dsdb/clients/api.html">HTTP API</a></li>
                </ul>
              </li>
              <li><a class="fold">Concepts</a>
                <ul class="menu3" >
                  <li><a id="dsdb-concepts-overview" class="" href="/dsdb/concepts/index.html">Concepts Overview</a></li>
                  <li><a id="dsdb-key-concepts" class="" href="/dsdb/concepts/key_concepts.html">Key Concepts</a></li>
                  <li><a id="dsdb-concepts-arch" class="" href="/dsdb/concepts/how_dsdb_works.html">Architecture</a></li>
                  <li><a id="dsdb-concepts-schema-data-layout" class="" href="/dsdb/concepts/schema_and_data_layout.html">Scheam Design</a></li>
                  <li><a id="dsdb-concepts-insights-tradeoffs" class="" href="/dsdb/concepts/insights_tradeoffs.html">Insights Tradeoffs</a></li>
                  <li><a id="dsdb-concepts-api-endpoints" class="" href="/dsdb/concepts/api.html">API Endpoints&Ports</a></li>
                  <li><a id="dsdb-concepts-storage-engine" class="" href="/dsdb/concepts/storage_engine.html">Storage Engine</a></li>
                  <li><a id="dsdb-concepts-glossary" class="" href="/dsdb/concepts/glossary.html">Glossary of Terms</a></li>
                  <li><a id="dsdb-concepts-vs-sql" class="" href="/dsdb/concepts/crosswalk.html">Comparison to SQL</a></li>
                </ul>
              </li>
              <li><a class="fold">Data Sources</a>
                <ul class="menu3" >
                  <li><a id="dsdb-datasource-diamond" class="" href="/dsdb/data_sources/diamond.html">Diamond</a></li>
                  <li><a id="dsdb-datasource-opentsdb" class="" href="/dsdb/data_sources/opentsdb.html">OpenTSDB</a></li>
                  <li><a id="dsdb-datasource-carbon" class="" href="/dsdb/data_sources/carbon.html">Carbon</a></li>
                  <li><a id="dsdb-datasource-collectd" class="" href="/dsdb/data_sources/collectd.html">Collectd</a></li>
                </ul>
              </li>
              <li><a class="fold">Guides</a>
                <ul class="menu3" >
                  <li><a id="dsdb-guides-clustering" class="" href="/dsdb/guides/clustering.html">Clustering</a></li>
                  <li><a id="dsdb-guides-ddr" class="" href="/dsdb/guides/downsampling_and_retention.html">Downsampling and Data Retention</a></li>
                  <li><a id="dsdb-guides-hsg" class="" href="/dsdb/guides/hardware_sizing.html">Hardware Sizing Guidelines</a></li>
                  <li><a id="dsdb-guides-querying" class="" href="/dsdb/guides/querying_data.html">Querying Data</a></li>
                  <li><a id="dsdb-guides-writing" class="" href="/dsdb/guides/writing_data.html">Writing Data</a></li>
                </ul>
              </li>
              <li><a class="fold">Query Language</a>
                <ul class="menu3" style="display: block;">
                  <li><a id="dsdb-querylang-overview" class="" href="/dsdb/query_language/index.html">Overview</a></li>
                  <li><a id="dsdb-querylang-dataexp" class="" href="/dsdb/query_language/data_exploration.html">Data Exploration</a></li>
                  <li><a id="dsdb-querylang-scheamexp" class="" href="/dsdb/query_language/schema_exploration.html">Schema Exploration</a></li>
                  <li><a id="dsdb-querylang-func" class="" href="/dsdb/query_language/functions.html">Functions</a></li>
                  <li><a id="dsdb-querylang-contq" class="" href="/dsdb/query_language/continuous_queries.html">Continuous Queries</a></li>
                  <li><a id="dsdb-querylang-spec" class="" href="/dsdb/query_language/spec.html">Query Language Reference</a></li>
                  <li><a id="dsdb-querylang-mgmt" class="active" href="/dsdb/query_language/database_management.html">Database Management</a></li>
                  <li><a id="dsdb-querylang-math" class="" href="/dsdb/query_language/math_operators.html">Mathematical Operators</a></li>
                </ul>
              </li>
              <li><a class="fold">Sample Data</a>
                <ul class="menu3" >
                  <li><a id="dsdb-sampledata-down" class="" href="/dsdb/sample_data/data_download.html">Sample Data Download</a></li>
                </ul>
              </li>
              <li><a class="fold">Tools</a>
                <ul class="menu3" >
                  <li><a id="dsdb-tools-overview" class="" href="/dsdb/tools/index.html">Tools Overview</a></li>
                  <li><a id="dsdb-tools-shell" class="" href="/dsdb/tools/shell.html">CLI/Shell</a></li>
                  <li><a id="dsdb-tools-webadmin" class="" href="/dsdb/tools/web_admin.html">Web Admin Interface</a></li>
                  <li><a id="dsdb-tools-grafana" class="" href="/dsdb/tools/grafana.html">Grafana Dashboards</a></li>
                  <li><a id="dsdb-tools-telegraf" class="" href="/dsdb/tools/telegraf.html">Telegraf Metrics Collection</a></li>
                  <li><a id="dsdb-tools-chronograf" class="" href="/dsdb/tools/chronograf.html">Chronograf Dashboards</a></li>
                  <li><a id="dsdb-tools-kapacitor" class="" href="/dsdb/tools/kapacitor.html">Kapacitor Monitoring</a></li>
                </ul>
              </li>
              <li><a class="fold">Write Protocols</a>
                <ul class="menu3" >
                  <li><a id="dsdb-writepro-overview" class="" href="/dsdb/write_protocols/index.html">Overview</a></li>
                  <li><a id="dsdb-writepro-line" class="" href="/dsdb/write_protocols/line.html">Line Protocol</a></li>
                  <li><a id="dsdb-writepro-syntax" class="" href="/dsdb/write_protocols/write_syntax.html">Write Syntax</a></li>
                  <li><a id="dsdb-writepro-json" class="" href="/dsdb/write_protocols/json.html">JSON Protocol</a></li>
                  <li><a id="dsdb-writepro-udp" class="" href="/dsdb/write_protocols/udp.html">Service - UDP</a></li>
                  <li><a id="dsdb-writepro-graphite" class="" href="/dsdb/write_protocols/graphite.html">Service - Graphite</a></li>
                  <li><a id="dsdb-writepro-opentsdb" class="" href="/dsdb/write_protocols/opentsdb.html">Servcie - OpenTSDB</a></li>
                  <li><a id="dsdb-writepro-collectd" class="" href="/dsdb/write_protocols/collectd.html">Service - CollectD</a></li>
                </ul>
              </li>
              <li><a class="fold">Troubleshooting</a>
                <ul class="menu3" >
                  <li><a id="dsdb-troubleshoot-overview" class="" href="/dsdb/troubleshooting/index.html">Troubleshooting Overview</a></li>
                  <li><a id="dsdb-troubleshoot-fei" class="" href="/dsdb/troubleshooting/frequently_encountered_issues.html">Frequently Encountered Issues</a></li>
                  <li><a id="dsdb-troubleshoot-monitor" class="" href="/dsdb/troubleshooting/system_monitoring.html">System Monitoring</a></li>
                </ul>
              </li>
            </ul>
          </li>
          <li><a class="fold">DSD API Container(DAC)</a>
            <ul class="menu2" >
              <li><a id="dac-principal" class="" href="/dac/index.html">DAC介绍</a></li>
              <li><a id="dac-java-api" class="" href="/dac/dac_cloud_api_java.html">DAC Java API</a></li>
              <li><a id="dac-c-api" class="" href="/dac/dac_cloud_api_c.html">DAC C API</a></li>
              <li><a id="dac-cpp-api" class="" href="/dac/dac_cloud_api_cpp.html">DAC C++ API</a></li>
            </ul>
          </li>
          <li><a class="fold">Data Hub</a>
            <ul class="menu2" >
              <li><a id="datahub-index" class="" href="/data-hub/index.html">Data Hub Overview</a></li>
              <li><a class="fold">SDK</a>
                <ul class="menu3" >
                  <li><a id="datahub-sdk-js" class="" href="/data-hub/sdk/javascript.html">JavaScript</a></li>
                  <li><a id="datahub-sdk-embededc" class="" href="/data-hub/sdk/embeded_c.html">Embeded C</a></li>
                </ul>
              </li>
            </ul>
          </li>
        </ul>
    </div>

    <div class="side_right">
      <div class="doc">
        <h1 id="database-management">Database Management</h1>
<p>DSDBQL offers a full suite of administrative commands.</p>
<ul>
<li>
<p><a href="/dsdb/query_language/database_management.html#data-management">Data management</a><br />
&nbsp;&nbsp;&nbsp;◦&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a href="/dsdb/query_language/database_management.html#create-a-database-with-create-database">Create a database with <code>CREATE DATABASE</code></a><br />
&nbsp;&nbsp;&nbsp;◦&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a href="/dsdb/query_language/database_management.html#delete-a-database-with-drop-database">Delete a database with <code>DROP DATABASE</code></a><br />
&nbsp;&nbsp;&nbsp;◦&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a href="/dsdb/query_language/database_management.html#delete-series-with-drop-series">Delete series with <code>DROP SERIES</code></a><br />
&nbsp;&nbsp;&nbsp;◦&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a href="/dsdb/query_language/database_management.html#delete-measurements-with-drop-measurement">Delete measurements with <code>DROP MEASUREMENT</code></a>  </p>
</li>
<li><a href="/dsdb/query_language/database_management.html#retention-policy-management">Retention policy management</a><br />
&nbsp;&nbsp;&nbsp;◦&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a href="/dsdb/query_language/database_management.html#create-retention-policies-with-create-retention-policy">Create retention policies with <code>CREATE RETENTION POLICY</code></a><br />
&nbsp;&nbsp;&nbsp;◦&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a href="/dsdb/query_language/database_management.html#modify-retention-policies-with-alter-retention-policy">Modify retention policies with <code>ALTER RETENTION POLICY</code></a><br />
&nbsp;&nbsp;&nbsp;◦&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a href="/dsdb/query_language/database_management.html#delete-retention-policies-with-drop-retention-policy">Delete retention policies with <code>DROP RETENTION POLICY</code></a>  </li>
</ul>
<p>If you're looking for <code>SHOW</code> queries (for example, <code>SHOW DATABASES</code> or <code>SHOW RETENTION POLICIES</code>), see <a href="/dsdb/query_language/schema_exploration">Schema Exploration</a>.</p>
<p>The examples in the sections below use DSDB's <a href="/dsdb/introduction/getting_started.html">Command Line Interface (CLI)</a>.
You can also execute the commands using the HTTP API; simply  send a <code>GET</code> request to the <code>/query</code> endpoint and include the command in the URL parameter <code>q</code>.
See the <a href="/dsdb/guides/querying_data.html">Querying Data</a> guide for more on using the HTTP API.</p>
<blockquote>
<p><strong>Note:</strong> When authentication is enabled, only admin users can execute most of the commands listed on this page.
See the documentation on <a href="/dsdb/administration/authentication_and_authorization.html">authentication and authorization</a> for more information.</p>
</blockquote>
<h2 id="data-management">Data Management</h2>
<h3 id="create-a-database-with-create-database">Create a database with CREATE DATABASE</h3>
<hr />
<p>The <code>CREATE DATABASE</code> query takes the following form:</p>
<pre><code class="language-sql">CREATE DATABASE [IF NOT EXISTS] &lt;database_name&gt; [WITH [DURATION &lt;duration&gt;] [REPLICATION &lt;n&gt;] [NAME &lt;retention-policy-name&gt;]]</code></pre>
<p>Create the database <code>NOAA_water_database</code>:</p>
<pre><code class="language-sh">&gt; CREATE DATABASE NOAA_water_database
&gt;</code></pre>
<p>Create the database <code>NOAA_water_database</code> only if it doesn't exist:</p>
<pre><code class="language-sh">&gt; CREATE DATABASE IF NOT EXISTS NOAA_water_database
&gt;</code></pre>
<p>Create the database <code>NOAA_water_database</code> with a new retention policy called <code>liquid</code>:</p>
<pre><code class="language-sh">&gt; CREATE DATABASE NOAA_water_database WITH DURATION 3d REPLICATION 3 NAME liquid
&gt;</code></pre>
<p>When specifying a retention policy you can include one or more of the attributes <code>DURATION</code>, <code>REPLICATION</code>, and <code>NAME</code>.
For more on retention policies, see <a href="/dsdb/query_language/database_management.html#retention-policy-management">Retention Policy Management</a></p>
<p>A successful <code>CREATE DATABASE</code> query returns an empty result.</p>
<h3 id="delete-a-database-with-drop-database">Delete a database with DROP DATABASE</h3>
<hr />
<p>The <code>DROP DATABASE</code> query deletes all of the data, measurements, series, continuous queries, and retention policies from the specified database.
The query takes the following form:</p>
<pre><code class="language-sql">DROP DATABASE [IF EXISTS] &lt;database_name&gt;</code></pre>
<p>Drop the database NOAA_water_database:</p>
<pre><code class="language-sh">&gt; DROP DATABASE NOAA_water_database
&gt;</code></pre>
<p>Drop the database NOAA_water_database only if it exists:</p>
<pre><code class="language-sh">&gt; DROP DATABASE IF EXISTS NOAA_water_database
&gt;</code></pre>
<p>A successful <code>DROP DATABASE</code> query returns an empty result.</p>
<h3 id="delete-series-with-drop-series">Delete series with DROP SERIES</h3>
<hr />
<p>The <code>DROP SERIES</code> query deletes all points from <a href="/dsdb/concepts/glossary.html#series">series</a> in a database.
The query takes the following form, where you must specify either the <code>FROM</code> clause or the <code>WHERE</code> clause:</p>
<pre><code class="language-sql">DROP SERIES FROM &lt;measurement_name[,measurement_name]&gt; WHERE &lt;tag_key&gt;='&lt;tag_value&gt;'</code></pre>
<p>Delete all series from a single measurement:</p>
<pre><code class="language-sql">&gt; DROP SERIES FROM h2o_feet</code></pre>
<p>Delete series that have a specific tag set from a single measurement:</p>
<pre><code class="language-sql">&gt; DROP SERIES FROM h2o_feet WHERE location = 'santa_monica'</code></pre>
<p>Delete all points in the series that have a specific tag set from all measurements in the database:</p>
<pre><code class="language-sql">&gt; DROP SERIES WHERE location = 'santa_monica'</code></pre>
<p>A successful <code>DROP SERIES</code> query returns an empty result.</p>
<dt> `DROP SERIES` does not support time intervals in the `WHERE` clause.
See GitHub Issue [#1647](https://github.com/dsdb/dsdb/issues/1647) for more information).
</dt>
<h3 id="delete-measurements-with-drop-measurement">Delete measurements with DROP MEASUREMENT</h3>
<hr />
<p>The <code>DROP MEASUREMENT</code> query deletes all data and series from the specified <a href="/dsdb/concepts/glossary.html#measurement">measurement</a> and, unlike <code>DROP SERIES</code>, it also deletes the measurement from the index.
The query takes the following form:</p>
<pre><code class="language-sql">DROP MEASUREMENT &lt;measurement_name&gt;</code></pre>
<p>Delete the measurement <code>h2o_feet</code>:</p>
<pre><code class="language-sql">&gt; DROP MEASUREMENT h2o_feet</code></pre>
<blockquote>
<p><strong>Note:</strong> <code>DROP MEASUREMENT</code> drops all data and series in the measurement.
It does not drop the associated continuous queries.</p>
</blockquote>
<p>A successful <code>DROP MEASUREMENT</code> query returns an empty result.</p>
<dt> Currently, DSDB does not support regular expressions with `DROP MEASUREMENTS`.
See GitHub Issue [#4275](https://github.com/dsdb/dsdb/issues/4275) for more information.
</dt>
<h2 id="retention-policy-management">Retention Policy Management</h2>
<p>The following sections cover how to create, alter, and delete retention policies.
Note that when you create a database, DSDB automatically creates a retention policy named <code>default</code> which has infinite retention.
You may disable that auto-creation in the configuration file.</p>
<h3 id="create-retention-policies-with-create-retention-policy">Create retention policies with CREATE RETENTION POLICY</h3>
<hr />
<p>The <code>CREATE RETENTION POLICY</code> query takes the following form, where <code>DEFAULT</code> is optional:</p>
<pre><code class="language-sql">CREATE RETENTION POLICY &lt;retention_policy_name&gt; ON &lt;database_name&gt; DURATION &lt;duration&gt; REPLICATION &lt;n&gt; [DEFAULT]</code></pre>
<ul>
<li>
<p><code>DURATION</code> determines how long DSDB keeps the data - the options for specifying the duration of the retention policy are listed below.
Note that the minimum retention period is one hour.
<code>m</code> minutes<br />
<code>h</code> hours<br />
<code>d</code> days<br />
<code>w</code> weeks<br />
<code>INF</code> infinite</p>
<dt> Currently, the `DURATION` attribute supports only single units.
For example, you cannot express the duration `7230m` as `120h 30m`.
See GitHub Issue [#3634](https://github.com/dsdb/dsdb/issues/3634) for more information.
</dt>
</li>
<li>
<p><code>REPLICATION</code> determines how many independent copies of each point are stored in the cluster, where <code>n</code> is the number of data nodes.</p>
</li>
<li><code>DEFAULT</code> sets the new retention policy as the default retention policy for the database.</li>
</ul>
<p>Create a retention policy called <code>one_day_only</code> for the database <code>NOAA_water_database</code> with a one day duration and a replication factor of one:</p>
<pre><code class="language-sql">&gt; CREATE RETENTION POLICY one_day_only ON NOAA_water_database DURATION 1d REPLICATION 1
&gt;</code></pre>
<p>Create the same retention policy as the one in the example above, but set it as the default retention policy for the database.</p>
<pre><code class="language-sql">&gt; CREATE RETENTION POLICY one_day_only ON NOAA_water_database DURATION 1d REPLICATION 1 DEFAULT
&gt;</code></pre>
<p>A successful <code>CREATE RETENTION POLICY</code> query returns an empty response.</p>
<blockquote>
<p><strong>Note:</strong> You can also specify a new retention policy in the <code>CREATE DATABASE</code> query.
See <a href="/dsdb/query_language/database_management.html#create-a-database-with-create-database">Create a database with CREATE DATABASE</a>.</p>
</blockquote>
<h3 id="modify-retention-policies-with-alter-retention-policy">Modify retention policies with ALTER RETENTION POLICY</h3>
<hr />
<p>The <code>ALTER RETENTION POLICY</code> query takes the following form, where you must declare at least one of the retention policy attributes <code>DURATION</code>, <code>REPLICATION</code>, or <code>DEFAULT</code>:</p>
<pre><code class="language-sql">ALTER RETENTION POLICY &lt;retention_policy_name&gt; ON &lt;database_name&gt; DURATION &lt;duration&gt; REPLICATION &lt;n&gt; [DEFAULT]</code></pre>
<p>First, create the retention policy <code>what_is_time</code> with a <code>DURATION</code> of two days:</p>
<pre><code class="language-sql">&gt; CREATE RETENTION POLICY what_is_time ON NOAA_water_database DURATION 2d REPLICATION 1
&gt;</code></pre>
<p>Modify <code>what_is_time</code> to have a three week <code>DURATION</code> and make it the <code>DEFAULT</code> retention policy for <code>NOAA_water_database</code>.</p>
<pre><code class="language-sql">&gt; ALTER RETENTION POLICY what_is_time ON NOAA_water_database DURATION 3w DEFAULT
&gt;</code></pre>
<p>In the last example, <code>what_is_time</code> retains its original replication factor of 1.</p>
<p>A successful <code>ALTER RETENTION POLICY</code> query returns an empty result.</p>
<h3 id="delete-retention-policies-with-drop-retention-policy">Delete retention policies with DROP RETENTION POLICY</h3>
<p>Delete all measurements and data in a specific retention policy with:</p>
<pre><code class="language-sql">DROP RETENTION POLICY &lt;retention_policy_name&gt; ON &lt;database_name&gt;</code></pre>
<p>Delete the retention policy <code>what_is_time</code> in the <code>NOAA_water_database</code> database:  </p>
<pre><code class="language-sh">&gt; DROP RETENTION POLICY what_is_time ON NOAA_water_database
&gt;</code></pre>
<p>A successful <code>DROP RETENTION POLICY</code> query returns an empty result.</p>
<blockquote>
<p><strong>Note:</strong> If you attempt <code>DROP</code> a retention policy that is the default retention policy for the database DSDB does not delete the policy and returns the error: <code>ERR: retention policy is default</code>.
<code>CREATE</code> a new default policy or <code>ALTER</code> an already existing policy to be the default before deleting the retention policy.</p>
</blockquote>
      </div>

              <div class="tract"><img src="/images/tract.png"/></div>
            <div class="clearfix"></div>
      <div class="scroll" id="scroll" style="display:none;">
			     <img src="/images/top.png"/>
		  </div>
    </div>
  </div>
  <script>hljs.initHighlightingOnLoad();</script>
</body>

</html>
