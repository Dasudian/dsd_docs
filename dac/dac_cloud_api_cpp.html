<!DOCTYPE html>
<html lang="zh">

  <head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta name="description" content="大数点物联网开发者平台文档，基于大数点物联网平台，帮助开发者快速构建物联网应用">
    <title>DAC C++ API</title>
    <link rel="icon" href="/images/favicon.ico" type="image/x-icon">
    <link href="/css/bootstrap.min.css" rel="stylesheet">
    <link href="/css/app.css" rel="stylesheet">
    <link href="/css/doc.css" rel="stylesheet">
    <link href="//cdn.bootcss.com/highlight.js/9.2.0/styles/dark.min.css" rel="stylesheet">
    <script src="/js/jquery.js"></script>
    <script src="/js/bootstrap.min.js"></script>
    <script src="/js/common.js"></script>
    <script src="//cdn.bootcss.com/highlight.js/9.2.0/highlight.min.js"></script>
    <script>
      $(function() {
        // $(".document .side_left ul li a").click(function() {
        //   $(".document .side_left ul li a").removeClass("active");
        //   $(this).addClass("active");
        // })
        $(".menu1>li>a.fold").click(function(){
				  $(".menu1 a.fold").css("background-image","url(/images/number_down.png)");
				  $(".menu2,.menu3").slideUp();
			  })
			  $(".menu2>li>a.fold").click(function(){
          $(".menu2 a.fold").css("background-image","url(/images/number_down.png)");
          $(".menu3").slideUp();
        })
        $(".fold").click(function() {
          if ($(this).next("ul").is(":hidden")) {
            $(this).css("background-image", "url(/images/number_up.png)");
            $(this).next("ul").slideDown();
          } else {
            $(this).css("background-image", "url(/images/number_down.png)");
            $(this).next("ul").slideUp();
          }
        })
      })
      $(function(){
			  $(".side_right").scroll( function() { 
				  var scrollValue=$(".side_right").scrollTop();
				  scrollValue > 100 ? $('div[class=scroll]').fadeIn():$('div[class=scroll]').fadeOut();
			  });	
			  $('#scroll').click(function(){
				  $(".side_right").animate({scrollTop:0},200);	
			  });	
		  })
    </script>
    <link href='//fonts.useso.com/css?family=Open+Sans:300|Source+Code+Pro:400' rel='stylesheet' type='text/css'>
  </head>

  <body>
    <nav class="navbar navbar-default">
      <div class="container-fluid">
        <div class="navbar-header">
          <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#bs-example-navbar-collapse-1" aria-expanded="false">
            <span class="sr-only">Toggle navigation</span>
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
          </button>
          <a class="navbar-brand" href="https://dev.dasudian.com"><img src="/images/logo.png"/></a>
        </div>

        <div class="collapse navbar-collapse" id="bs-example-navbar-collapse-1">
          <ul class="nav navbar-nav navbar-right">
            <li><a href="http://dasudian.com/datahub" >IoT Data Hub</a></li>
            <li><a href="http://dasudian.com/product_service" >产品服务</a></li>
            <li><a href="/" >文档</a></li>
            <li><a href="http://dasudian.com/price" >定价</a></li>
            <li><a href="https://www.github.com/Dasudian"  target="_blank" >社区</a></li>
            <li><a href="https://dev.dasudian.com/login/view" class="btn-small">登录</a></li>
            <li><a href="https://dev.dasudian.com/sign_up/view" class="btn-small">注册</a></li>
          </ul>
        </div>
      </div>
    </nav>

    <div class="container-fluid0 document">
      <div class="side_left">
        <ul class="menu1">
          <li><a class="fold">服务集成指南</a>
            <ul class="menu2" >
              <li><a id="srvintegrate-index" class="" href="/integration-dev/index.html">服务集成</a></li>
              <li><a class="fold">IM即时消息服务</a>
                <ul class="menu3" >
                  <li><a id="srvintegrate-im-android" class="" href="/integration-dev/im/integrate-im-android.html">Android上集成IM功能</a></li>
                  <li><a id="srvintegrate-im-ios" class="" href="/integration-dev/im/integrate-im-ios.html">iOS上集成IM功能</a></li>
                </ul>
              </li>
            </ul>
          </li>
          <li><a class="fold">DS Database</a>
            <ul class="menu2" >
              <li><a id="dsdb-overview" class="" href="/dsdb/index.html">DSDB Overview</a></li>
              <li><a class="fold">Introduction</a>
                <ul class="menu3" >
                  <li><a id="dsdb-intro-overview" class="" href="/dsdb/introduction/index.html">Overview</a></li>
                  <li><a id="dsdb-intro-installation" class="" href="/dsdb/introduction/installation.html">Installation</a></li>
                  <li><a id="dsdb-intro-start" class="" href="/dsdb/introduction/getting_started.html">Getting Started</a></li>
                </ul>
              </li>
              <li><a class="fold">Administration</a>
                <ul class="menu3" >
                  <li><a id="dsdb-admin-overview" class="" href="/dsdb/administration/index.html">administration Overview</a></li>
                  <li><a id="dsdb-authent&amp;authori" class="" href="/dsdb/administration/authentication_and_authorization.html">Authentication&Authorization</a></li>
                  <li><a id="dsdb-backup&amp;restore" class="" href="/dsdb/administration/backup_and_restore.html">Backup&Restore</a></li>
                  <li><a id="dsdb-configuration" class="" href="/dsdb/administration/config.html">Configuration</a></li>
                  <li><a id="dsdb-logs" class="" href="/dsdb/administration/logs.html">Logs</a></li>
                  <li><a id="dsdb-monitoring" class="" href="/dsdb/administration/statistics.html">Server Monitoring</a></li>
                  <li><a id="dsdb-upgrade" class="" href="/dsdb/administration/upgrading.html">Upgrading</a></li>
                </ul>
              </li>
              <li><a class="fold">Clients</a>
                <ul class="menu3" >
                  <li><a id="dsdb-clients-overview" class="" href="/dsdb/clients/index.html">Clients Overview</a></li>
                  <li><a id="dsdb-clients-httpapi" class="" href="/dsdb/clients/api.html">HTTP API</a></li>
                </ul>
              </li>
              <li><a class="fold">Concepts</a>
                <ul class="menu3" >
                  <li><a id="dsdb-concepts-overview" class="" href="/dsdb/concepts/index.html">Concepts Overview</a></li>
                  <li><a id="dsdb-key-concepts" class="" href="/dsdb/concepts/key_concepts.html">Key Concepts</a></li>
                  <li><a id="dsdb-concepts-arch" class="" href="/dsdb/concepts/how_dsdb_works.html">Architecture</a></li>
                  <li><a id="dsdb-concepts-schema-data-layout" class="" href="/dsdb/concepts/schema_and_data_layout.html">Scheam Design</a></li>
                  <li><a id="dsdb-concepts-insights-tradeoffs" class="" href="/dsdb/concepts/insights_tradeoffs.html">Insights Tradeoffs</a></li>
                  <li><a id="dsdb-concepts-api-endpoints" class="" href="/dsdb/concepts/api.html">API Endpoints&Ports</a></li>
                  <li><a id="dsdb-concepts-storage-engine" class="" href="/dsdb/concepts/storage_engine.html">Storage Engine</a></li>
                  <li><a id="dsdb-concepts-glossary" class="" href="/dsdb/concepts/glossary.html">Glossary of Terms</a></li>
                  <li><a id="dsdb-concepts-vs-sql" class="" href="/dsdb/concepts/crosswalk.html">Comparison to SQL</a></li>
                </ul>
              </li>
              <li><a class="fold">Data Sources</a>
                <ul class="menu3" >
                  <li><a id="dsdb-datasource-diamond" class="" href="/dsdb/data_sources/diamond.html">Diamond</a></li>
                  <li><a id="dsdb-datasource-opentsdb" class="" href="/dsdb/data_sources/opentsdb.html">OpenTSDB</a></li>
                </ul>
              </li>
              <li><a class="fold">Guides</a>
                <ul class="menu3" >
                  <li><a id="dsdb-guides-clustering" class="" href="/dsdb/guides/clustering.html">Clustering</a></li>
                  <li><a id="dsdb-guides-ddr" class="" href="/dsdb/guides/downsampling_and_retention.html">Downsampling and Data Retention</a></li>
                  <li><a id="dsdb-guides-hsg" class="" href="/dsdb/guides/hardware_sizing.html">Hardware Sizing Guidelines</a></li>
                  <li><a id="dsdb-guides-querying" class="" href="/dsdb/guides/querying_data.html">Querying Data</a></li>
                  <li><a id="dsdb-guides-writing" class="" href="/dsdb/guides/writing_data.html">Writing Data</a></li>
                </ul>
              </li>
              <li><a class="fold">Query Language</a>
                <ul class="menu3" >
                  <li><a id="dsdb-querylang-overview" class="" href="/dsdb/query_language/index.html">Overview</a></li>
                  <li><a id="dsdb-querylang-dataexp" class="" href="/dsdb/query_language/data_exploration.html">Data Exploration</a></li>
                  <li><a id="dsdb-querylang-scheamexp" class="" href="/dsdb/query_language/schema_exploration.html">Schema Exploration</a></li>
                  <li><a id="dsdb-querylang-func" class="" href="/dsdb/query_language/functions.html">Functions</a></li>
                  <li><a id="dsdb-querylang-contq" class="" href="/dsdb/query_language/continuous_queries.html">Continuous Queries</a></li>
                  <li><a id="dsdb-querylang-spec" class="" href="/dsdb/query_language/spec.html">Query Language Reference</a></li>
                  <li><a id="dsdb-querylang-mgmt" class="" href="/dsdb/query_language/database_management.html">Database Management</a></li>
                  <li><a id="dsdb-querylang-math" class="" href="/dsdb/query_language/math_operators.html">Mathematical Operators</a></li>
                </ul>
              </li>
              <li><a class="fold">Sample Data</a>
                <ul class="menu3" >
                  <li><a id="dsdb-sampledata-down" class="" href="/dsdb/sample_data/data_download.html">Sample Data Download</a></li>
                </ul>
              </li>
              <li><a class="fold">Tools</a>
                <ul class="menu3" >
                  <li><a id="dsdb-tools-overview" class="" href="/dsdb/tools/index.html">Tools Overview</a></li>
                  <li><a id="dsdb-tools-shell" class="" href="/dsdb/tools/shell.html">CLI/Shell</a></li>
                  <li><a id="dsdb-tools-webadmin" class="" href="/dsdb/tools/web_admin.html">Web Admin Interface</a></li>
                </ul>
              </li>
              <li><a class="fold">Write Protocols</a>
                <ul class="menu3" >
                  <li><a id="dsdb-writepro-overview" class="" href="/dsdb/write_protocols/index.html">Overview</a></li>
                  <li><a id="dsdb-writepro-line" class="" href="/dsdb/write_protocols/line.html">Line Protocol</a></li>
                  <li><a id="dsdb-writepro-syntax" class="" href="/dsdb/write_protocols/write_syntax.html">Write Syntax</a></li>
                  <li><a id="dsdb-writepro-json" class="" href="/dsdb/write_protocols/json.html">JSON Protocol</a></li>
                  <li><a id="dsdb-writepro-udp" class="" href="/dsdb/write_protocols/udp.html">Service - UDP</a></li>
                  <li><a id="dsdb-writepro-graphite" class="" href="/dsdb/write_protocols/graphite.html">Service - Graphite</a></li>
                  <li><a id="dsdb-writepro-opentsdb" class="" href="/dsdb/write_protocols/opentsdb.html">Servcie - OpenTSDB</a></li>
                  <li><a id="dsdb-writepro-collectd" class="" href="/dsdb/write_protocols/collectd.html">Service - CollectD</a></li>
                </ul>
              </li>
              <li><a class="fold">Troubleshooting</a>
                <ul class="menu3" >
                  <li><a id="dsdb-troubleshoot-overview" class="" href="/dsdb/troubleshooting/index.html">Troubleshooting Overview</a></li>
                  <li><a id="dsdb-troubleshoot-fei" class="" href="/dsdb/troubleshooting/frequently_encountered_issues.html">Frequently Encountered Issues</a></li>
                  <li><a id="dsdb-troubleshoot-monitor" class="" href="/dsdb/troubleshooting/system_monitoring.html">System Monitoring</a></li>
                </ul>
              </li>
            </ul>
          </li>
          <li><a class="fold">DSD API Container(DAC)</a>
            <ul class="menu2" style="display: block;">
              <li><a id="dac-principal" class="" href="/dac/index.html">DAC介绍</a></li>
              <li><a id="dac-java-api" class="" href="/dac/dac_cloud_api_java.html">DAC Java API</a></li>
              <li><a id="dac-c-api" class="" href="/dac/dac_cloud_api_c.html">DAC C API</a></li>
              <li><a id="dac-cpp-api" class="active" href="/dac/dac_cloud_api_cpp.html">DAC C++ API</a></li>
            </ul>
          </li>
          <li><a class="fold">Data Hub</a>
            <ul class="menu2" >
              <li><a id="datahub-index" class="" href="/datahub/index.html">Data Hub Overview</a></li>
              <li><a class="fold">SDK</a>
                <ul class="menu3" >
                  <li><a id="datahub-sdk-js" class="" href="/datahub/sdk/javascript.html">JavaScript</a></li>
                  <li><a id="datahub-sdk-embededc" class="" href="/datahub/sdk/embeded_c.html">Embeded C</a></li>
                </ul>
              </li>
            </ul>
          </li>
        </ul>
    </div>

    <div class="side_right">
      <div class="doc">
        <h1 id="dsd-dac_cloud-api-">DSD DAC_CLOUD API 指导手册</h1>
<h2 id="">引言</h2>
<p>DSD DAC_CLOUD API提供了功能丰富但使用简单的服务器开发的C++ API，该API极大的降低了服务器开发与维护难度，降低开发成本，缩短开发周期。用户无需关注服务器的负载均衡性能等问题，只需关注简单的业务逻辑，如同开发简单的单机应用，就可以实现丰富的服务器应用。</p>
<h2 id="-1">安装环境</h2>
<p>安装环境就是编译环境，目前只支持<br />
Ubuntu 14.06和Ubuntu 14.10  </p>
<h2 id="-2">编译方法</h2>
<ol>
<li>下载并解压SDK到指定目录   </li>
<li>修改工程的Makefile，添加CLOUD_API_C的头文件引用路径和动态库的链接路径<br />
<code>INCLUDE_DIR=dir</code><br />
<code>LIB_DIR=dir</code><br />
<code>CFLAGS+= -I$(INCLUDE_DIR) -g -O0 -fexceptions</code><br />
<code>LDFLAGS+= -L$(LIB_DIR) -ldsdcloud</code>  </li>
</ol>
<p>具体请参考下面的demo，/home/sea/SDK/dasudian_cloud-1.0.0是本机的API安装路径<br />
　  </p>
<pre><code>INCLUDE_DIR=/home/sea/SDK/dasudian_cloud-1.0.0   
LIB_DIR=/home/sea/SDK/dasudian_cloud-1.0.0   
CFLAGS+= -I$(INCLUDE_DIR) -g -O0 -fexceptions   
LDFLAGS+= -L$(LIB_DIR) -ldsdcloud dm_test: dm_test.o   
gcc -o dm_test dm_test.o $(CFLAGS) $(LDFLAGS) dm_test.o:dm_test.c   
gcc  -c dm_test.c $(CFLAGS)`   </code></pre>
<h2 id="api-">API 类</h2>
<p>API 类是该sdk的主要类，developers调用该类与erlang虚拟机交互，处理http请求或其他服务请求。开发者需要引用头文件<code>dsd_cloud.hpp</code></p>
<h3 id="-3">名称空间</h3>
<p>API 类在dsd_cloud名称空间下  </p>
<h3 id="-4">属性</h3>
<ol>
<li>ASYNC : static final int类型，值为1，标示异步请求类型  </li>
<li>SYNC : static final int类型，值为-1，标示同步请求类型  </li>
</ol>
<h3 id="-5">方法</h3>
<ol>
<li>
<p><code>staici int thread_count()</code><br />
<strong>描述：</strong><br />
静态方法， 获取服务系统支持的与erlang虚拟机交互的最大线程数<br />
<strong>参数：</strong><br />
无<br />
<strong>返回值：</strong><br />
返回系统支持的最大线程数   </p>
</li>
<li>
<p><code>API(int index)</code><br />
<strong>描述：</strong><br />
API构造函数<br />
<strong>参数：</strong><br />
<code>IN index</code> : 与erlang虚拟机交互的线程索引，不能超过thread_count的返回值<br />
<strong>返回值：</strong><br />
返回当前的API实例   </p>
</li>
<li>
<p><code>int subscribe_count(char const * const pattern)</code><br />
<strong>描述：</strong><br />
查询订阅了服务名为pattern的服务数量<br />
<strong>参数：</strong><br />
<code>IN   pattern</code> ：服务名。服务id由服务前缀和服务名来唯一标示，服务前缀是包含该服务的应用上传时确定的。具体格式为 <em>/prefix/pattern</em>，对于http服务，get和post服务是分开的，格式如 <em>name/get</em> 或者 <em>name/post</em><br />
<strong>返回值：</strong><br />
返回服务订阅数  </p>
</li>
<li>
<p><code>int send_async(char const * const name, void const * const request, uint32_t const request_size)</code><br />
<strong>描述：</strong><br />
发送异步请求给服务名为name的服务，其他参数为默认值。developers 调用recv_async来接收服务的返回值，然后调用get_response,get_response_info来取得具体返回内容。成功返回0，失败返回非0<br />
<strong>参数：</strong><br />
<code>IN name</code>  : 请求的服务名<br />
<code>IN request</code> ：请求内容<br />
<code>IN request_size</code> : request长度<br />
<strong>返回值：</strong><br />
成功：0<br />
失败：非0    </p>
</li>
<li>
<p><code>int send_async(std::string const &amp; name, void const * const request, uint32_t const request_size) const</code><br />
<strong>描述：</strong><br />
发送异步请求给服务名为name的服务，其他参数为默认值，developers 调用recv_async来接收服务的返回值，然后调用get_response,get_response_info来取得具体返回内容。成功返回0，失败返回非0<br />
<strong>参数：</strong><br />
<code>IN name</code>  : 请求的服务名<br />
<code>IN request</code> ：请求内容<br />
<code>IN request_size</code> : request长度<br />
<strong>返回值：</strong><br />
成功：0<br />
失败：非0  </p>
</li>
<li>
<p><code>int send_async(char const * const name, void const * const request_info, uint32_t const request_info_size, void const * const request, uint32_t const request_size, uint32_t timeout, int8_t const priority)</code><br />
<strong>描述：</strong><br />
异步服务请求，向 服务名为name 的服务发起请求。该函数会立即返回，developers 调用recv_async来接收服务的返回值，然后调用get_response,get_response_info来取得具体返回内容。成功返回0，失败返回非0<br />
<strong>参数：</strong><br />
<code>IN name</code>  : 请求的服务名<br />
<code>IN request</code> ：请求内容<br />
<code>IN request_size</code> : request长度<br />
<code>IN request_info</code> : 请求metedata数据<br />
<code>IN request_info_size</code> : request_info的长度<br />
<code>IN timeout</code> : 阻塞时间<br />
<code>IN priority</code> : 请求优先级<br />
<strong>返回值：</strong><br />
成功 ：0<br />
失败非0    </p>
</li>
<li>
<p><code>int send_async(std::string const &amp; name, void const * const request_info, uint32_t const request_info_size, void const * const request, uint32_t const request_size, uint32_t timeout, int8_t const priority)</code><br />
<strong>描述：</strong><br />
异步服务请求，向 服务名为name 的服务发起请求。该函数会立即返回，developers 调用recv_async来接收服务的返回值，然后调用get_response,get_response_info来取得具体返回内容。成功返回0，失败返回非0<br />
<strong>参数：</strong><br />
<code>IN name</code>  : 请求的服务名<br />
<code>IN request</code> ：请求内容<br />
<code>IN request_size</code> : request长度<br />
<code>IN request_info</code> : 请求metedata数据<br />
<code>IN request_info_size</code> : request_info的长度<br />
<code>IN timeout</code>  : 阻塞时间<br />
<code>IN priority</code> : 请求优先级<br />
<strong>返回值：</strong><br />
成功：0<br />
失败：非0</p>
</li>
<li>
<p><code>int send_sync(char const * const name, void const * const request, uint32_t const request_size)</code><br />
<strong>描述：</strong><br />
发送同步请求给服务名为name的服务，其他参数为默认值，developers调用get_response, get_response_info获取具体返回内容。成功返回0，失败返回非0<br />
<strong>参数：</strong><br />
<code>IN name</code>  : 请求的服务名<br />
<code>IN request</code> ：请求内容<br />
<code>IN request_size</code> : request长度<br />
<strong>返回值：</strong><br />
成功：0<br />
失败：非0    </p>
</li>
<li>
<p><code>int send_sync(std::string const &amp; name, void const * const request, uint32_t const request_size)</code><br />
<strong>描述：</strong><br />
发送同步请求给服务名为name的服务，其他参数为默认值。developers调用get_response, get_response_info获取具体返回内容。成功返回0，失败返回非0<br />
<strong>参数：</strong><br />
<code>IN name</code>  : 请求的服务名<br />
<code>IN request</code> ：请求内容<br />
<code>IN request_size</code> : request长度<br />
<strong>返回值：</strong><br />
成功：0<br />
失败：非0  </p>
</li>
<li>
<p><code>int send_sync(char const * const name, void const * const request_info, uint32_t const request_info_size, void const * const request, uint32_t const request_size, uint32_t timeout, int8_t const priority)</code><br />
<strong>描述：</strong><br />
同步服务请求，向 服务名为name 的服务发起请求。该函数会立即返回，developers调用get_response, get_response_info获取具体返回内容。成功返回0，失败返回非0<br />
<strong>参数：</strong><br />
<code>IN name</code>  : 请求的服务名<br />
<code>IN request</code> ：请求内容<br />
<code>IN request_size</code> : request长度<br />
<code>IN request_info</code> : 请求metedata数据<br />
<code>IN request_info_size</code> : request_info的长度<br />
<code>IN timeout</code> : 阻塞时间<br />
<code>IN priority</code> : 请求优先级<br />
<strong>返回值：</strong><br />
成功：0<br />
失败：非0   </p>
</li>
<li>
<p><code>int send_sync(std::string const &amp; name, void const * const request_info, uint32_t const request_info_size, void const * const request, uint32_t const request_size, uint32_t timeout, int8_t const priority)</code><br />
<strong>描述：</strong><br />
同步服务请求，向 服务名为name 的服务发起请求。该函数会立即返回，developers调用get_response, get_response_info获取具体返回内容。成功返回0，失败返回非0<br />
<strong>参数：</strong><br />
<code>IN name</code>  : 请求的服务名<br />
<code>IN request</code> ：请求内容<br />
<code>IN request_size</code> : request长度<br />
<code>IN request_info</code> : 请求metedata数据<br />
<code>IN request_info_size</code> : request_info的长度<br />
<code>IN timeout</code> : 阻塞时间<br />
<code>IN priority</code> : 请求优先级<br />
<strong>返回值：</strong><br />
成功：0
失败：非0 </p>
</li>
<li>
<p><code>int recv_async()</code><br />
<strong>描述：</strong><br />
开发者发送异步请求后，需要调用该方法来接收请求返回值。所有参数都是默认值<br />
<strong>参数：</strong><br />
<strong>返回值：</strong><br />
成功：0<br />
失败：非0    </p>
</li>
<li>
<p><code>int recv_async(uint32_t timeout)</code><br />
<strong>描述：</strong><br />
开发者发送异步请求后，需要调用该方法来接收请求返回值。timeout是函数阻塞时间，其他参数默认<br />
<strong>参数：</strong>
<code>IN timeout</code> ：函数阻塞时间<br />
<strong>返回值：</strong><br />
成功：0<br />
失败：非0   </p>
</li>
<li>
<p><code>int recv_async(char const * const trans_id)</code><br />
<strong>描述：</strong><br />
开发者发送异步请求后，需要调用该方法来接收请求返回值。trans_id是异步请求的事务id，其他参数默认<br />
<strong>参数：</strong><br />
<code>IN trans_id</code> ：异步请求的事务id<br />
<strong>返回值：</strong><br />
成功：0<br />
失败：非0   </p>
</li>
<li>
<p><code>int recv_async(uint32_t timeout, char const * const trans_id)</code><br />
<strong>描述：</strong><br />
开发者发送异步请求后，需要调用该方法来接收请求返回值。trans_id是异步请求的事务id，timeout 是函数阻塞时间。其他参数默认<br />
<strong>参数：</strong><br />
<code>IN trans_id</code> ：异步请求的事务id<br />
<code>IN timeout</code> ：函数阻塞时间<br />
<strong>返回值：</strong><br />
成功：0<br />
失败：非0</p>
</li>
<li>
<p><code>int recv_async(uint32_t timeout, std::string const &amp; trans_id)</code><br />
<strong>描述：</strong><br />
开发者发送异步请求后，需要调用该方法来接收请求返回值。trans_id是异步请求的事务id，timeout 是函数阻塞时间。其他参数默认<br />
<strong>参数：</strong><br />
<code>IN trans_id</code> ：异步请求的事务id<br />
<code>IN timeout</code> ：函数阻塞时间<br />
<strong>返回值：</strong><br />
成功：0<br />
失败：非0 </p>
</li>
<li>
<p><code>int recv_async(uint32_t timeout, bool consume)</code><br />
<strong>描述：</strong><br />
开发者发送异步请求后，需要调用该方法来接收请求返回值。timeout是函数阻塞时间，consume标示服务器侧是否保留该次服务请求信息（包括回复内容），false，保存，true，不保存，其他参数默认<br />
<strong>参数：</strong><br />
<code>IN timeout</code> ：函数阻塞时间<br />
<code>IN consume</code> : consume标示服务器侧是否保留该次服务请求信息（包括回复内容），false，保存，true，不保存<br />
<strong>返回值：</strong><br />
成功：0<br />
失败：非0   </p>
</li>
<li>
<p><code>int recv_async(char const * const trans_id, bool consume)</code><br />
<strong>描述：</strong><br />
开发者发送异步请求后，需要调用该方法来接收请求返回值。trans_id是异步请求的事务id，consume标示服务器侧是否保留该次服务请求信息（包括回复内容），false，保存，true，不保存，其他参数默认<br />
<strong>参数：</strong><br />
<code>IN trans_id</code> ：异步请求的事务id<br />
<code>IN consume</code> : consume标示服务器侧是否保留该次服务请求信息（包括回复内容），false，保存，true，不保存<br />
<strong>返回值：</strong><br />
成功：0<br />
失败：非0  </p>
</li>
<li>
<p><code>recv_async(uint32_t timeout, char const * const trans_id, bool consume)</code><br />
<strong>描述：</strong><br />
开发者发送异步请求后，需要调用该方法来接收请求返回值。timeout是函数阻塞时间，trans_id是异步请求的事务id，consume标示服务器侧是否保留该次服务请求信息（包括回复内容），false，保存，true，不保存，其他参数默认<br />
<strong>参数：</strong><br />
<code>IN timeout</code> ：函数阻塞时间<br />
<code>IN trans_id</code> ：异步请求的事务id<br />
<code>IN consume</code> : consume标示服务器侧是否保留该次服务请求信息（包括回复内容），false，保存，true，不保存<br />
<strong>返回值：</strong><br />
成功：0<br />
失败：非0 </p>
</li>
<li>
<p><code>int get_trans_id_count()</code><br />
<strong>描述：</strong><br />
sdk会用trans_id来标示每个服务请求，开发者可以调用该函数来获取SDK保存的服务请求id个数 ，比如调用send_async发起了异步请求，系统会保存这个会话id，开发者可以通过这个id来接收服务返回数据等。<br />
<strong>参数：</strong><br />
<strong>返回值：</strong><br />
trans_id个数     </p>
</li>
<li>
<p><code>char const * get_trans_id(unsigned int const i = 0)</code><br />
<strong>描述：</strong><br />
获取服务请求id。<br />
<strong>参数：</strong><br />
<strong>返回值：</strong><br />
trans_id  </p>
</li>
<li>
<p><code>bool get_trans_id_null(unsigned int const i = 0)</code><br />
<strong>描述：</strong><br />
判断对应的trans_id是否为空，空，返回true，非空，false<br />
<strong>参数：</strong><br />
<strong>返回值：</strong><br />
trans_id为空，返回true<br />
trans_id非空，返回false  </p>
</li>
<li>
<p><code>char const * get_response()</code><br />
<strong>描述：</strong><br />
获取response<br />
<strong>参数：</strong><br />
<strong>返回值：</strong><br />
response内容</p>
</li>
<li>
<p><code>int get_response_size()</code>
<strong>描述：</strong><br />
获取response的长度<br />
<strong>参数：</strong><br />
<strong>返回值：</strong><br />
response内容的长度   </p>
</li>
<li>
<p><code>char const * get_response_info()</code>
<strong>描述：</strong><br />
获取response_info<br />
<strong>参数：</strong><br />
<strong>返回值：</strong><br />
response_info内容</p>
</li>
<li>
<p><code>int get_response_info_size()</code>
<strong>描述：</strong><br />
获取response_info的长度<br />
<strong>参数：</strong><br />
<strong>返回值：</strong><br />
response_info的长度</p>
</li>
<li>
<p><code>int process_index()</code><br />
<strong>描述：</strong><br />
获取该对象所属的线程id<br />
<strong>参数：</strong><br />
<strong>返回值：</strong><br />
线程id  </p>
</li>
<li>
<p><code>int process_count()</code><br />
<strong>描述：</strong><br />
获取分配的与erlang虚拟机交互的线程数<br />
<strong>参数：</strong><br />
<strong>返回值：</strong><br />
线程数量   </p>
</li>
<li>
<p><code>int process_count_max()</code><br />
<strong>描述：</strong><br />
获取系统设置的与erlang虚拟机交互的最大线程数<br />
<strong>参数：</strong><br />
<strong>返回值：</strong><br />
线程数量 </p>
</li>
<li>
<p><code>int process_count_min()</code><br />
<strong>描述：</strong><br />
获取系统设置的与erlang虚拟机交互的最小线程数<br />
<strong>参数：</strong><br />
<strong>返回值：</strong><br />
线程数量  </p>
</li>
<li>
<p><code>int timeout_initialize()</code>
<strong>描述：</strong><br />
获取初始化的默认的阻塞时间<br />
<strong>参数：</strong><br />
<strong>返回值：</strong><br />
阻塞时间，单位为毫秒 </p>
</li>
<li>
<p><code>int timeout_async()</code><br />
<strong>描述：</strong><br />
获取异步请求的默认的阻塞时间<br />
<strong>参数：</strong><br />
<strong>返回值：</strong><br />
阻塞时间，单位为毫秒 </p>
</li>
<li>
<p><code>int timeout_sync()</code><br />
<strong>描述：</strong><br />
获取同步请求的默认的阻塞时间
<strong>参数：</strong><br />
<strong>返回值：</strong><br />
阻塞时间，单位为毫秒  </p>
</li>
<li>
<p><code>int priority_default()</code><br />
<strong>描述：</strong><br />
获取服务默认优先级<br />
<strong>参数：</strong><br />
<strong>返回值：</strong><br />
服务优先级 </p>
</li>
<li>
<p><code>int forward_(int const command, char const * const name, void const * const request_info, uint32_t const request_info_size, void const * const request, uint32_t const request_size, uint32_t timeout, int8_t const priority, char const * const trans_id, char const * const pid, uint32_t const pid_size)</code><br />
<strong>描述：</strong><br />
转发请求给服务名为name的服务,执行完毕后抛出一个SDK必须要获取的forward_async_exception或forward_sync_exception异常，应用程序必须将其抛出，否则会报错。即之后的代码 不会执行。目的服务执行完会直接回复请求<br />
<strong>参数：</strong>
<code>IN command</code> 转发请求是同步方式还是异步方式，DSD_CLOUD_ASYNC：异步转发，DSD_CLOUD_SYNC: 同步转发<br />
<code>IN name</code>  目的服务名，可以为正则表达式<br />
<code>IN request_info</code> 请求的元数据<br />
<code>IN request</code> 请求内容<br />
<code>IN timeout</code> 请求的阻塞时间<br />
<code>IN priority</code> 请求的优先级<br />
<code>IN trans_id</code> 转发请求的事务id<br />
<code>IN pid</code>  转发请求的pid<br />
<code>IN pid_size</code> pid的长度<br />
<strong>返回值：</strong><br />
成功：0<br />
失败：非0 </p>
</li>
<li>
<p><code>int forward_(int const command, std::string const &amp; name, void const * const request_info, uint32_t const request_info_size, void const * const request, uint32_t const request_size, uint32_t timeout, int8_t const priority, char const * const trans_id, char const * const pid, uint32_t const pid_size)</code><br />
<strong>描述：</strong><br />
转发请求给服务名为name的服务,执行完毕后抛出一个SDK必须要获取的forward_async_exception或forward_sync_exception异常，应用程序必须将其抛出，否则会报错。即之后的代码 不会执行。目的服务执行完会直接回复请求<br />
<strong>参数：</strong><br />
<code>IN command</code> 转发请求是同步方式还是异步方式，DSD_CLOUD_ASYNC：异步转发，DSD_CLOUD_SYNC: 同步转发<br />
<code>IN name</code>  目的服务名，可以为正则表达式<br />
<code>IN request_info</code> 请求的元数据<br />
<code>IN request</code> 请求内容<br />
<code>IN timeout</code> 请求的阻塞时间<br />
<code>IN priority</code> 请求的优先级<br />
<code>IN trans_id</code> 转发请求的事务id<br />
<code>IN pid</code>  转发请求的pid
<code>IN pid_size</code> pid的长度<br />
<strong>返回值：</strong><br />
成功返回0，失败返回非0 </p>
</li>
<li>
<p><code>int forward_async(char const * const name, void const * const request_info, uint32_t const request_info_size, void const * const request, uint32_t const request_size, uint32_t timeout, int8_t const priority, char const * const trans_id, char const * const pid, uint32_t const pid_size)</code><br />
<strong>描述：</strong><br />
异步转发请求给服务名为name的服务,执行完毕后抛出一个SDK必须要获取的forward_async_exception异常，已用无需捕获它，必须将其抛出，否则会报错。即之后的代码 不会执行。目的服务执行完会直接回复请求<br />
<strong>参数：</strong><br />
<code>IN name</code>  目的服务名，可以为正则表达式<br />
<code>IN request_info</code> 请求的元数据<br />
<code>IN request</code> 请求内容<br />
<code>IN timeout</code> 请求的阻塞时间<br />
<code>IN priority</code> 请求的优先级<br />
<code>IN trans_id</code> 转发请求的事务id<br />
<code>IN pid</code>  转发请求的pid<br />
<code>IN pid_size</code> pid的长度<br />
<strong>返回值：</strong><br />
成功返回0，失败返回非0   </p>
</li>
<li>
<p><code>int forward_sync(char const * const name, void const * const request_info, uint32_t const request_info_size, void const * const request, uint32_t const request_size, uint32_t timeout, int8_t const priority, char const * const trans_id, char const * const pid, uint32_t const pid_size)</code><br />
<strong>描述：</strong><br />
同步转发请求给服务名为name的服务,执行完毕后抛出一个SDK必须要获取的forward_sync_exception异常，已用无需捕获它，必须将其抛出，否则会报错。即之后的代码 不会执行。目的服务执行完会直接回复请求<br />
<strong>参数：</strong><br />
<code>IN name</code>  目的服务名，可以为正则表达式<br />
<code>IN request_info</code> 请求的元数据<br />
<code>IN request</code> 请求内容<br />
<code>IN timeout</code> 请求的阻塞时间<br />
<code>IN priority</code> 请求的优先级<br />
<code>IN trans_id</code> 转发请求的事务id<br />
<code>IN pid</code>  转发请求的pid<br />
<code>IN pid_size</code> pid的长度<br />
<strong>返回值：</strong><br />
成功返回0，失败返回非0</p>
</li>
<li>
<p><code>int poll(int timeout)</code><br />
<strong>描述：</strong><br />
轮询是否有请求到达<br />
<strong>参数：</strong><br />
<code>IN timeout</code>  轮询周期，单位ms,如果设置为-1,表示永久阻塞直到有请求到来<br />
<strong>返回值：</strong><br />
成功返回0，失败返回非0</p>
</li>
<li>
<p><code>int return_(int const command, char const * const name, char const * const pattern, void const * const response_info, uint32_t const response_info_size, void const * const response, uint32_t const response_size, uint32_t timeout, char const * const trans_id, char const * const pid, uint32_t const pid_size)</code><br />
<strong>描述：</strong><br />
响应请求回复，该函数如果执行成功后会抛出return_async_exception或return_sync_exception异常，应用程序不可捕获它，该异常必须得由SDK捕获，否则会报错。所以可以在回调函数的最后一行返回。<br />
<strong>参数：</strong><br />
<code>Integer command</code> 回复类型，API.ASYNC：异步回复；API.SYNC:同步回复，必须与回调函数的参数保持一致<br />
<code>IN name</code>  服务名，与回调函数的参数保持一致<br />
<code>IN request_info</code> 请求的元数据<br />
<code>IN request_info_size</code> : request_info的长度<br />
<code>IN  request_size</code> : request的长度<br />
<code>IN request</code> 请求内容<br />
<code>IN timeout</code> 请求的阻塞时间<br />
<code>IN priority</code> 请求的优先级<br />
<code>IN trans_id</code> 转发请求的事务id<br />
<code>IN pid</code>  转发请求的pid
<strong>返回值：</strong><br />
失败，返回非0  </p>
</li>
<li>
<p><code>int return_async(char const * const name, char const * const pattern, void const * const response_info, uint32_t const response_info_size, void const * const response, uint32_t const response_size, uint32_t timeout, char const * const trans_id, char const * const pid, uint32_t const pid_size)</code><br />
<strong>描述：</strong><br />
异步响应请求回复，该函数如果执行成功后会抛出return_async_exceptionn异常，应用程序不可捕获它，该异常必须得由SDK捕获，否则会报错。所以最好在回调函数的最后一行返回，因为该函数执行成功不会执行后面的内容。<br />
<strong>参数：</strong><br />
<code>Integer command</code> 回复类型，API.ASYNC：异步回复；API.SYNC:同步回复，必须与回调函数的参数保持一致<br />
<code>IN name</code>  服务名，与回调函数的参数保持一致<br />
<code>IN request_info</code> 请求的元数据<br />
<code>IN request_info_size</code> : request_info的长度<br />
<code>IN  request_size</code>  : request的长度<br />
<code>IN request</code> 请求内容<br />
<code>IN timeout</code> 请求的阻塞时间<br />
<code>IN priority</code> 请求的优先级<br />
<code>IN trans_id</code> 转发请求的事务id<br />
<code>IN pid</code>  转发请求的pid<br />
<strong>返回值：</strong><br />
失败，返回非0    </p>
</li>
<li>
<p><code>int return_sync(char const * const name, char const * const pattern, void const * const response_info, uint32_t const response_info_size, void const * const response, uint32_t const response_size, uint32_t timeout, char const * const trans_id, char const * const pid, uint32_t const pid_size)</code><br />
<strong>描述：</strong><br />
同步响应请求回复，该函数如果执行成功后会抛出return_sync_exceptionn异常，应用程序不可捕获它，该异常必须得由SDK捕获，否则会报错。所以最好在回调函数的最后一行返回，因为该函数执行成功不会执行后面的内容。<br />
<strong>参数：</strong><br />
<code>Integer command</code> 回复类型，API.ASYNC：异步回复；API.SYNC:同步回复，必须与回调函数的参数保持一致<br />
<code>IN name</code>  服务名，与回调函数的参数保持一致<br />
<code>IN request_info</code> 请求的元数据<br />
<code>IN request_info_size</code> : request_info的长度<br />
<code>IN  request_size</code> : request的长度<br />
<code>IN request</code> 请求内容<br />
<code>IN timeout</code> 请求的阻塞时间<br />
<code>IN priority</code> 请求的优先级<br />
<code>IN trans_id</code> 转发请求的事务id<br />
<code>IN pid</code>  转发请求的pid<br />
<strong>返回值：</strong><br />
失败，返回非0   </p>
</li>
<li>
<p><code>int unsubscribe(char const * const pattern)</code><br />
<strong>描述：</strong><br />
取消订阅服务名pattern<br />
<strong>参数：</strong><br />
IN  pattern ：取消订阅的服务名称<br />
<strong>返回值：</strong><br />
成功，返回0；失败，返回非0   </p>
</li>
<li>
<p><code>template &lt; typename T&gt; int subscribe(char const * const pattern, T &amp; object, void (T::*f) (API const &amp;, int const, std::string const &amp;, std::string const &amp;, void const * const, uint32_t const, void const * const, uint32_t const, uint32_t, int8_t, char const * const, char const * const, uint32_t const)) const</code><br />
<strong>描述：</strong><br />
订阅服务pattern，T为object类的名称<br />
<strong>参数：</strong><br />
<code>IN  pattern</code> ：订阅的服务名称<br />
<code>IN object</code> ：接口对象<br />
<code>IN  f</code>: object对象中的某个函数<br />
<strong>返回值：</strong><br />
成功，返回0；失败，返回非0     </p>
</li>
<li><code>int subscribe(std::string const &amp; pattern, function_object_cxx * object)</code><br />
<strong>描述：</strong><br />
订阅服务pattern<br />
<strong>参数：</strong><br />
<code>IN  pattern</code> ：订阅的服务名称<br />
<code>IN object</code> ：接口对象，该对象是一个抽象类，开发者需要编写一个子类，并实现operator()函数。<br />
<strong>返回值：</strong><br />
成功，返回0；失败，返回非0   </li>
</ol>
<h2 id="function_object_cxx-">function_object_cxx 类</h2>
<p>function_object_cxx类为API 类方法subscribe的回调接口类，该类是个纯虚函数，开发者如果调用 <code>int subscribe(std::string const &amp; pattern, function_object_cxx * object)</code>方法，需要生成一个子类，并且需要实现operator()方法。</p>
<h3 id="-6">属性</h3>
<p>请参见相关方法</p>
<h3 id="-7">方法</h3>
<ol>
<li><code>virtual void operator() (API const &amp;, int const command, char const * const name, char const * const pattern, void const * const request_info, uint32_t const request_info_size, void const * const request, uint32_t const request_size, uint32_t timeout, int8_t priority, char const * const trans_id, char const * const pid, uint32_t const pid_size) = 0</code><br />
<strong>描述：</strong><br />
developers需要实现该方法，处理服务请求<br />
<strong>参数：</strong><br />
<code>IN API</code> ：API 实例<br />
<code>IN command</code> 请求类型，API.ASYNC：异步请求；API.SYNC:同步请求<br />
<code>IN name</code>  服务名，与回调函数的参数保持一致<br />
<code>IN request_info</code> 请求的元数据<br />
<code>IN request_info_size</code> :request_info的长度<br />
<code>IN  request_size</code> : request的长度<br />
<code>IN request</code> 请求内容<br />
<code>IN timeout</code> 请求的阻塞时间<br />
<code>IN priority</code> 请求的优先级<br />
<code>IN trans_id</code> 转发请求的事务id<br />
<code>IN pid</code>  转发请求的pid<br />
<strong>返回值：</strong>  </li>
</ol>
<h2 id="dsd_log">Dsd_log</h2>
<p>开发者调用如下函数打印日志，引用头文件<code>dsd_log.h</code> 。  </p>
<ol>
<li>
<p><code>int dsd_log_init()</code><br />
<strong>描述：</strong><br />
日志初始化函数<br />
<strong>参数：</strong><br />
<strong>返回值：</strong><br />
成功，返回0；失败，返回非0   </p>
</li>
<li>
<p><code>dsd_log_set_level(level)</code><br />
<strong>描述：</strong><br />
设置日志打印级别<br />
<strong>参数：</strong><br />
<code>IN level</code>  : 日志级别，只能在CLOG_DEBUG，CLOG_INFO，CLOG_WARN，CLOG_ERROR
<strong>返回值：</strong>  </p>
</li>
<li>
<p><code>dsd_log_info(fmt, ...)</code><br />
<strong>描述：</strong><br />
info级别打印日志，该函数用法与printf一样<br />
<strong>参数：</strong><br />
<strong>返回值：</strong>   </p>
</li>
<li>
<p><code>dsd_log_warn(fmt, ...)</code><br />
<strong>描述：</strong><br />
warn级别打印日志，该函数用法与printf一样<br />
<strong>参数：</strong><br />
<strong>返回值：</strong>   </p>
</li>
<li>
<p><code>dsd_log_error(fmt, ...)</code><br />
<strong>描述：</strong><br />
error级别打印日志，该函数用法与printf一样<br />
<strong>参数：</strong><br />
<strong>返回值：</strong>   </p>
</li>
<li><code>dsd_log_debug(fmt, ...)</code><br />
<strong>描述：</strong><br />
debug级别打印日志，该函数用法与printf一样<br />
<strong>参数：</strong><br />
<strong>返回值：</strong>   </li>
</ol>
<h2 id="dsd_mchdb">dsd_mchdb类</h2>
<p>DSD dac cloud api 提供了访问memcacahed数据库的方法。开发者只需要引用头文件<code>dsd_mchdb.hpp</code> 。  </p>
<h3 id="-8">名称空间</h3>
<p>dsd_mchdb类在dsd_cloud名称下</p>
<h3 id="-9">属性</h3>
<p>请参见相关方法</p>
<h3 id="-10">方法</h3>
<ol>
<li>
<p><code>dsd_mchdb(API &amp;m)</code><br />
<strong>描述：</strong><br />
实例化dsd_memcached类，必须传入一个API实例<br />
<strong>参数：</strong><br />
<code>IN API m</code> : 实例化Dsd_memcached类所需要的API 实例<br />
<strong>返回值：</strong><br />
无   </p>
</li>
<li>
<p><code>string get_key( const string &amp;service_name, const string &amp;key)</code><br />
<strong>描述：</strong><br />
访问服务名为serv_name的memcached 服务，请求key的值，返回一个string<br />
<strong>参数：</strong><br />
<code>IN serv_name</code> : memcached服务名
<code>IN key</code> : 查询的key名<br />
<strong>返回值：</strong><br />
返回key的值，格式为byte数组，如果没有该key或查询失败，返回null   </p>
</li>
<li>
<p><code>int  add_key(const string &amp;service_name , const string &amp;key, const string &amp;value)</code><br />
<strong>描述：</strong><br />
向数据库serv_name添加一个key, 值为value, 成功返回0，失败返回非0<br />
<strong>参数：</strong><br />
<code>IN serv_name</code> : memcached 服务名<br />
<code>IN key</code> ： key名<br />
<code>IN value</code> ： key 的值<br />
<strong>返回值：</strong><br />
成功：返回0；失败：返回 -1    </p>
</li>
<li>
<p><code>int add_key_expiredTime(const string &amp;service_name , const string &amp;key, const string &amp;value,int expire_time)</code><br />
<strong>描述：</strong><br />
向数据库serv_name添加一个key, 值为value, 该key的生成周期为time 秒, 成功返回0，失败返回非0<br />
<strong>参数：</strong><br />
<code>IN serv_name</code> : memcached 服务名<br />
<code>IN key</code> ： key名<br />
<code>IN value</code> ： key 的值<br />
<code>IN time</code> : key的生成周期，单位为秒<br />
<strong>返回值：</strong><br />
成功：返回0；失败：返回 -1     </p>
</li>
<li>
<p><code>int set_key(const string &amp;service_name ,const string &amp;key,const string &amp;value)</code><br />
<strong>描述：</strong><br />
请求数据库serv_name，修改key的值，在原来的基础上增加inc，成功返回0，失败非0<br />
<strong>参数：</strong><br />
<code>IN serv_name</code> : memcached 服务名<br />
<code>IN key</code> ： key名<br />
<code>IN inc</code> ： 增加量<br />
<strong>返回值：</strong><br />
成功返回0，失败返回非0    </p>
</li>
<li>
<p><code>int decrement_key(const string serv_name, const string key, const int dec)</code><br />
<strong>描述：</strong><br />
请求数据库serv_name，修改key的值，在原来的基础上减小dec，成功返回0，失败非0<br />
<strong>参数：</strong><br />
<code>IN serv_name</code> : memcached 服务名<br />
<code>IN key</code> ： key名<br />
<code>IN dec</code> ： 减小量<br />
<strong>返回值：</strong><br />
成功返回0，失败返回非0    </p>
</li>
<li>
<p><code>int increment_key(const string serv_name, const string key, const int inc)</code><br />
<strong>描述：</strong><br />
请求数据库serv_name，修改key的值，在原来的基础上增加inc，成功返回0，失败非0<br />
<strong>参数：</strong><br />
<code>IN serv_name</code> : memcached 服务名<br />
<code>IN key</code> ： key名<br />
<code>IN inc</code> ： 增加量<br />
<strong>返回值：</strong><br />
成功返回0，失败返回非0    </p>
</li>
<li>
<p><code>int set_key_expiredTime( const string &amp;service_name , const string &amp;key,const string &amp;value,int expire_time)</code><br />
<strong>描述：</strong><br />
请求数据库serv_name，设置key的值为value，生成周期为time<br />
<strong>参数：</strong><br />
<code>IN serv_name</code> : memcached 服务名<br />
<code>IN key</code>  ： key名<br />
<code>IN value</code> ： 待修改的值<br />
<code>IN time</code> : key的生存周期，单位为秒<br />
<strong>返回值：</strong><br />
成功返回0，失败返回非0    </p>
</li>
<li>
<p><code>int set_key( const string &amp;service_name , const string &amp;key,const string &amp;value)</code><br />
<strong>描述：</strong><br />
请求数据库serv_name，设置key的值为value<br />
<strong>参数：</strong><br />
<code>IN serv_name</code> : memcached 服务名<br />
<code>IN key</code> ： key名<br />
<code>IN value</code>  ： 待修改的值<br />
<strong>返回值：</strong><br />
成功返回0，失败返回非0    </p>
</li>
<li>
<p><code>int delete_key(const string serv_name, const string key)</code><br />
<strong>描述：</strong><br />
请求数据库serv_name，删掉key<br />
<strong>参数：</strong><br />
<code>IN serv_name</code> : memcached 服务名<br />
<code>IN key</code> ： key名<br />
<strong>返回值：</strong><br />
成功返回0，失败非0</p>
</li>
<li>
<p><code>int replace_key(const string serv_name, const string key, const string value)</code><br />
<strong>描述：</strong><br />
请求数据库serv_name，替换key的值为value<br />
<strong>参数：</strong><br />
<code>IN serv_name</code> : memcached 服务名<br />
<code>IN key</code> ： key名<br />
<code>IN value</code>  ： 待修改的值<br />
<strong>返回值：</strong><br />
成功返回0，失败返回非0    </p>
</li>
<li>
<p><code>int append_key(const string serv_name, const string key, const string value)</code><br />
<strong>描述：</strong><br />
请求数据库serv_name, 修改key的值，添加一个后缀value<br />
<strong>参数：</strong><br />
<code>IN serv_name</code> : memcached 服务名<br />
<code>IN key</code> ： key名<br />
<code>IN value</code> ： 添加的后缀<br />
<strong>返回值：</strong><br />
成功返回0，失败返回非0    </p>
</li>
<li>
<p><code>int prepend_key(const string serv_name, const string key, const string value)</code><br />
<strong>描述：</strong><br />
请求数据库serv_name, 修改key的值，添加一个前缀value<br />
<strong>参数：</strong><br />
<code>IN serv_name</code> : memcached 服务名<br />
<code>IN key</code> ： key名<br />
<code>IN value</code> ： 添加的前缀<br />
<strong>返回值：</strong><br />
成功返回0，失败返回非0    </p>
</li>
<li>
<p><code>string get_version(const string &amp;service_name)</code><br />
<strong>描述：</strong><br />
请求数据库serv_name的版本号<br />
<strong>参数：</strong><br />
<code>IN serv_name</code> : memcached 服务名<br />
<strong>返回值：</strong><br />
返回数据的版本号，请求失败返回null     </p>
</li>
<li><code>int flush(final String serv_name)</code><br />
<strong>描述：</strong><br />
请求数据库serv_name，清空所有的key
<strong>参数：</strong><br />
<code>IN serv_name</code> : memcached 服务名<br />
<strong>返回值：</strong><br />
成功返回0，失败返回非0</li>
</ol>
<h2 id="dsd_dsdb">dsd_dsdb类</h2>
<p>DSD dac cloud api 提供了访问dsdb数据库的方法。</p>
<h3 id="-11">名称空间</h3>
<p>dsd_dsdb 类在dsd_cloud中 </p>
<h3 id="-12">属性</h3>
<p>请参见相关方法</p>
<h3 id="-13">方法</h3>
<ol>
<li>
<p><code>dsd_dsdb(API &amp;m)</code><br />
<strong>描述：</strong><br />
实例化dsd_dsdb类，必须传入一个API实例<br />
<strong>参数：</strong><br />
<code>IN API m</code> : 实例化dsd_dsdb类所需要的API 实例<br />
<strong>返回值：</strong><br />
无    </p>
</li>
<li>
<p><code>std::list&lt; std::string&gt; get_result_value()</code><br />
<strong>描述：</strong><br />
获取查询请求的结果，返回内容为一个List&lt; string &gt;类型<br />
<strong>参数：</strong><br />
<strong>返回值：</strong><br />
dsdb查询请求的结果，List&lt; string&gt;类型   </p>
</li>
<li>
<p><code>std::string get_result_page_id()</code><br />
<strong>描述：</strong><br />
dsdb支持分页查询，分页查询返回的结果携带查询下一页请求的索引，developer调用该方法来获取查询下页的索引<br />
<strong>参数：</strong><br />
<strong>返回值：</strong><br />
查询下页的索引字符串  </p>
</li>
<li>
<p><code>int put(const std::string &amp;database, const std::string &amp;key, const std::string &amp;value)</code><br />
<strong>描述：</strong><br />
向数据库database添加一个值为value的key，成功返回0，失败返回非0<br />
<strong>参数：</strong><br />
<code>IN database</code> : 请求的数据库<br />
<code>IN key</code> : 待添加的key<br />
<code>IN value</code> : 添加的值<br />
<strong>返回值：</strong><br />
成功返回0，失败返回非0   </p>
</li>
<li>
<p><code>int get(const std::string &amp;database, const std::string &amp;key)</code><br />
<strong>描述：</strong><br />
向数据库database添加一个值为value的key，成功返回0，失败返回非0，developers调用get_result方法获取查询结果<br />
<strong>参数：</strong><br />
<code>IN database</code> : 请求的数据库<br />
<code>IN key</code> : 待添加的key<br />
<strong>返回值：</strong><br />
成功返回0，失败返回非0   </p>
</li>
<li>
<p><code>int delete_key(const std::string &amp;database, const std::string &amp;key)</code><br />
<strong>描述：</strong><br />
删除database中key<br />
<strong>参数：</strong><br />
<code>IN database</code> : 请求的数据库<br />
<code>IN key</code> : 待删除的key<br />
<strong>返回值：</strong><br />
成功返回0，失败返回非0   </p>
</li>
<li>
<p><code>int search(const std::string &amp;database, const std::string &amp;key, const std::string &amp;value)</code><br />
<strong>描述：</strong><br />
请求database数据库，搜索内容符合key=value的所有记录，返回记录的列表，成功返回0，失败返回非0。developers调用get_result方法获取查询结果，查询结果为符合条件的记录项名字<br />
<strong>参数：</strong><br />
<code>IN database</code> : 请求的数据库<br />
<code>IN key</code> : 搜索关键字<br />
<code>IN value</code> : 关键字内容<br />
<strong>返回值：</strong><br />
成功返回0，失败返回非0   </p>
</li>
<li>
<p><code>int search(const std::string &amp;database, const std::string &amp;key, float value)</code><br />
<strong>描述：</strong><br />
请求database数据库，搜索内容符合key=value的所有记录，成功返回0，失败返回非0。developers调用get_result方法获取查询结果，查询结果为符合条件的记录项名字<br />
<strong>参数：</strong><br />
<code>IN database</code> : 请求的数据库<br />
<code>IN key</code> : 搜索关键字<br />
<code>IN value</code> : 关键字内容<br />
<strong>返回值：</strong><br />
成功返回0，失败返回非0    </p>
</li>
<li>
<p><code>int search_range(const std::string &amp;database, const std::string &amp;key, const std::string &amp;start, const std::string &amp;end)</code><br />
<strong>描述：</strong><br />
请求database数据库，搜索内容符合关键字key的内容在[start, end]之间的所有记录，成功返回0，失败返回非0。developers调用get_result方法获取查询结果，查询结果为符合条件的记录项名字<br />
<strong>参数：</strong><br />
<code>IN database</code> : 请求的数据库<br />
<code>IN key</code> : 搜索关键字<br />
<code>IN start</code> : 最小值<br />
<code>IN end</code> : 最大值<br />
<strong>返回值：</strong><br />
成功返回0，失败返回非0</p>
</li>
<li>
<p><code>int search_range(const std::string &amp;database, const std::string &amp;key, float start, float end)</code><br />
<strong>描述：</strong><br />
请求database数据库，搜索内容符合关键字key的内容在[start, end]之间的所有记录，成功返回0，失败返回非0。developers调用get_result方法获取查询结果，查询结果为符合条件的记录项名字<br />
<strong>参数：</strong>
<code>IN database</code> : 请求的数据库<br />
<code>IN key</code> : 搜索关键字<br />
<code>IN start</code> : 最小值<br />
<code>IN end</code> : 最大值<br />
<strong>返回值：</strong><br />
成功返回0，失败返回非0    </p>
</li>
<li>
<p><code>int search_pagination(const std::string &amp;database, const std::string &amp;key, const std::string &amp;value, const std::string &amp;next_seq, int num_per_page)</code><br />
<strong>描述：</strong><br />
请求database数据库，分页搜索内容符合关键字key=value所有记录，每页num_per_page个数据，next_page为分页查询索引，如果为null或空字符串，则是查询第一页的数据，成功返回0，失败返回非0。developers调用get_result方法获取查询结果，查询结果为符合条件的记录项名字，调用get_next_page_id获取下页的查询索引<br />
<strong>参数：</strong><br />
<code>IN database</code>: 请求的数据库<br />
<code>IN key</code> : 搜索关键字<br />
<code>IN value</code> : 关键字内容<br />
<code>IN next_page_id</code> : 查询下页的索引，如果为空或null，则是查询首页<br />
<code>IN num_per_page</code> : 每页的返回数据条数<br />
<strong>返回值：</strong><br />
成功返回0，失败返回非0   </p>
</li>
<li>
<p><code>int search_pagination(const std::string &amp;database, const std::string &amp;key, float value, const std::string &amp;next_seq, int num_per_page)</code><br />
<strong>描述：</strong><br />
请求database数据库，分页搜索内容符合关键字key=value所有记录，每页num_per_page个数据，next_page为分页查询索引，如果为null或空字符串，则是查询第一页的数据，成功返回0，失败返回非0。developers调用get_result方法获取查询结果，查询结果为符合条件的记录项名字，调用get_next_page_id获取下页的查询索引<br />
<strong>参数：</strong><br />
<code>IN database</code> : 请求的数据库<br />
<code>IN key</code> : 搜索关键字<br />
<code>IN value</code> : 关键字内容<br />
<code>IN next_page_id</code> : 查询下页的索引，如果为空或null，则是查询首页<br />
<code>IN num_per_page</code> : 每页的返回数据条数<br />
<strong>返回值：</strong><br />
成功返回0，失败返回非0   </p>
</li>
<li>
<p><code>int search_range_pagination(const std::string &amp;database, const std::string &amp;key, const std::string &amp;start, const std::string &amp;end, const std::string &amp;next_seq, int num_per_page)</code><br />
<strong>描述：</strong><br />
请求database数据库，搜索内容符合关键字key的内容在[start, end]之间的所有记录，每页num_per_page个数据，next_page为分页查询索引，如果为null或空字符串，则是查询第一页的数据，成功返回0，失败返回非0。developers调用get_result方法获取查询结果，查询结果为符合条件的记录项名字，调用get_next_page_id获取下页的查询索引<br />
<strong>参数：</strong>
<code>IN database</code> : 请求的数据库<br />
<code>IN key</code> : 搜索关键字<br />
<code>IN start</code> : 最小值<br />
<code>IN end</code> : 最大值<br />
<code>IN next_page_id</code> : 查询下页的索引，如果为空或null，则是查询首页<br />
<code>IN num_per_page</code> : 每页的返回数据条数<br />
<strong>返回值：</strong><br />
成功返回0，失败返回非0   </p>
</li>
<li>
<p><code>int search_range_pagination(const std::string &amp;database, const std::string &amp;key, float start, float end, const std::string &amp;next_seq, int num_per_page)</code><br />
<strong>描述：</strong><br />
请求database数据库，搜索内容符合关键字key的内容在[start, end]之间的所有记录，每页num_per_page个数据，next_page为分页查询索引，如果为null或空字符串，则是查询第一页的数据，成功返回0，失败返回非0。developers调用get_result方法获取查询结果，查询结果为符合条件的记录项名字，调用get_next_page_id获取下页的查询索引<br />
<strong>参数：</strong><br />
<code>IN database</code> : 请求的数据库<br />
<code>IN key</code> : 搜索关键字<br />
<code>IN start</code> : 最小值<br />
<code>IN end</code> : 最大值<br />
<code>IN next_page_id</code> : 查询下页的索引，如果为空或null，则是查询首页<br />
<code>IN num_per_page</code> : 每页的返回数据条数<br />
<strong>返回值：</strong><br />
成功返回0，失败返回非0   </p>
</li>
<li>
<p><code>int search_value(const std::string &amp;database, const std::string &amp;key, const std::string &amp;value)</code><br />
<strong>描述：</strong><br />
请求database数据库，搜索内容符合key=value的所有记录，成功返回0，失败返回非0。developers调用get_result方法获取查询结果，查询结果为符合条件的记录项的内容<br />
<strong>参数：</strong><br />
<code>IN database</code> : 请求的数据库<br />
<code>IN key</code> : 搜索关键字<br />
<code>IN value</code> : 关键字内容<br />
<strong>返回值：</strong><br />
成功返回0，失败返回非0    </p>
</li>
<li>
<p><code>int search_value(const std::string &amp;database, const std::string &amp;key, float value)</code><br />
<strong>描述：</strong><br />
请求database数据库，搜索内容符合key=value的所有记录，成功返回0，失败返回非0。developers调用get_result方法获取查询结果，查询结果为符合条件的记录项的内容<br />
<strong>参数：</strong>
<code>IN database</code> : 请求的数据库<br />
<code>IN key</code> : 搜索关键字<br />
<code>IN value</code> : 关键字内容<br />
<strong>返回值：</strong><br />
成功返回0，失败返回非0    </p>
</li>
<li>
<p><code>int search_value_range(const std::string &amp;database, const std::string &amp;key, const std::string &amp;start, const std::string &amp;end)</code><br />
<strong>描述：</strong><br />
请求database数据库，搜索内容符合关键字key的内容在[start, end]之间的所有记录，成功返回0，失败返回非0。developers调用get_result方法获取查询结果，查询结果为符合条件的记录项的内容<br />
<strong>参数：</strong><br />
<code>IN database</code> : 请求的数据库<br />
<code>IN key</code> : 搜索关键字<br />
<code>IN start</code> : 最小值<br />
<code>IN end</code> : 最大值<br />
<strong>返回值：</strong><br />
成功返回0，失败返回非0   </p>
</li>
<li>
<p><code>int search_value_range(const std::string &amp;database, const std::string &amp;key, const std::string &amp;start, const std::string &amp;end)</code>
<strong>描述：</strong><br />
请求database数据库，搜索内容符合关键字key的内容在[start, end]之间的所有记录，成功返回0，失败返回非0。developers调用get_result方法获取查询结果，查询结果为符合条件的记录项的内容<br />
<strong>参数：</strong><br />
<code>IN database</code> : 请求的数据库<br />
<code>IN key</code> : 搜索关键字<br />
<code>IN start</code> : 最小值<br />
<code>IN end</code> : 最大值<br />
<strong>返回值：</strong><br />
成功返回0，失败返回非0   </p>
</li>
<li>
<p><code>int search_value_pagination(const std::string &amp;database, const std::string &amp;key, const std::string &amp;value, const std::string &amp;next_seq, int num_per_page)</code><br />
<strong>描述：</strong><br />
请求database数据库，分页搜索内容符合关键字key=value所有记录，每页num_per_page个数据，next_page为分页查询索引，如果为null或空字符串，则是查询第一页的数据，成功返回0，失败返回非0。developers调用get_result方法获取查询结果，查询结果为符合条件的记录项的内容，调用get_next_page_id获取下页的查询索引<br />
<strong>参数：</strong><br />
<code>IN database</code> : 请求的数据库<br />
<code>IN key</code> : 搜索关键字<br />
<code>IN value</code> : 关键字内容<br />
<code>IN next_page_id</code> : 查询下页的索引，如果为空或null，则是查询首页<br />
<code>IN num_per_page</code> : 每页的返回数据条数<br />
<strong>返回值：</strong><br />
成功返回0，失败返回非0    </p>
</li>
<li>
<p><code>int search_value_pagination(const std::string &amp;database, const std::string &amp;key, float value, const std::string &amp;next_seq, int num_per_page)</code><br />
<strong>描述：</strong><br />
请求database数据库，分页搜索内容符合关键字key=value所有记录，每页num_per_page个数据，next_page为分页查询索引，如果为null或空字符串，则是查询第一页的数据，成功返回0，失败返回非0。developers调用get_result方法获取查询结果，查询结果为符合条件的记录项的内容，调用get_next_page_id获取下页的查询索引<br />
<strong>参数：</strong><br />
<code>IN database</code> : 请求的数据库<br />
<code>IN key</code> : 搜索关键字<br />
<code>IN value</code> : 关键字内容<br />
<code>IN next_page_id</code> : 查询下页的索引，如果为空或null，则是查询首页<br />
<code>IN num_per_page</code> : 每页的返回数据条数<br />
<strong>返回值：</strong><br />
成功返回0，失败返回非0   </p>
</li>
<li>
<p><code>int search_value_range_pagination(const std::string &amp;database, const std::string &amp;key, const std::string &amp;start, const std::string &amp;end, const std::string &amp;next_seq, int num_per_page)</code><br />
<strong>描述：</strong><br />
请求database数据库，搜索内容符合关键字key的内容在[start, end]之间的所有记录，每页num_per_page个数据，next_page为分页查询索引，如果为null或空字符串，则是查询第一页的数据，成功返回0，失败返回非0。developers调用get_result方法获取查询结果，查询结果为符合条件的记录项的内容，调用get_next_page_id获取下页的查询索引<br />
<strong>参数：</strong>
<code>IN database</code> : 请求的数据库<br />
<code>IN key</code> : 搜索关键字<br />
<code>IN start</code> : 最小值<br />
<code>IN end</code> : 最大值<br />
<code>IN next_page_id</code> : 查询下页的索引，如果为空或null，则是查询首页<br />
<code>IN num_per_page</code> : 每页的返回数据条数<br />
<strong>返回值：</strong><br />
成功返回0，失败返回非0    </p>
</li>
<li>
<p><code>int search_value_range_pagination(const std::string &amp;database, const std::string &amp;key, float start, float end, const std::string &amp;next_seq, int num_per_page)</code><br />
<strong>描述：</strong><br />
请求database数据库，搜索内容符合关键字key的内容在[start, end]之间的所有记录，每页num_per_page个数据，next_page为分页查询索引，如果为null或空字符串，则是查询第一页的数据，成功返回0，失败返回非0。developers调用get_result方法获取查询结果，查询结果为符合条件的记录项的内容，调用get_next_page_id获取下页的查询索引<br />
<strong>参数：</strong><br />
<code>IN database</code> : 请求的数据库<br />
<code>IN key</code> : 搜索关键字<br />
<code>IN start</code>  : 最小值<br />
<code>IN end</code>  : 最大值<br />
<code>IN next_page_id</code> : 查询下页的索引，如果为空或null，则是查询首页<br />
<code>IN num_per_page</code> : 每页的返回数据条数<br />
<strong>返回值：</strong><br />
成功返回0，失败返回非0    </p>
</li>
<li>
<p><code>int list_all(const std::string &amp;database)</code><br />
<strong>描述：</strong><br />
请求database数据库，列出所有的key，成功返回0，失败返回非0。developers调用get_result方法获取查询结果，查询结果为符合条件的记录项的名字<br />
<strong>参数：</strong><br />
<code>IN database</code> : 请求的数据库<br />
<strong>返回值：</strong><br />
成功返回0，失败返回非0   </p>
</li>
<li>
<p><code>int search_or(const std::string &amp;database, dsdb_search_cond &amp; conditions)</code><br />
<strong>描述：</strong><br />
请求database数据库，搜索内容符合conds中任何一个条件的记录，成功返回0，失败返回非0。developers调用get_result方法获取查询结果，查询结果为符合条件的所有记录项<br />
<strong>参数：</strong><br />
<code>IN database</code> : 请求的数据库<br />
<code>IN conds</code> : 查询条件列表<br />
<strong>返回值：</strong><br />
成功返回0，失败返回非0  </p>
</li>
<li>
<p><code>int search_and(const std::string &amp;database, dsdb_search_cond &amp; conditions)</code><br />
<strong>描述：</strong><br />
请求database数据库，搜索内容符合conds中所有条件的记录，成功返回0，失败返回非0。developers调用get_result方法获取查询结果，查询结果为符合条件的所有记录项<br />
<strong>参数：</strong>
<code>IN database</code> : 请求的数据库<br />
<code>IN conds</code> : 查询条件列表<br />
<strong>返回值：</strong><br />
成功返回0，失败返回非0   </p>
</li>
<li>
<p><code>int search_or_pagination(const std::string &amp;database, dsdb_search_cond &amp; conditions, const std::string &amp;next_seq, int num_per_page)</code><br />
<strong>描述：</strong><br />
请求database数据库，分页搜索内容符合conds中任何一个条件的记录，搜索的page索引为next_pag, 每页返回num_per_page个数据，成功返回0，失败返回非0。developers调用get_result方法获取查询结果，查询结果为符合条件的所有记录项，调用get_next_page_id获取下页的查询索引<br />
<strong>参数：</strong><br />
<code>IN database</code> : 请求的数据库<br />
<code>IN conds</code> : 查询条件列表<br />
<code>IN next_pag</code> : 分页查询索引<br />
<code>IN num_per_page</code> : 每页返回的数据个数<br />
<strong>返回值：</strong><br />
成功返回0，失败返回非0   </p>
</li>
<li>
<p><code>int search_and_pagination(const std::string &amp;database, dsdb_search_cond &amp; conditions, const std::string &amp;next_seq, int num_per_page)</code><br />
<strong>描述：</strong><br />
请求database数据库，分页搜索内容符合conds中所有条件的记录，搜索的page索引为next_pag, 每页返回num_per_page个数据，成功返回0，失败返回非0。developers调用get_result方法获取查询结果，查询结果为符合条件的所有记录项，调用get_next_page_id获取下页的查询索引<br />
<strong>参数：</strong>
<code>IN database</code> : 请求的数据库<br />
<code>IN conds</code> : 查询条件列表<br />
<code>IN next_pag</code> : 分页查询索引<br />
<code>IN num_per_page</code> : 每页返回的数据个数<br />
<strong>返回值：</strong><br />
成功返回0，失败返回非0  </p>
</li>
<li>
<p><code>int search_value_or(const std::string &amp;database, dsdb_search_cond &amp; conditions)</code><br />
<strong>描述：</strong><br />
请求database数据库，搜索内容符合conds中任何一个条件的记录，成功返回0，失败返回非0。developers调用get_result方法获取查询结果，查询结果为符合条件的所有记录项的内容<br />
<strong>参数：</strong><br />
<code>IN database</code> : 请求的数据库<br />
<code>IN conds</code> : 查询条件列表<br />
<strong>返回值：</strong><br />
成功返回0，失败返回非0  </p>
</li>
<li>
<p><code>int search_value_and(const std::string &amp;database, dsdb_search_cond &amp; conditions)</code><br />
<strong>描述：</strong><br />
请求database数据库，搜索内容符合conds中所有条件的记录，成功返回0，失败返回非0。developers调用get_result方法获取查询结果，查询结果为符合条件的所有记录项的内容<br />
<strong>参数：</strong><br />
<code>IN database</code> : 请求的数据库<br />
<code>IN conds</code> : 查询条件列表<br />
<strong>返回值：</strong><br />
成功返回0，失败返回非0   </p>
</li>
<li>
<p><code>int search_value_or_pagination(const std::string &amp;database, dsdb_search_cond &amp; conditions, const std::string &amp;next_seq, int num_per_page)</code><br />
<strong>描述：</strong><br />
请求database数据库，分页搜索内容符合conds中任何一个条件的记录，搜索的page索引为next_pag, 每页返回num_per_page个数据，成功返回0，失败返回非0。developers调用get_result方法获取查询结果，查询结果为符合条件的所有记录项的内容，调用get_next_page_id获取下页的查询索引<br />
<strong>参数：</strong><br />
<code>IN database</code> : 请求的数据库<br />
<code>IN conds</code> : 查询条件列表<br />
<code>IN next_pag</code> : 分页查询索引<br />
<code>IN num_per_page</code> : 每页返回的数据个数<br />
<strong>返回值：</strong><br />
成功返回0，失败返回非0   </p>
</li>
<li><code>int search_value_and_pagination(const std::string &amp;database, dsdb_search_cond &amp; conditions, const std::string &amp;next_seq, int num_per_page)</code><br />
<strong>描述：</strong><br />
请求database数据库，分页搜索内容符合conds中所有条件的记录，搜索的page索引为next_pag, 每页返回num_per_page个数据，成功返回0，失败返回非0。developers调用get_result方法获取查询结果，查询结果为符合条件的所有记录项的内容，调用get_next_page_id获取下页的查询索引<br />
<strong>参数：</strong>
<code>IN database</code> : 请求的数据库<br />
<code>IN conds</code> : 查询条件列表<br />
<code>IN next_pag</code> : 分页查询索引<br />
<code>IN num_per_page</code> : 每页返回的数据个数<br />
<strong>返回值：</strong><br />
成功返回0，失败返回非0</li>
</ol>
<h2 id="dsdb_search_cond-">dsdb_search_cond 类</h2>
<p>dac cloud api 支持用户按组合条件查询，dsd_search_cond类就是为了方便developers按条件查询dsdb数据库</p>
<h3 id="-14">名称空间</h3>
<p>dsd_search_cond 类在dsd_cloud中 </p>
<h3 id="-15">属性</h3>
<p>请参见相关方法</p>
<h3 id="-16">方法</h3>
<ol>
<li>
<p><code>dsdb_search_cond()</code><br />
<strong>描述：</strong><br />
初始化一个Dsdb_search_cond的实例<br />
<strong>参数：</strong><br />
<strong>返回值：</strong>    </p>
</li>
<li>
<p><code>int dsdb_cond_insert(const std::string &amp;key, const std::string &amp;value )</code><br />
<strong>描述：</strong><br />
插入一个key=value的查询条件<br />
<strong>参数：</strong><br />
<code>IN key</code> : 搜索条件的关键字key<br />
<code>IN  value</code> ： 关键字的内容<br />
<strong>返回值：</strong>   </p>
</li>
<li>
<p><code>int dsdb_cond_insert(const std::string &amp;key, float value )</code><br />
<strong>描述：</strong><br />
插入一个key=value的查询条件<br />
<strong>参数：</strong><br />
<code>IN key</code> : 搜索条件的关键字key<br />
<code>IN  value</code> ： 关键字的内容<br />
<strong>返回值：</strong>    </p>
</li>
<li>
<p><code>int dsdb_cond_insert(const std::string &amp;key, const std::string &amp;start, const std::string &amp;end)</code><br />
<strong>描述：</strong><br />
插入一个key的值在[start, end]之间的条件<br />
<strong>参数：</strong><br />
<code>IN key</code> : 搜索条件的关键字key<br />
<code>IN  start</code> ： 最小值<br />
<code>IN end</code> : 最大值<br />
<strong>返回值：</strong> </p>
</li>
<li><code>int dsdb_cond_insert(const std::string &amp;key, float start, float end)</code><br />
<strong>描述：</strong><br />
插入一个key的值在[start, end]之间的条件
<strong>参数：</strong>
<code>IN key</code> : 搜索条件的关键字key<br />
<code>IN  start</code> ： 最小值<br />
<code>IN end</code> : 最大值<br />
<strong>返回值：</strong></li>
</ol>
<h2 id="dsd_redis-">dsd_redis 类</h2>
<p>Dsd dac cloud api 提供了简单的访问redis数据库的方法。</p>
<h3 id="-17">名称空间</h3>
<p>Dsd_redis 类在dsd_cloud中 </p>
<h3 id="-18">属性</h3>
<p>请参见相关方法</p>
<h3 id="-19">方法</h3>
<ol>
<li>
<p><code>dsd_redis(API m)</code><br />
<strong>描述：</strong><br />
实例化Dsd_redis类，必须传入一个API实例<br />
<strong>参数：</strong>
<code>IN API m</code> : 实例化Dsd_redis类所需要的API 实例<br />
<strong>返回值：</strong><br />
无   </p>
</li>
<li>
<p><code>dsd_redis_reply dsd_redis_exe execute(const string serv_name, const string cmd)</code><br />
<strong>描述：</strong><br />
请求redis数据库serv_name,执行cmd命令<br />
<strong>参数：</strong><br />
<code>IN serv_name</code> : 数据库<br />
<code>IN cmd</code> : 待执行的命令<br />
<strong>返回值：</strong><br />
返回dsd_redis_reply结构体  </p>
</li>
<li><code>dsd_redis_reply execute_transaction(const string serv_name,  list&lt; string&gt; cmds)</code><br />
<strong>描述：</strong><br />
请求redis数据库serv_name, 以事务的方式执行cmds命令列表<br />
<strong>参数：</strong><br />
<code>IN serv_name</code> : 数据库<br />
<code>IN cmd</code> : 待执行的命令列表<br />
<strong>返回值：</strong><br />
返回dsd_redis_reply结构体。  </li>
</ol>
<h2 id="dsd_redis_reply-">dsd_redis_reply 结构体</h2>
<p>该结构体格式如下：  </p>
<pre><code class="language-c">{
   int err;
   void * reply;
   int reply_len;
} dsd_redis_reply;</code></pre>
<p>应用开发者调用redis数据库接口函数后要先判断err，如果为0，则成功，非0则失败。reply表示返回内容，reply_len表示返回内容的长度。  </p>
      </div>

              <div class="tract"><img src="/images/tract.png"/></div>
            <div class="clearfix"></div>
      <div class="scroll" id="scroll" style="display:none;">
			     <img src="/images/top.png"/>
		  </div>
    </div>
  </div>
  <script>hljs.initHighlightingOnLoad();</script>
</body>

</html>
