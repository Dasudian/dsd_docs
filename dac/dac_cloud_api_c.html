<!DOCTYPE html>
<html lang="zh">

  <head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta name="description" content="大数点物联网开发者平台文档，基于大数点物联网平台，帮助开发者快速构建物联网应用">
    <title>DAC C API</title>
    <link rel="icon" href="/images/favicon.ico" type="image/x-icon">
    <link href="/css/bootstrap.min.css" rel="stylesheet">
    <link href="/css/app.css" rel="stylesheet">
    <link href="/css/doc.css" rel="stylesheet">
    <link href="//cdn.bootcss.com/highlight.js/9.2.0/styles/dark.min.css" rel="stylesheet">
    <script src="/js/jquery.js"></script>
    <script src="/js/bootstrap.min.js"></script>
    <script src="/js/common.js"></script>
    <script src="//cdn.bootcss.com/highlight.js/9.2.0/highlight.min.js"></script>
    <script>
      $(function() {
        // $(".document .side_left ul li a").click(function() {
        //   $(".document .side_left ul li a").removeClass("active");
        //   $(this).addClass("active");
        // })
        $(".menu1>li>a.fold").click(function(){
				  $(".menu1 a.fold").css("background-image","url(/images/number_down.png)");
				  $(".menu2,.menu3").slideUp();
			  })
			  $(".menu2>li>a.fold").click(function(){
          $(".menu2 a.fold").css("background-image","url(/images/number_down.png)");
          $(".menu3").slideUp();
        })
        $(".fold").click(function() {
          if ($(this).next("ul").is(":hidden")) {
            $(this).css("background-image", "url(/images/number_up.png)");
            $(this).next("ul").slideDown();
          } else {
            $(this).css("background-image", "url(/images/number_down.png)");
            $(this).next("ul").slideUp();
          }
        })
      })
      $(function(){
			  $(".side_right").scroll( function() { 
				  var scrollValue=$(".side_right").scrollTop();
				  scrollValue > 100 ? $('div[class=scroll]').fadeIn():$('div[class=scroll]').fadeOut();
			  });	
			  $('#scroll').click(function(){
				  $(".side_right").animate({scrollTop:0},200);	
			  });	
		  })
    </script>
    <link href='http://fonts.useso.com/css?family=Open+Sans:300|Source+Code+Pro:400' rel='stylesheet' type='text/css'>
  </head>

  <body>
    <nav class="navbar navbar-default">
      <div class="container-fluid">
        <div class="navbar-header">
          <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#bs-example-navbar-collapse-1" aria-expanded="false">
            <span class="sr-only">Toggle navigation</span>
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
          </button>
          <a class="navbar-brand" href="/"><img src="/images/logo.png"/></a>
        </div>

        <div class="collapse navbar-collapse" id="bs-example-navbar-collapse-1">
          <ul class="nav navbar-nav navbar-right">
            <li><a href="http://dasudian.com/solution" >解决方案</a></li>
            <li><a href="/" >文档</a></li>
            <li><a href="http://dasudian.com/price" >定价</a></li>
            <li><a href="https://www.github.com/Dasudian"  target="_blank" >社区</a></li>
            <li><a href="https://dev.dasudian.com/login/view" class="btn-small">登录</a></li>
            <li><a href="https://dev.dasudian.com/sign_up/view" class="btn-small">注册</a></li>
          </ul>
        </div>
      </div>
    </nav>

    <div class="container-fluid0 document">
      <div class="side_left">
        <ul class="menu1">
          <li><a class="fold">服务集成指南</a>
            <ul class="menu2" >
              <li><a id="srvintegrate-index" class="" href="/integration-dev/index.html">服务集成</a></li>
              <li><a class="fold">IM即时消息服务</a>
                <ul class="menu3" >
                  <li><a id="srvintegrate-im-android" class="" href="/integration-dev/im/integrate-im-android.html">Android上集成IM功能</a></li>
                  <li><a id="srvintegrate-im-ios" class="" href="/integration-dev/im/integrate-im-ios.html">iOS上集成IM功能</a></li>
                </ul>
              </li>
            </ul>
          </li>
          <li><a class="fold">DS Database</a>
            <ul class="menu2" >
              <li><a id="dsdb-overview" class="" href="/dsdb/index.html">DSDB Overview</a></li>
              <li><a class="fold">Introduction</a>
                <ul class="menu3" >
                  <li><a id="dsdb-intro-overview" class="" href="/dsdb/introduction/index.html">Overview</a></li>
                  <li><a id="dsdb-intro-installation" class="" href="/dsdb/introduction/installation.html">Installation</a></li>
                  <li><a id="dsdb-intro-start" class="" href="/dsdb/introduction/getting_started.html">Getting Started</a></li>
                </ul>
              </li>
              <li><a class="fold">Administration</a>
                <ul class="menu3" >
                  <li><a id="dsdb-admin-overview" class="" href="/dsdb/administration/index.html">administration Overview</a></li>
                  <li><a id="dsdb-authent&amp;authori" class="" href="/dsdb/administration/authentication_and_authorization.html">Authentication&Authorization</a></li>
                  <li><a id="dsdb-backup&amp;restore" class="" href="/dsdb/administration/backup_and_restore.html">Backup&Restore</a></li>
                  <li><a id="dsdb-configuration" class="" href="/dsdb/administration/config.html">Configuration</a></li>
                  <li><a id="dsdb-logs" class="" href="/dsdb/administration/logs.html">Logs</a></li>
                  <li><a id="dsdb-monitoring" class="" href="/dsdb/administration/statistics.html">Server Monitoring</a></li>
                  <li><a id="dsdb-upgrade" class="" href="/dsdb/administration/upgrading.html">Upgrading</a></li>
                </ul>
              </li>
              <li><a class="fold">Clients</a>
                <ul class="menu3" >
                  <li><a id="dsdb-clients-overview" class="" href="/dsdb/clients/index.html">Clients Overview</a></li>
                  <li><a id="dsdb-clients-httpapi" class="" href="/dsdb/clients/api.html">HTTP API</a></li>
                </ul>
              </li>
              <li><a class="fold">Concepts</a>
                <ul class="menu3" >
                  <li><a id="dsdb-concepts-overview" class="" href="/dsdb/concepts/index.html">Concepts Overview</a></li>
                  <li><a id="dsdb-key-concepts" class="" href="/dsdb/concepts/key_concepts.html">Key Concepts</a></li>
                  <li><a id="dsdb-concepts-arch" class="" href="/dsdb/concepts/how_dsdb_works.html">Architecture</a></li>
                  <li><a id="dsdb-concepts-schema-data-layout" class="" href="/dsdb/concepts/schema_and_data_layout.html">Scheam Design</a></li>
                  <li><a id="dsdb-concepts-insights-tradeoffs" class="" href="/dsdb/concepts/insights_tradeoffs.html">Insights Tradeoffs</a></li>
                  <li><a id="dsdb-concepts-api-endpoints" class="" href="/dsdb/concepts/api.html">API Endpoints&Ports</a></li>
                  <li><a id="dsdb-concepts-storage-engine" class="" href="/dsdb/concepts/storage_engine.html">Storage Engine</a></li>
                  <li><a id="dsdb-concepts-glossary" class="" href="/dsdb/concepts/glossary.html">Glossary of Terms</a></li>
                  <li><a id="dsdb-concepts-vs-sql" class="" href="/dsdb/concepts/crosswalk.html">Comparison to SQL</a></li>
                </ul>
              </li>
              <li><a class="fold">Data Sources</a>
                <ul class="menu3" >
                  <li><a id="dsdb-datasource-diamond" class="" href="/dsdb/data_sources/diamond.html">Diamond</a></li>
                  <li><a id="dsdb-datasource-opentsdb" class="" href="/dsdb/data_sources/opentsdb.html">OpenTSDB</a></li>
                  <li><a id="dsdb-datasource-carbon" class="" href="/dsdb/data_sources/carbon.html">Carbon</a></li>
                  <li><a id="dsdb-datasource-collectd" class="" href="/dsdb/data_sources/collectd.html">Collectd</a></li>
                </ul>
              </li>
              <li><a class="fold">Guides</a>
                <ul class="menu3" >
                  <li><a id="dsdb-guides-clustering" class="" href="/dsdb/guides/clustering.html">Clustering</a></li>
                  <li><a id="dsdb-guides-ddr" class="" href="/dsdb/guides/downsampling_and_retention.html">Downsampling and Data Retention</a></li>
                  <li><a id="dsdb-guides-hsg" class="" href="/dsdb/guides/hardware_sizing.html">Hardware Sizing Guidelines</a></li>
                  <li><a id="dsdb-guides-querying" class="" href="/dsdb/guides/querying_data.html">Querying Data</a></li>
                  <li><a id="dsdb-guides-writing" class="" href="/dsdb/guides/writing_data.html">Writing Data</a></li>
                </ul>
              </li>
              <li><a class="fold">Query Language</a>
                <ul class="menu3" >
                  <li><a id="dsdb-querylang-overview" class="" href="/dsdb/query_language/index.html">Overview</a></li>
                  <li><a id="dsdb-querylang-dataexp" class="" href="/dsdb/query_language/data_exploration.html">Data Exploration</a></li>
                  <li><a id="dsdb-querylang-scheamexp" class="" href="/dsdb/query_language/schema_exploration.html">Schema Exploration</a></li>
                  <li><a id="dsdb-querylang-func" class="" href="/dsdb/query_language/functions.html">Functions</a></li>
                  <li><a id="dsdb-querylang-contq" class="" href="/dsdb/query_language/continuous_queries.html">Continuous Queries</a></li>
                  <li><a id="dsdb-querylang-spec" class="" href="/dsdb/query_language/spec.html">Query Language Reference</a></li>
                  <li><a id="dsdb-querylang-mgmt" class="" href="/dsdb/query_language/database_management.html">Database Management</a></li>
                  <li><a id="dsdb-querylang-math" class="" href="/dsdb/query_language/math_operators.html">Mathematical Operators</a></li>
                </ul>
              </li>
              <li><a class="fold">Sample Data</a>
                <ul class="menu3" >
                  <li><a id="dsdb-sampledata-down" class="" href="/dsdb/sample_data/data_download.html">Sample Data Download</a></li>
                </ul>
              </li>
              <li><a class="fold">Tools</a>
                <ul class="menu3" >
                  <li><a id="dsdb-tools-overview" class="" href="/dsdb/tools/index.html">Tools Overview</a></li>
                  <li><a id="dsdb-tools-shell" class="" href="/dsdb/tools/shell.html">CLI/Shell</a></li>
                  <li><a id="dsdb-tools-webadmin" class="" href="/dsdb/tools/web_admin.html">Web Admin Interface</a></li>
                  <li><a id="dsdb-tools-grafana" class="" href="/dsdb/tools/grafana.html">Grafana Dashboards</a></li>
                  <li><a id="dsdb-tools-telegraf" class="" href="/dsdb/tools/telegraf.html">Telegraf Metrics Collection</a></li>
                  <li><a id="dsdb-tools-chronograf" class="" href="/dsdb/tools/chronograf.html">Chronograf Dashboards</a></li>
                  <li><a id="dsdb-tools-kapacitor" class="" href="/dsdb/tools/kapacitor.html">Kapacitor Monitoring</a></li>
                </ul>
              </li>
              <li><a class="fold">Write Protocols</a>
                <ul class="menu3" >
                  <li><a id="dsdb-writepro-overview" class="" href="/dsdb/write_protocols/index.html">Overview</a></li>
                  <li><a id="dsdb-writepro-line" class="" href="/dsdb/write_protocols/line.html">Line Protocol</a></li>
                  <li><a id="dsdb-writepro-syntax" class="" href="/dsdb/write_protocols/write_syntax.html">Write Syntax</a></li>
                  <li><a id="dsdb-writepro-json" class="" href="/dsdb/write_protocols/json.html">JSON Protocol</a></li>
                  <li><a id="dsdb-writepro-udp" class="" href="/dsdb/write_protocols/udp.html">Service - UDP</a></li>
                  <li><a id="dsdb-writepro-graphite" class="" href="/dsdb/write_protocols/graphite.html">Service - Graphite</a></li>
                  <li><a id="dsdb-writepro-opentsdb" class="" href="/dsdb/write_protocols/opentsdb.html">Servcie - OpenTSDB</a></li>
                  <li><a id="dsdb-writepro-collectd" class="" href="/dsdb/write_protocols/collectd.html">Service - CollectD</a></li>
                </ul>
              </li>
              <li><a class="fold">Troubleshooting</a>
                <ul class="menu3" >
                  <li><a id="dsdb-troubleshoot-overview" class="" href="/dsdb/troubleshooting/index.html">Troubleshooting Overview</a></li>
                  <li><a id="dsdb-troubleshoot-fei" class="" href="/dsdb/troubleshooting/frequently_encountered_issues.html">Frequently Encountered Issues</a></li>
                  <li><a id="dsdb-troubleshoot-monitor" class="" href="/dsdb/troubleshooting/system_monitoring.html">System Monitoring</a></li>
                </ul>
              </li>
            </ul>
          </li>
          <li><a class="fold">DSD API Container(DAC)</a>
            <ul class="menu2" style="display: block;">
              <li><a id="dac-principal" class="" href="/dac/index.html">DAC介绍</a></li>
              <li><a id="dac-java-api" class="" href="/dac/dac_cloud_api_java.html">DAC Java API</a></li>
              <li><a id="dac-c-api" class="active" href="/dac/dac_cloud_api_c.html">DAC C API</a></li>
              <li><a id="dac-cpp-api" class="" href="/dac/dac_cloud_api_cpp.html">DAC C++ API</a></li>
            </ul>
          </li>
          <li><a class="fold">Data Hub</a>
            <ul class="menu2" >
              <li><a id="datahub-index" class="" href="/datahub/index.html">Data Hub Overview</a></li>
              <li><a class="fold">SDK</a>
                <ul class="menu3" >
                  <li><a id="datahub-sdk-js" class="" href="/datahub/sdk/javascript.html">JavaScript</a></li>
                  <li><a id="datahub-sdk-embededc" class="" href="/datahub/sdk/embeded_c.html">Embeded C</a></li>
                </ul>
              </li>
            </ul>
          </li>
        </ul>
    </div>

    <div class="side_right">
      <div class="doc">
        <h2 id="dac_cloud_api_c">DAC_CLOUD_API_C指导手册</h2>
<h3 id="">引言</h3>
<p>CLOUD_API_C提供了功能丰富但使用简单的API，用户无需关注性能负载均衡等，就可以实现丰富的http及其他类型的服务。  </p>
<h3 id="-1">安装环境</h3>
<p>ubuntu 14.04或14.10</p>
<h3 id="-2">编译方法</h3>
<ol>
<li>下载并解压SDK到指定目录   </li>
<li>修改工程的Makefile，添加CLOUD_API_C的头文件引用路径和动态库的链接路径<br />
<code>INCLUDE_DIR=dir</code><br />
<code>LIB_DIR=dir</code><br />
<code>CFLAGS+= -I$(INCLUDE_DIR) -g -O0 -fexceptions</code><br />
<code>LDFLAGS+= -L$(LIB_DIR) -ldsdcloud</code>  </li>
</ol>
<p>具体请参考下面的demo，/home/sea/SDK/dasudian_cloud-1.0.0是本机的API安装路径  </p>
<pre><code>INCLUDE_DIR=/home/sea/SDK/dasudian_cloud-1.0.0   
LIB_DIR=/home/sea/SDK/dasudian_cloud-1.0.0   
CFLAGS+= -I$(INCLUDE_DIR) -g -O0 -fexceptions   
LDFLAGS+= -L$(LIB_DIR) -ldsdcloud  dm_test： dm_test.o   
gcc -o dm_test dm_test.o $(CFLAGS) $(LDFLAGS) dm_test.o：dm_test.c   
gcc  -c dm_test.c $(CFLAGS)</code></pre>
<h3 id="cloud-api">CLOUD API使用方法</h3>
<p>developers 引用头文件<code>dsd_cloud.h</code>，调用如下的方法，实现负载均衡，性能分布等功能。 </p>
<ol>
<li>
<p><code>int dsd_cloud_initialize_thread_count(unsigned int * const thread_count)</code><br />
<strong>描述：</strong><br />
获取系统设置的与erlang虚拟机交互的最大句柄数，适用于通过多线程与erlang虚拟机交互。<br />
<strong>参数：</strong><br />
<code>INOUT thread_count</code> ：系统设置的与虚拟机交互的可分配最大句柄数<br />
<strong>返回值：</strong><br />
成功：0<br />
失败：非0</p>
</li>
<li>
<p><code>int dsd_cloud_initialize(dsd_cloud_instance_t * p, unsigned int const thread_index)</code><br />
<strong>描述：</strong><br />
初始化Dasudian Cloud API，一个service只能调用一次。<br />
<strong>参数：</strong><br />
<code>INOUT p</code> ：dsd_cloud_instance_t 结构体指针，该函数会修改p指向的内容<br />
<code>IN thread_index</code> ： 线程索引，从0开始，不能大于调用dsd_cloud_initialize_thread_count函数让系统分配的最大线程数<br />
<strong>返回值：</strong><br />
成功 ：0<br />
失败 ：非0   </p>
</li>
<li>
<p><code>int dsd_cloud_destroy(dsd_cloud_instance_t * p)</code><br />
<strong>描述：</strong><br />
反初始化cloud api ，当服务退出时需要调用该函数。<br />
<strong>参数：</strong><br />
<code>IN p</code> ：dsd_cloud_instance_t 结构体指针，该函数会修改p指向的内容<br />
<strong>返回值：</strong><br />
成功 ：0<br />
失败 ：非0  </p>
</li>
<li>
<p><code>int dsd_cloud_subscribe(dsd_cloud_instance_t * p, char const * const pattern, dsd_cloud_callback_t f)</code><br />
<strong>描述：</strong><br />
向服务器订阅一个服务，服务名为pattern ,支持简单正则表达式格式。当服务器收到对应的服务请求时，就转发到该API注册的回调函数f来执行<br />
<strong>参数：</strong><br />
<code>IN  p</code> ： 指向 dsd_cloud_initialize函数初始化的API实例<br />
<code>IN  pattern</code> ：服务名。支持简单的正则表达式，例如服务名为get*，那么服务器会把所有的get1,get2,geta等服务请求都会转到该API上<br />
<code>IN  f</code>： 服务注册的回调函数，当API收到服务请求后，就会回调该函数<br />
<strong>返回值：</strong><br />
成功 ：0<br />
失败 ：非0   </p>
</li>
<li>
<p><code>int dsd_cloud_unsubscribe(dsd_cloud_instance_t * p, char const * const pattern)</code><br />
<strong>描述：</strong><br />
取消一个已经注册的服务。<br />
<strong>参数：</strong><br />
<code>IN  p</code> ： 指向 dsd_cloud_initialize函数初始化的API实例。<br />
<code>IN  pattern</code> ：服务名<br />
<strong>返回值：</strong><br />
成功 ：0<br />
失败 ：非0   </p>
</li>
<li>
<p><code>int dsd_cloud_send_sync(dsd_cloud_instance_t * p, char const * const name, void const * const request, uint32_t const request_size)</code><br />
<strong>描述：</strong><br />
同步服务请求，向 服务名为name 的服务发起请求。该函数会阻塞直到目的服务返回消息或者阻塞定时器到时。<br />
<strong>参数：</strong><br />
<code>IN  p</code> ： 指向 dsd_cloud_initialize函数初始化的API实例<br />
<code>IN  name</code> ：请求的服务名<br />
<code>IN   request</code> ：请求的内容<br />
<code>IN   request_size</code> ：请求的内容长度<br />
<strong>返回值：</strong><br />
成功 ：0<br />
失败 ：非0   </p>
</li>
<li>
<p><code>int dsd_cloud_send_async(dsd_cloud_instance_t * p, char const * const name, void const * const request, uint32_t const request_size)</code><br />
<strong>描述：</strong><br />
异步服务请求，向 服务名为name 的服务发起请求。该函数会立即返回。如果需要获得对端的返回消息，需要调用dsd_cloud_recv_async来获取返回信息。<br />
<strong>参数：</strong><br />
<code>IN  p</code> ： 指向 dsd_cloud_initialize函数初始化的API实例<br />
<code>IN  name</code> ：请求的服务名<br />
<code>IN   request</code> ： 请求的内容<br />
<code>IN   request_size</code> ： 请求的内容长度<br />
<strong>返回值：</strong><br />
成功 ：0<br />
失败 ：非0  </p>
</li>
<li>
<p><code>int dsd_cloud_publish(dsd_cloud_instance_t * p, char const * const name, void const * const request, uint32_t const request_size)</code><br />
<strong>描述：</strong><br />
向所有订阅了 name服务的进程 发布 request信息。<br />
<strong>参数：</strong><br />
<code>IN  p</code> ： 本地instance，指向 dsd_cloud_initialize函数初始化的API实例<br />
<code>IN  name</code> ：发布的服务名<br />
<code>IN   request</code> ： 请求的内容<br />
<code>IN   request_size</code> ： 请求的内容长度<br />
<strong>返回值：</strong><br />
成功 ：0<br />
失败 ：非0   </p>
</li>
<li>
<p><code>int dsd_cloud_forward_sync(dsd_cloud_instance_t * p, char const * const name, void const * const request_info, uint32_t const request_info_size, void const * const request, uint32_t const request_size, uint32_t timeout, int8_t const priority, char const * const trans_id, char const * const pid, uint32_t const pid_size)</code><br />
<strong>描述：</strong><br />
同步转发服务请求至name描述的服务.<br />
<strong>参数：</strong><br />
<code>IN  p</code> ： 指向 dsd_cloud_initialize函数初始化的API实例<br />
<code>IN  name</code> ： 目的服务名<br />
<code>IN   request_info</code> ： 请求信息<br />
<code>IN   request_info_size</code> ： 请求信息的长度<br />
<code>IN   request</code> ：请求的内容<br />
<code>IN   request_size</code> ： 请求的长度<br />
<code>IN   timeout</code> ：该方法掉用的阻塞时间<br />
<code>IN   priority</code> ：转发请求的优先级<br />
<code>IN   trans_id</code> ：转发服务的id<br />
<code>IN   pid</code> ： 本服务的pid<br />
<code>IN   pid_size</code> ：pid 长度<br />
<strong>返回值：</strong><br />
成功：0<br />
失败：非0  </p>
</li>
<li>
<p><code>int dsd_cloud_return(dsd_cloud_instance_t * p, int const command, char const * const name, char const * const pattern, void const * const response_info, uint32_t const response_info_size, void const * const response, uint32_t const response_size, uint32_t timeout, char const * const trans_id, char const * const pid, uint32_t const pid_size)</code><br />
<strong>描述：</strong><br />
回复 request请求。<br />
<strong>参数：</strong><br />
<code>IN  p</code> ： 指向 dsd_cloud_initialize函数初始化的API实例<br />
<code>IN command</code> ： 调用方式，1：同步回复；0：异步回复。通常与请求的保持一致<br />
<code>IN  name</code> ： 本地服务名<br />
<code>IN  pattern</code> ：请求服务名<br />
<code>IN  response_info</code> ： 响应信息<br />
<code>IN   response_info_size</code> ： 响应信息的长度<br />
<code>IN  response</code> ：响应的内容<br />
<code>IN  response_size</code> ： 响应的长度<br />
<code>IN   timeout</code> ：该方法掉用的阻塞时间<br />
<code>IN   trans_id</code> ：转发服务的id<br />
<code>IN   pid</code> ： 本服务的pid<br />
<code>IN   pid_size</code> ：pid 长度<br />
<strong>返回值：</strong><br />
成功：0<br />
失败：非0     </p>
</li>
<li>
<p><code>int dsd_cloud_poll(dsd_cloud_instance_t * p, int timeout)</code><br />
<strong>描述：</strong><br />
服务轮询 是否有新的请求<br />
<strong>参数：</strong><br />
<code>IN p</code> ：本地instance 指向 dsd_cloud_initialize函数初始化的API实例<br />
<code>IN timeout</code> ：轮询周期,默认为-1，即表示阻塞直到下一个服务到来。如果设置为0，表示不阻塞，可能会导致CPU占用率过高<br />
<strong>返回值：</strong><br />
0：成功<br />
非0：失败   </p>
</li>
<li>
<p><code>char* dsd_cloud_get_response(dsd_cloud_instance_t * p)</code><br />
<strong>描述：</strong><br />
本地服务发出请求后，调用此函数来获取请求的回复内容<br />
<strong>参数：</strong><br />
<code>IN p</code>  ： 本地instance，指向 dsd_cloud_initialize函数初始化的API实例<br />
<strong>返回值：</strong><br />
返回指向响应内容的指针   </p>
</li>
<li>
<p><code>int dsd_cloud_get_response_size(dsd_cloud_instance_t * p)</code><br />
<strong>描述：</strong><br />
本地服务发出请求后，调用此函数来获取请求的回复内容长度<br />
<strong>参数：</strong><br />
<code>IN p</code>  ： 本地instance，指向 dsd_cloud_initialize函数初始化的API实例<br />
<strong>返回值：</strong><br />
返回响应内容的长度   </p>
</li>
<li>
<p><code>int dsd_cloud_get_response_info(dsd_cloud_instance_t * p)</code><br />
<strong>描述：</strong><br />
本地服务发出请求后，调用此函数来获取请求的回复信息<br />
<strong>参数：</strong><br />
<code>IN p</code>  ： 本地instance，指向 dsd_cloud_initialize函数初始化的API实例<br />
<strong>返回值：</strong><br />
返回指向响应信息的指针   </p>
</li>
<li>
<p><code>int dsd_cloud_get_response_info_size(dsd_cloud_instance_t * p)</code><br />
<strong>描述：</strong><br />
本地服务发出请求后，调用此函数来获取回复信息的长度<br />
<strong>参数：</strong><br />
<code>IN p</code>  ： 本地instance，指向 dsd_cloud_initialize函数初始化的API实例<br />
<strong>返回值：</strong><br />
返回响应信息长度   </p>
</li>
</ol>
<h3 id="memcached">MemCached数据库访问方法</h3>
<p>dsd dac cloud api 提供了非常丰富的访问memcached的API，开发者无需安装及维护MemCached数据库。开发者需要引用头文件<code>dsd_mchdb.h</code>。具体的函数如下：  </p>
<ol>
<li>
<p><code>char * dsd_memCachDB_get_key(dsd_cloud_instance_t * api, char * service_name , char * key)</code><br />
<strong>描述：</strong><br />
调用 服务名为service_name 的memcached服务，获取key的值。<br />
<strong>参数：</strong><br />
<code>IN api</code>  ： 本地instance，指向 dsd_cloud_initialize函数初始化的API实例<br />
<code>IN service_name</code> ： memcached 的服务名<br />
<code>IN key</code> ： 查询的key<br />
<strong>返回值：</strong><br />
key的值，如果没有该key则返回ＮＵＬＬ   </p>
</li>
<li>
<p><code>char * dsd_memCachDB_get_manykey(dsd_cloud_instance_t * api, char * service_name, char ** keys, int n)</code><br />
<strong>描述：</strong><br />
调用 服务名为service_name 的memcached服务，一次获取多个key的值。<br />
<strong>参数：</strong><br />
<code>IN api</code>  ： 本地instance，指向 dsd_cloud_initialize函数初始化的API实例<br />
<code>IN service_name</code> ： memcached 的服务名<br />
<code>IN keys</code>： 查询的key列表，此参数为一个二维数组<br />
<code>IN n</code>  ： key 的数量<br />
<strong>返回值：</strong><br />
查询到的key的值   </p>
</li>
<li>
<p><code>int  dsd_memCachDB_add_key(dsd_cloud_instance_t * api, char * service_name , char * key,char * value)</code><br />
<strong>描述：</strong><br />
调用 服务名为service_name 的memcached服务，添加一个key，值为value。<br />
<strong>参数：</strong><br />
<code>IN api</code>  ： 本地instance，指向 dsd_cloud_initialize函数初始化的API实例<br />
<code>IN service_name</code> ： memcached 的服务名<br />
<code>IN key</code> ： 需要添加的key名<br />
<code>IN vlaue</code> ：key的值<br />
<strong>返回值：</strong><br />
成功：０<br />
失败：非０   </p>
</li>
<li>
<p><code>int dsd_memCachDB_add_key_expiredTime(dsd_cloud_instance_t * api, char * service_name , char * key, char * value, int expire_time)</code><br />
<strong>描述：</strong><br />
调用 服务名为service_name 的memcached服务，添加一个key，值为value,有效期为expire_time。<br />
<strong>参数：</strong><br />
<code>IN api</code>  ： 本地instance，指向 dsd_cloud_initialize函数初始化的API实例<br />
<code>IN service_name</code> ： memcached 的服务名<br />
<code>IN key</code> ： 需要添加的key名<br />
<code>IN vlaue</code> ：key的值<br />
<code>IN expire_time</code> ： key的有效期<br />
<strong>返回值：</strong><br />
成功：０<br />
失败：非０   </p>
</li>
<li>
<p><code>int dsd_memCachDB_set_key(dsd_cloud_instance_t * api, char * service_name , char * key, char * value)</code><br />
<strong>描述：</strong><br />
调用 服务名为service_name 的memcached服务，修改key的值为value<br />
<strong>参数：</strong><br />
<code>IN api</code>  ： 本地instance，指向 dsd_cloud_initialize函数初始化的API实例<br />
<code>IN service_name</code> ： memcached 的服务名<br />
<code>IN key</code> ： 需要设置的key名<br />
<code>IN vlaue</code> ：key的值<br />
<strong>返回值：</strong><br />
成功：０<br />
失败：非０   </p>
</li>
<li>
<p><code>int dsd_memCachDB_set_key_expiredTime(dsd_cloud_instance_t * api, char * service_name, char * key, char * value, int expire_time)</code><br />
<strong>描述：</strong><br />
调用 服务名为service_name 的memcached服务，修改key的值为value，有效期为expire_time<br />
<strong>参数：</strong><br />
<code>IN api</code>  ： 本地instance，指向 dsd_cloud_initialize函数初始化的API实例<br />
<code>IN service_name</code> ： memcached 的服务名<br />
<code>IN key</code> ： 需要设置的key名<br />
<code>IN vlaue</code> ：key的值<br />
<code>IN expire_time</code> ： key的有效期 ，单位秒<br />
<strong>返回值：</strong><br />
成功：０<br />
失败：非０   </p>
</li>
<li>
<p><code>int dsd_memCachDB_replace_key(dsd_cloud_instance_t * api, char * service_name, char * key, char * value)</code><br />
<strong>描述：</strong><br />
调用 服务名为service_name 的memcached服务，替换key的值为value<br />
<strong>参数：</strong><br />
<code>IN api</code>  ： 本地instance，指向 dsd_cloud_initialize函数初始化的API实例<br />
<code>IN service_name</code> ： memcached 的服务名<br />
<code>IN key</code> ： 需要设置的key名<br />
<code>IN vlaue</code> ：key的值<br />
<strong>返回值：</strong><br />
成功：０<br />
失败：非０   </p>
</li>
<li>
<p><code>int dsd_memCachDB_delete_key(dsd_cloud_instance_t * api, char * service_name , char * key)</code><br />
<strong>描述：</strong><br />
调用 服务名为service_name 的memcached服务，删除某个key<br />
<strong>参数：</strong><br />
<code>IN api</code>  ： 本地instance，指向 dsd_cloud_initialize函数初始化的API实例<br />
<code>IN service_name</code> ： memcached 的服务名<br />
<code>IN key</code> ： 需要设置的key名<br />
<strong>返回值：</strong><br />
成功：０<br />
失败：非０   </p>
</li>
<li>
<p><code>int dsd_memCachDB_increment_key(dsd_cloud_instance_t * api, char * service_name , char * key, int inc)</code><br />
<strong>描述：</strong><br />
调用 服务名为service_name 的memcached服务，给key的值加上增量inc,该函数只对整形值有效，否则报错。<br />
<strong>参数：</strong><br />
<code>IN api</code>  ： 本地instance，指向 dsd_cloud_initialize函数初始化的API实例<br />
<code>IN service_name</code> ： memcached 的服务名<br />
<code>IN key</code> ： 需要设置的key名<br />
<code>IN inc</code> ： 增量<br />
<strong>返回值：</strong><br />
成功：０<br />
失败：非０   </p>
</li>
<li>
<p><code>int dsd_memCachDB_decrement_key(dsd_cloud_instance_t * api, char * service_name , char * key, int dec)</code><br />
<strong>描述：</strong><br />
调用 服务名为service_name 的memcached服务，给key的值减去inc,该函数只对整形值有效，否则报错。<br />
<strong>参数：</strong><br />
<code>IN api</code>  ： 本地instance，指向 dsd_cloud_initialize函数初始化的API实例<br />
<code>IN service_name</code> ： memcached 的服务名<br />
<code>IN key</code> ： 需要设置的key名<br />
<code>IN dec</code> ： 减量<br />
<strong>返回值：</strong><br />
成功：０<br />
失败：非０   </p>
</li>
<li>
<p><code>dsd_memCachDB_prepend_key(dsd_cloud_instance_t * api, char * service_name, char * key, char * value)</code><br />
<strong>描述：</strong><br />
调用 服务名为service_name 的memcached服务，修改key的值，加上前缀value.<br />
<strong>参数：</strong><br />
<code>IN api</code>  ： 本地instance，指向 dsd_cloud_initialize函数初始化的API实例<br />
<code>IN service_name</code> ： memcached 的服务名<br />
<code>IN key</code> ： 需要设置的key名<br />
<code>IN value</code> ：　需要添加的前缀<br />
<strong>返回值：</strong><br />
成功：０<br />
失败：非０   </p>
</li>
<li>
<p><code>dsd_memCachDB_append_key(dsd_cloud_instance_t * api, char * service_name , char * key, char * value)</code><br />
<strong>描述：</strong><br />
调用 服务名为service_name 的memcached服务，修改key的值，加上后缀value.<br />
<strong>参数：</strong><br />
<code>IN api</code>  ： 本地instance，指向 dsd_cloud_initialize函数初始化的API实例<br />
<code>IN service_name</code> ： memcached 的服务名<br />
<code>IN key</code> ： 需要设置的key名<br />
<code>IN value</code> ：　需要添加的后缀<br />
<strong>返回值：</strong><br />
成功：０<br />
失败：非０   </p>
</li>
<li>
<p><code>char* dsd_memCachDB_version(dsd_cloud_instance_t * api, char * service_name)</code><br />
<strong>描述：</strong><br />
调用 服务名为service_name 的memcached服务，获取数据库版本号
<strong>参数：</strong><br />
<code>IN api</code>  ： 本地instance，指向 dsd_cloud_initialize函数初始化的API实例<br />
<code>IN service_name</code> ： memcached 的服务名<br />
<strong>返回值：</strong><br />
返回数据库的版本号</p>
</li>
<li><code>int dsd_memCachDB_flush(dsd_cloud_instance_t * api, char * service_name)</code><br />
<strong>描述：</strong><br />
调用 服务名为service_name 的memcached服务，清空数据库所有内容
<strong>参数：</strong><br />
<code>IN api</code>  ： 本地instance，指向 dsd_cloud_initialize函数初始化的API实例<br />
<code>IN service_name</code> ： memcached 的服务名<br />
<strong>返回值：</strong><br />
清空数据库 </li>
</ol>
<h2 id="redis">Redis数据库访问方法</h2>
<p>dsd dac cloud api 提供了简单易用的访问redis的API，开发者无需安装及维护redis数据库。开发者需要引用头文件dsd_redis.h。具体的函数如下：   </p>
<ol>
<li>
<p><code>dsd_redis_reply dsd_redis_exe(dsd_cloud_instance_t * api, char * service_name, char * cmd)</code><br />
<strong>描述：</strong><br />
调用 服务名为service_name 的redis服务<br />
<strong>参数：</strong><br />
<code>IN api</code>  ： 本地instance，指向 dsd_cloud_initialize函数初始化的API实例<br />
<code>IN service_name</code> ： redis的服务名<br />
<code>IN cmd</code> ：redis执行命令<br />
<strong>返回值：</strong><br />
返回一个dsd_redis_reply的结构体，结构体如下：   </p>
<pre><code class="language-c">｛   
　　int err;　      //错误码，０：成功；非０：失败   
       void * reply;   //返回内容   
      int reply_len;　//返回内容的长度   
｝</code></pre>
<p>客户端需要先判断err,然后在获取返回值的长度。   </p>
</li>
<li><code>dsd_redis_reply dsd_redis_exe(dsd_cloud_instance_t *api ,char *service_name , int cmdc,char **cmds)</code><br />
<strong>描述：</strong><br />
调用服务名为service_name的redis 服务，以事务方式一次执行多条命令<br />
<strong>参数：</strong><br />
<code>IN api</code>  ： 本地instance，指向 dsd_cloud_initialize函数初始化的API实例<br />
<code>IN service_name</code> ： redis 的服务名<br />
<code>IN key</code> ： 所有命令的数<br />
<code>IN value</code> ：　指向所有命令。<br />
<strong>返回值：</strong><br />
返回一个dsd_redis_reply的结构体，结构体如下：   
<pre><code class="language-c">｛   
  int err;　      //错误码，０：成功；非０：失败   
  void * reply;   //返回内容   
  int reply_len;　//返回内容的长度   
｝</code></pre>
<p>客户端需要先判断err,然后在获取返回值的长度。  </p></li>
</ol>
<h3 id="dsdb">Dsdb数据库访问方法</h3>
<p>dsd dac cloud api 提供了丰富易用的访问Dsdb数据库的API，开发者无需安装及维护Dsdb数据库。开发者需要引用头文件<code>dsd_dsdb.h</code>。具体的函数如下： </p>
<h4 id="-3">结构体</h4>
<p>数据库查询接口返回数据格式：  </p>
<pre><code class="language-c">typedef struct dsdb_result_s
{
    int length;
    char ** result;
    char * next_page_id;
} dsdb_result_s</code></pre>
<p><code>char ** result</code> ： 返回结果，字符串数组，
<code>int length</code> ： 字符串的个数
<code>char * next_page_id</code> ： 分页查询时，下页的搜索id，如果没有，则为NULL</p>
<h4 id="-4">函数</h4>
<ol>
<li>
<p><code>int put(dsd_cloud_instance_t * p, char * database, char *key, char *value)</code><br />
<strong>描述：</strong><br />
向数据库database插入一个key，其值为value ,成功返回dsd_dsdb_success，失败返回 dsd_dsdb_error。当database或者key为空时，返回dsd_dsdb_error
<strong>参数：</strong><br />
<code>IN dsd_cloud_instance_t * p</code> ： 调用系统服务的client实例
<code>IN char* database</code> ：数据库名
<code>IN char * key</code> ：key名
<code>IN char * value</code> ：value
<strong>返回值：</strong><br />
成功： dsd_dsdb_success<br />
失败：dsd_dsdb_error        </p>
</li>
<li>
<p><code>dsdb_result_s* get(dsd_cloud_instance_t * p, char* database, char *key)</code><br />
<strong>描述：</strong><br />
从数据库database读取key的值。失败返回NULL，成功返回指向dsdb_result_s的结构体指针, 应用程序需要调用<code>void free_dsdb_result(dsdb_result_s *res)</code> 释放返回值，否则会导致内存泄露。<br />
<strong>参数：</strong>
<code>IN dsd_cloud_instance_t * p</code> ： 调用系统服务的client实例
<code>IN char* database</code> ：数据库名
<code>IN char * key</code> ：key名
<strong>返回值：</strong><br />
成功： dsdb_result_s指针，应用需要调用free_dsdb_result 释放该指针<br />
失败：NULL    </p>
</li>
<li>
<p><code>int delete_key(dsd_cloud_instance_t * p, char *database, char *key)</code><br />
<strong>描述：</strong><br />
从数据库database删除Key。成功返回dsd_dsdb_success，失败返回 dsd_dsdb_error。当database或者key为空时，返回dsd_dsdb_error<br />
<strong>参数：</strong><br />
<code>IN dsd_cloud_instance_t * p</code> ： 调用系统服务的client实例
<code>IN char* database</code> ：数据库名
<code>IN char * key</code> ：key名
<strong>返回值：</strong><br />
成功：dsd_dsdb_success<br />
失败：dsd_dsdb_error     </p>
</li>
<li>
<p><code>dsdb_result_s* search_number(dsd_cloud_instance_t * p, char * database, char *key, float value)</code><br />
<strong>描述：</strong><br />
从数据库database中搜索内容符合key=value这种模式的记录，查询结果为符合条件的记录名列表，失败返回NULL，成功返回dsdb_result_s指针。应用程序调用<code>void free_dsdb_result(dsdb_result_s *res)</code> 释放返回值，否则会导致内存泄露。<br />
<strong>参数：</strong><br />
<code>IN dsd_cloud_instance_t * p</code> ： 调用系统服务的client实例
<code>IN char* database</code> ：数据库名
<code>IN char * key</code> ：key名
<code>IN float value</code> ：value
<strong>返回值：</strong><br />
成功：dsdb_result_s指针，应用需要调用free_dsdb_result 释放该指针<br />
失败：NULL        </p>
</li>
<li>
<p><code>dsdb_result_s* search_string(dsd_cloud_instance_t * p, char * database, char *key, char* value)</code><br />
<strong>描述：</strong><br />
从数据库database中搜索内容符合key=value这种模式的记录，查询结果为符合条件的记录名列表，失败返回NULL，成功返回dsdb_result_s指针。应用程序调用<code>void free_dsdb_result(dsdb_result_s *res)</code> 释放返回值，否则会导致内存泄露。<br />
<strong>参数：</strong><br />
<code>IN dsd_cloud_instance_t * p</code> ： 调用系统服务的client实例<br />
<code>IN char* database</code> ：数据库名<br />
<code>IN char * key</code> ：key名<br />
<code>IN char * value</code> ：value<br />
<strong>返回值：</strong><br />
成功：dsdb_result_s指针，应用需要调用free_dsdb_result 释放该指针<br />
失败：NULL </p>
</li>
<li>
<p><code>dsdb_result_s* search_string_pagination(dsd_cloud_instance_t * p, char *database, char *key, char *value, char *next_seq, int num_per_page)</code><br />
描述：从数据库database中搜索内容符合key=value这种模式的记录，分页查询，即数据库每次只返回num_per_page个数据，同时返回查询下页数据的id, 查询结果为符合条件的记录名列表，失败返回NULL，成功返回dsdb_result_s指针。应用程序调用<code>void free_dsdb_result(dsdb_result_s *res)</code> 释放返回值，否则会导致内存泄露。<br />
<strong>参数：</strong><br />
<code>IN dsd_cloud_instance_t * p</code> ： 调用系统服务的client实例<br />
<code>IN char* database</code> ：数据库名<br />
<code>IN char * key</code> ：key名<br />
<code>IN char * value</code> ：value<br />
<code>IN char * next_seq</code> ： 搜索下页数据的id，如果为NULL或“0”，查询第一页数据。<br />
<code>IN int num_per_page</code> ：每页返回数据数量<br />
<strong>返回值：</strong><br />
成功：dsdb_result_s指针，应用需要调用free_dsdb_result 释放该指针<br />
失败：NULL    </p>
</li>
<li>
<p><code>dsdb_result_s* search_number_pagination(dsd_cloud_instance_t * p, char *database, char *key, float value, char *next_seq, int num_per_page)</code><br />
<strong>描述：</strong><br />
从数据库database中搜索内容符合key=value这种模式的记录，分页查询，即数据库每次只返回num_per_page个数据，同时返回查询下页数据的id, 查询结果为符合条件的记录名列表，失败返回NULL，成功返回dsdb_result_s指针。应用程序调用<code>void free_dsdb_result(dsdb_result_s *res)</code> 释放返回值，否则会导致内存泄露。<br />
<strong>参数：</strong><br />
<code>IN dsd_cloud_instance_t * p</code> ： 调用系统服务的client实例<br />
<code>IN char* database</code> ：数据库名<br />
<code>IN char * key</code> ：key名<br />
<code>IN float value</code> ：value<br />
<code>IN char * next_seq</code> ： 搜索下页数据的id，如果为NULL或“0”，查询第一页数据。<br />
<code>IN int num_per_page</code> ：每页返回数据数量<br />
<strong>返回值：</strong><br />
成功：dsdb_result_s指针，应用需要调用free_dsdb_result 释放该指针<br />
失败：NULL      </p>
</li>
<li>
<p><code>dsdb_result_s* search_string_range(dsd_cloud_instance_t * p, char *database, char *key, char *start, char *end)</code><br />
<strong>描述：</strong><br />
从数据库database中搜索内容符合key的值在[start,end]之间的记录，查询结果为符合条件的记录名列表，失败返回NULL，成功返回dsdb_result_s指针。应用程序调用<code>void free_dsdb_result(dsdb_result_s *res)</code> 释放返回值，否则会导致内存泄露。<br />
<strong>参数：</strong><br />
<code>IN dsd_cloud_instance_t * p</code> ： 调用系统服务的client实例<br />
<code>IN char* database</code> ：数据库名<br />
<code>IN char * key</code> ：key名<br />
<code>IN char *start</code> ：最小值<br />
<code>IN char *end</code> ：最大值<br />
<strong>返回值：</strong><br />
成功：dsdb_result_s指针，应用需要调用free_dsdb_result 释放该指针<br />
失败：NULL </p>
</li>
<li>
<p><code>dsdb_result_s* search_number_range(dsd_cloud_instance_t * p, char *database, char *key, float start, float end)</code><br />
<strong>描述：</strong><br />
从数据库database中搜索内容符合key的值在[start,end]之间的记录，查询结果为符合条件的记录名列表，失败返回NULL，成功返回dsdb_result_s指针。应用程序调用<code>void free_dsdb_result(dsdb_result_s *res)</code> 释放返回值，否则会导致内存泄露。<br />
<strong>参数：</strong><br />
<code>IN dsd_cloud_instance_t * p</code> ： 调用系统服务的client实例<br />
<code>IN char* database</code> ：数据库名<br />
<code>IN char * key</code> ：key名<br />
<code>IN float start</code> ：最小值<br />
<code>IN float end</code> ：最大值<br />
<strong>返回值：</strong><br />
成功：dsdb_result_s指针，应用需要调用free_dsdb_result 释放该指针<br />
失败：NULL    </p>
</li>
<li>
<p><code>dsdb_result_s* search_string_range_pagination(dsd_cloud_instance_t * p, char *database, char *key, char *start, char *end, char *next_seq, int num_per_page)</code><br />
<strong>描述：</strong><br />
从数据库database中搜索内容符合key的值在[start,end]之间的记录，分页查询，即数据库每次只返回num_per_page个数据，同时返回查询下页数据的id, 查询结果为符合条件的记录名列表，失败返回NULL，成功返回dsdb_result_s指针。应用程序调用<code>void free_dsdb_result(dsdb_result_s *res)</code> 释放返回值，否则会导致内存泄露。<br />
<strong>参数：</strong><br />
<code>IN dsd_cloud_instance_t * p</code> ： 调用系统服务的client实例<br />
<code>IN char* database</code> ：数据库名<br />
<code>IN char * key</code> ：key名<br />
<code>IN char *start</code> ：最小值<br />
<code>IN char *end</code> ：最大值<br />
<code>IN char * next_seq</code> ： 搜索下页数据的id，如果为NULL或“0”，查询第一页数据<br />
<code>IN int num_per_page</code> ：每页返回数据数量<br />
<strong>返回值：</strong><br />
成功：dsdb_result_s指针，应用需要调用free_dsdb_result 释放该指针<br />
失败：NULL  </p>
</li>
<li>
<p><code>dsdb_result_s* search_number_range_pagination(dsd_cloud_instance_t * p, char *database, char *key, float start, float end, char *next_seq, int num_per_page)</code><br />
<strong>描述：</strong><br />
从数据库database中搜索内容符合key的值在[start,end]之间的记录的名，分页查询，即数据库每次只返回num_per_page个数据，同时返回查询下页数据的id, 查询结果为符合条件的记录名列表，失败返回NULL，成功返回dsdb_result_s指针。应用程序调用<code>void free_dsdb_result(dsdb_result_s *res)</code> 释放返回值，否则会导致内存泄露。<br />
<strong>参数：</strong><br />
<code>IN dsd_cloud_instance_t * p</code> ： 调用系统服务的client实例<br />
<code>IN char* database</code> ：数据库名<br />
<code>IN char * key</code> ：key名<br />
<code>IN float start</code> ：最小值<br />
<code>IN float end</code> ：最大值<br />
<code>IN char * next_seq</code> ： 搜索下页数据的id，如果为NULL或“0”，查询第一页数据<br />
<code>IN int num_per_page</code> ：每页返回数据数量<br />
<strong>返回值：</strong><br />
成功：dsdb_result_s指针，应用需要调用free_dsdb_result 释放该指针<br />
失败：NULL        </p>
</li>
<li>
<p><code>dsdb_result_s* search_or(dsd_cloud_instance_t * p, char *database, dsdb_search* conditions)</code><br />
<strong>描述：</strong><br />
从数据库database中搜索 内容符合conditions中任意条件的记录的名。NULL，成功返回dsdb_result_s指针。应用程序调用<code>void free_dsdb_result(dsdb_result_s *res)</code> 释放返回值，否则会导致内存泄露。<br />
<strong>参数：</strong><br />
<code>IN dsd_cloud_instance_t * p</code> ： 调用系统服务的client实例<br />
<code>IN char* database</code> ：数据库名<br />
<code>IN dsdb_search* conditions</code> ： 搜索条件列表<br />
<strong>返回值：</strong><br />
成功：dsdb_result_s指针，应用需要调用free_dsdb_result 释放该指针<br />
失败：NULL     </p>
</li>
<li>
<p><code>dsdb_result_s* search_or_pagination(dsd_cloud_instance_t * p, char *database, dsdb_search *conditions, char *next_seq, int num_per_page)</code><br />
<strong>描述：</strong><br />
从数据库database中搜索 内容符合conditions中任意条件的记录，分页查询，即数据库每次只返回num_per_page个数据，同时返回查询下页的查询id ，如果结果数少于num_per_page，则全部返回，同时下页查询id为空。失败：返回NULL，成功返回dsdb_result_s指针。应用程序调用<code>void free_dsdb_result(dsdb_result_s *res)</code> 释放返回值，否则会导致内存泄露。<br />
<strong>参数：</strong><br />
<code>IN dsd_cloud_instance_t * p</code> ： 调用系统服务的client实例<br />
<code>IN char* database</code> ：数据库名<br />
<code>IN dsdb_search* conditions</code> ： 搜索条件列表<br />
<code>IN char * next_seq</code> ： 搜索下页数据的id，如果为NULL或“0”，查询第一页数据<br />
<code>IN int num_per_page</code> ：每页返回数据数量<br />
<strong>返回值：</strong><br />
成功：dsdb_result_s指针，应用需要调用free_dsdb_result 释放该指针<br />
失败：NULL   </p>
</li>
<li>
<p><code>dsdb_result_s* search_and(dsd_cloud_instance_t * p, char *database, dsdb_search* conditions)</code><br />
<strong>描述：</strong><br />
从数据库database中搜索 内容符合conditions中所有条件的记录的名。NULL，成功返回dsdb_result_s指针。应用程序调用<code>void free_dsdb_result(dsdb_result_s *res)</code> 释放返回值，否则会导致内存泄露。<br />
<strong>参数：</strong><br />
<code>IN dsd_cloud_instance_t * p</code> ： 调用系统服务的client实例<br />
<code>IN char* database</code> ：数据库名<br />
<code>IN dsdb_search* conditions</code> ：搜索条件列表<br />
<strong>返回值：</strong><br />
成功：dsdb_result_s指针，应用需要调用free_dsdb_result 释放该指针<br />
失败：NULL      </p>
</li>
<li>
<p><code>dsdb_result_s* search_and_pagination(dsd_cloud_instance_t * p, char *database, dsdb_search *conditions, char *next_seq, int num_per_page)</code><br />
<strong>描述：</strong><br />
从数据库database中搜索 内容符合conditions中所有条件的记录的名，分页查询，即数据库每次只返回num_per_page个数据，同时返回查询下页的查询id ，如果结果数少于num_per_page，则全部返回，同时下页查询id为空。失败：返回NULL，成功返回dsdb_result_s指针。应用程序调用<code>void free_dsdb_result(dsdb_result_s *res)</code> 释放返回值，否则会导致内存泄露。<br />
<strong>参数：</strong><br />
<code>IN dsd_cloud_instance_t * p</code> ： 调用系统服务的client实例<br />
<code>IN char* database</code> ：数据库名<br />
<code>IN dsdb_search* conditions</code> ：搜索条件列表<br />
<code>IN char * next_seq</code> ： 搜索下页数据的id，如果为NULL或“0”，查询第一页数据<br />
<code>IN int num_per_page</code> ：每页返回数据数量<br />
<strong>返回值：</strong><br />
成功：dsdb_result_s指针，应用需要调用free_dsdb_result 释放该指针<br />
失败：NULL   </p>
</li>
<li>
<p><code>dsdb_result_s* list_all(dsd_cloud_instance_t * p, char *database)</code><br />
<strong>描述：</strong><br />
列出数据库database中的所有key。失败返回NULL，成功返回所有记录名列表。应用程序调用<code>void free_dsdb_result(dsdb_result_s *res)</code> 释放返回值，否则会导致内存泄露。<br />
<strong>参数：</strong><br />
<code>IN dsd_cloud_instance_t * p</code> ： 调用系统服务的client实例<br />
<code>IN char* database</code> ：数据库名<br />
<strong>返回值：</strong><br />
成功：dsdb_result_s指针，应用需要调用free_dsdb_result 释放该指针<br />
失败：NULL   </p>
</li>
<li>
<p><code>dsdb_result_s* search_value_number(dsd_cloud_instance_t * p, char * database, char *key, float value)</code><br />
<strong>描述：</strong><br />
从数据库database中搜索内容符合key=value这种模式的记录，查询结果为所有符合条件的记录值，失败返回NULL，成功返回dsdb_result_s指针。应用程序调用<code>void free_dsdb_result(dsdb_result_s *res)</code> 释放返回值，否则会导致内存泄露。<br />
<strong>参数：</strong><br />
<code>IN dsd_cloud_instance_t * p</code> ： 调用系统服务的client实例<br />
<code>IN char* database</code> ：数据库名<br />
<code>IN char * key</code> ：key名<br />
<code>IN float value</code> ：value<br />
<strong>返回值：</strong><br />
成功：dsdb_result_s指针，应用需要调用free_dsdb_result 释放该指针<br />
失败：NULL        </p>
</li>
<li>
<p><code>dsdb_result_s* search_value_string(dsd_cloud_instance_t * p, char * database, char *key, char* value)</code><br />
<strong>描述：</strong><br />
从数据库database中搜索内容符合key=value这种模式的记录，查询结果为所有符合条件的记录值，失败返回NULL，成功返回dsdb_result_s指针。应用程序调用<code>void free_dsdb_result(dsdb_result_s *res)</code> 释放返回值，否则会导致内存泄露。<br />
<strong>参数：</strong><br />
<code>IN dsd_cloud_instance_t * p</code> ： 调用系统服务的client实例<br />
<code>IN char* database</code> ：数据库名<br />
<code>IN char * key</code> ：key名<br />
<code>IN char * value</code> ：value<br />
<strong>返回值：</strong><br />
成功：dsdb_result_s指针，应用需要调用free_dsdb_result 释放该指针<br />
失败：NULL </p>
</li>
<li>
<p><code>dsdb_result_s* search_value_string_pagination(dsd_cloud_instance_t * p, char *database, char *key, char *value, char *next_seq, int num_per_page)</code><br />
<strong>描述：</strong><br />
从数据库database中搜索内容符合key=value这种模式的记录，分页查询，即数据库每次只返回num_per_page个数据，同时返回查询下页数据的id, 查询结果为所有符合条件的记录值，失败返回NULL，成功返回dsdb_result_s指针。应用程序调用<code>void free_dsdb_result(dsdb_result_s *res)</code> 释放返回值，否则会导致内存泄露。<br />
<strong>参数：</strong><br />
<code>IN dsd_cloud_instance_t * p</code> ： 调用系统服务的client实例<br />
<code>IN char* database</code> ：数据库名<br />
<code>IN char * key</code> ：key名<br />
<code>IN char * value</code> ：value<br />
<code>IN char * next_seq</code> ： 搜索下页数据的id，如果为NULL或“0”，查询第一页数据<br />
<code>IN int num_per_page</code> ：每页返回数据数量<br />
<strong>返回值：</strong>
成功：dsdb_result_s指针，应用需要调用free_dsdb_result 释放该指针<br />
失败：NULL    </p>
</li>
<li>
<p><code>dsdb_result_s* search_value_number_pagination(dsd_cloud_instance_t * p, char *database, char *key, float value, char *next_seq, int num_per_page)</code><br />
<strong>描述：</strong><br />
从数据库database中搜索内容符合key=value这种模式的记录，分页查询，即数据库每次只返回num_per_page个数据，同时返回查询下页数据的id, 查询结果为所有符合条件的记录值，失败返回NULL，成功返回dsdb_result_s指针。应用程序调用<code>void free_dsdb_result(dsdb_result_s *res)</code> 释放返回值，否则会导致内存泄露。<br />
<strong>参数：</strong><br />
<code>IN dsd_cloud_instance_t * p</code> ： 调用系统服务的client实例<br />
<code>IN char* database</code> ：数据库名<br />
<code>IN char * key</code> ：key名<br />
<code>IN float value</code> ：value<br />
<code>IN char * next_seq</code> ： 搜索下页数据的id，如果为NULL或“0”，查询第一页数据<br />
<code>IN int num_per_page</code> ：每页返回数据数量<br />
<strong>返回值：</strong>
成功：dsdb_result_s指针，应用需要调用free_dsdb_result 释放该指针<br />
失败：NULL      </p>
</li>
<li>
<p><code>dsdb_result_s* search_value_string_range(dsd_cloud_instance_t * p, char *database, char *key, char *start, char *end)</code><br />
<strong>描述：</strong><br />
从数据库database中搜索内容符合key的值在[start,end]之间的记录，查询结果为所有符合条件的记录值，失败返回NULL，成功返回dsdb_result_s指针。应用程序调用<code>void free_dsdb_result(dsdb_result_s *res)</code> 释放返回值，否则会导致内存泄露。<br />
<strong>参数：</strong><br />
<code>IN dsd_cloud_instance_t * p</code> ： 调用系统服务的client实例<br />
<code>IN char* database</code> ：数据库名<br />
<code>IN char * key</code> ：key名<br />
<code>IN char *start</code> ：最小值<br />
<code>IN char *end</code> ：最大值<br />
<strong>返回值：</strong>
成功：dsdb_result_s指针，应用需要调用free_dsdb_result 释放该指针<br />
失败：NULL </p>
</li>
<li>
<p><code>dsdb_result_s* search_value_number_range(dsd_cloud_instance_t * p, char *database, char *key, float start, float end)</code><br />
<strong>描述：</strong><br />
从数据库database中搜索内容符合key的值在[start,end]之间的记录，查询结果为所有符合条件的记录值，失败返回NULL，成功返回dsdb_result_s指针。应用程序调用<code>void free_dsdb_result(dsdb_result_s *res)</code> 释放返回值，否则会导致内存泄露。<br />
<strong>参数：</strong><br />
<code>IN dsd_cloud_instance_t * p</code> ： 调用系统服务的client实例<br />
<code>IN char* database</code> ：数据库名<br />
<code>IN char * key</code> ：key名<br />
<code>IN float start</code> ：最小值<br />
<code>IN float end</code> ：最大值<br />
<strong>返回值：</strong>
成功：dsdb_result_s指针，应用需要调用free_dsdb_result 释放该指针
失败：NULL    </p>
</li>
<li>
<p><code>dsdb_result_s* search_value_string_range_pagination(dsd_cloud_instance_t * p, char *database, char *key, char *start, char *end, char *next_seq, int num_per_page)</code><br />
<strong>描述：</strong><br />
从数据库database中搜索内容符合key的值在[start,end]之间的记录，分页查询，即数据库每次只返回num_per_page个数据，同时返回查询下页数据的id, 查询结果为所有符合条件的记录值，失败返回NULL，成功返回dsdb_result_s指针。应用程序调用<code>void free_dsdb_result(dsdb_result_s *res)</code> 释放返回值，否则会导致内存泄露。<br />
<strong>参数：</strong><br />
<code>IN dsd_cloud_instance_t * p</code> ： 调用系统服务的client实例<br />
<code>IN char* database</code> ：数据库名<br />
<code>IN char * key</code> ：key名<br />
<code>IN char *start</code> ：最小值<br />
<code>IN char *end</code> ：最大值<br />
<code>IN char * next_seq</code> ： 搜索下页数据的id，如果为NULL或“0”，查询第一页数据<br />
<code>IN int num_per_page</code> ：每页返回数据数量<br />
<strong>返回值：</strong><br />
成功：dsdb_result_s指针，应用需要调用free_dsdb_result 释放该指针<br />
失败：NULL  </p>
</li>
<li>
<p><code>dsdb_result_s* search_value_number_range_pagination(dsd_cloud_instance_t * p, char *database, char *key, float start, float end, char *next_seq, int num_per_page)</code><br />
<strong>描述：</strong><br />
从数据库database中搜索内容符合key的值在[start,end]之间的记录，分页查询，即数据库每次只返回num_per_page个数据，同时返回查询下页数据的id, 查询结果为所有符合条件的记录值，失败返回NULL，成功返回dsdb_result_s指针。应用程序调用<code>void free_dsdb_result(dsdb_result_s *res)</code> 释放返回值，否则会导致内存泄露。<br />
<strong>参数：</strong><br />
<code>IN dsd_cloud_instance_t * p</code> ： 调用系统服务的client实例<br />
<code>IN char* database</code> ：数据库名<br />
<code>IN char * key</code> ：key名<br />
<code>IN float start</code> ：最小值<br />
<code>IN float end</code> ：最大值<br />
<code>IN char * next_seq</code> ： 搜索下页数据的id，如果为NULL或“0”，查询第一页数据<br />
<code>IN int num_per_page</code> ：每页返回数据数量<br />
<strong>返回值：</strong><br />
成功：dsdb_result_s指针，应用需要调用free_dsdb_result 释放该指针<br />
失败：NULL        </p>
</li>
<li>
<p><code>dsdb_result_s* search_value_or(dsd_cloud_instance_t * p, char *database, dsdb_search* conditions)</code><br />
<strong>描述：</strong><br />
从数据库database中搜索 内容符合conditions中任意条件的记录的内容。NULL，成功返回dsdb_result_s指针。应用程序调用<code>void free_dsdb_result(dsdb_result_s *res)</code> 释放返回值，否则会导致内存泄露。<br />
<strong>参数：</strong><br />
<code>IN dsd_cloud_instance_t * p</code> ： 调用系统服务的client实例<br />
<code>IN char* database</code> ：数据库名<br />
<code>IN dsdb_search* conditions</code> ：搜索条件列表<br />
<strong>返回值：</strong><br />
成功：dsdb_result_s指针，应用需要调用free_dsdb_result 释放该指针<br />
失败：NULL     </p>
</li>
<li>
<p><code>dsdb_result_s* search_value_or_pagination(dsd_cloud_instance_t * p, char *database, dsdb_search *conditions, char *next_seq, int num_per_page)</code><br />
<strong>描述：</strong><br />
从数据库database中搜索 内容符合conditions中任意条件的记录的内容，分页查询，即数据库每次只返回num_per_page个数据，同时返回查询下页的查询id ，如果结果数少于num_per_page，则全部返回，同时下页查询id为空。失败：返回NULL，成功返回dsdb_result_s指针。应用程序调用<code>void free_dsdb_result(dsdb_result_s *res)</code> 释放返回值，否则会导致内存泄露。<br />
<strong>参数：</strong><br />
<code>IN dsd_cloud_instance_t * p</code> ： 调用系统服务的client实例<br />
<code>IN char* database</code> ：数据库名<br />
<code>IN dsdb_search* conditions</code> ；搜索条件列表<br />
<code>IN char * next_seq</code> ： 搜索下页数据的id，如果为NULL或“0”，查询第一页数据<br />
<code>IN int num_per_page</code> ：每页返回数据数量<br />
<strong>返回值：</strong><br />
成功：dsdb_result_s指针，应用需要调用free_dsdb_result 释放该指针<br />
失败：NULL   </p>
</li>
<li>
<p><code>dsdb_result_s* search_value_and(dsd_cloud_instance_t * p, char *database, dsdb_search* conditions)</code><br />
<strong>描述：</strong><br />
从数据库database中搜索 内容符合conditions中所有条件的记录的内容。NULL，成功返回dsdb_result_s指针。应用程序调用<code>void free_dsdb_result(dsdb_result_s *res)</code> 释放返回值，否则会导致内存泄露。<br />
<strong>参数：</strong><br />
<code>IN dsd_cloud_instance_t * p</code> ： 调用系统服务的client实例<br />
<code>IN char* database</code> ：数据库名<br />
<code>IN dsdb_search* conditions</code> ：搜索条件列表<br />
<strong>返回值：</strong><br />
成功：dsdb_result_s指针，应用需要调用free_dsdb_result 释放该指针<br />
失败：NULL      </p>
</li>
<li>
<p><code>dsdb_result_s* search_vlaue_and_pagination(dsd_cloud_instance_t * p, char *database, dsdb_search *conditions, char *next_seq, int num_per_page)</code><br />
<strong>描述：</strong><br />
从数据库database中搜索 内容符合conditions中所有条件的记录的内容，分页查询，即数据库每次只返回num_per_page个数据，同时返回查询下页的查询id ，如果结果数少于num_per_page，则全部返回，同时下页查询id为空。失败：返回NULL，成功返回dsdb_result_s指针。应用程序调用<code>void free_dsdb_result(dsdb_result_s *res)</code> 释放返回值，否则会导致内存泄露。<br />
<strong>参数：</strong><br />
<code>IN dsd_cloud_instance_t * p</code> ： 调用系统服务的client实例<br />
<code>IN char* database</code> ：数据库名<br />
<code>IN dsdb_search* conditions</code> ：搜索条件列表<br />
<code>IN char * next_seq</code> ： 搜索下页数据的id，如果为NULL或“0”，查询第一页数据<br />
<code>IN int num_per_page</code> ：每页返回数据数量<br />
<strong>返回值：</strong><br />
成功：dsdb_result_s指针，应用需要调用free_dsdb_result 释放该指针<br />
失败：NULL     </p>
</li>
<li>
<p><code>void free_dsdb_result(dsdb_result_s *res)</code><br />
<strong>描述：</strong><br />
释放res内存<br />
<strong>参数：</strong><br />
无<br />
<strong>返回值：</strong><br />
无  </p>
</li>
<li>
<p><code>dsdb_search* dsdb_cond_init()</code><br />
<strong>描述：</strong><br />
初始化一个dsdb_search的结构体，需要调用dsdb_cond_free释放。失败返回NULL，成功返回非NULL
<strong>参数：</strong><br />
无
<strong>返回值：</strong><br />
成功：其他<br />
失败；NULL   </p>
</li>
<li>
<p><code>int insert_string_cond(dsdb_search *cond, char *key, char *value)</code><br />
<strong>描述：</strong><br />
向dsdb_search中插入一条key=value的条件，成功dsd_dsdb_success,失败：dsd_dsdb_error<br />
<strong>参数：</strong><br />
<code>IN dsdb_search * cond</code> ：搜索条件结构体<br />
<code>IN char * key</code> ：key =value条件的key<br />
<code>IN char *value</code> ：key=value条件的value<br />
<strong>返回值：</strong>
成功dsd_dsdb_success<br />
失败：dsd_dsdb_error    </p>
</li>
<li>
<p><code>int insert_number_cond(dsdb_search *cond, char *key, float value)</code><br />
<strong>描述：</strong><br />
向dsdb_search中插入一条key=value的条件，成功dsd_dsdb_success,失败：dsd_dsdb_error<br />
<strong>参数：</strong><br />
<code>IN dsdb_search*cond</code> ：搜索条件结构体<br />
<code>IN char *key</code> ：key =value条件的key<br />
<code>IN flaot value</code> ：key=value条件的value<br />
<strong>返回值：</strong><br />
成功dsd_dsdb_success<br />
失败：dsd_dsdb_error   </p>
</li>
<li>
<p><code>int insert_range_string_cond(dsdb_search *cond, char *key, char *start, char *end)</code><br />
<strong>描述：</strong><br />
向dsdb_search中插入一条key的内容在[start,end]之间的条件，成功dsd_dsdb_success,失败：dsd_dsdb_error<br />
<strong>参数：</strong><br />
<code>IN dsdb_search*cond</code> ：搜索条件结构体<br />
<code>IN char *key</code> ：k搜索关键字Key<br />
<code>IN char *start</code> ：最小值<br />
<code>IN char *end</code>  ：最大值<br />
<strong>返回值：</strong><br />
成功dsd_dsdb_success<br />
失败：dsd_dsdb_error    </p>
</li>
<li>
<p><code>int insert_range_number_cond(dsdb_search *cond , char *key, float start , float end )</code><br />
<strong>描述：</strong><br />
向dsdb_search中插入一条key的内容在[start,end]之间的条件，成功dsd_dsdb_success,失败：dsd_dsdb_error<br />
<strong>参数：</strong><br />
<code>IN dsdb_search*cond</code> ：搜索条件结构体<br />
<code>IN char *key</code> ：k搜索关键字Key<br />
<code>IN float start</code> ：最小值<br />
<code>IN float end</code> ：最大值<br />
<strong>返回值：</strong><br />
成功dsd_dsdb_success<br />
失败：dsd_dsdb_error    </p>
</li>
<li><code>void dsdb_cond_free(dsdb_search *to)</code><br />
<strong>描述：</strong><br />
释放to所指向的内存区域<br />
<strong>参数：</strong><br />
<code>IN dsdb_search *to</code> ：待释放的dsdb_search<br />
<strong>返回值：</strong><br />
无</li>
</ol>
      </div>

              <div class="tract"><img src="/images/tract.png"/></div>
            <div class="clearfix"></div>
      <div class="scroll" id="scroll" style="display:none;">
			     <img src="/images/top.png"/>
		  </div>
    </div>
  </div>
  <script>hljs.initHighlightingOnLoad();</script>
</body>

</html>
